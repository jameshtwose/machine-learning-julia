<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>neuropy.anomaly_detection &mdash; neuropy v1.5.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="_static/style.css" type="text/css" />
      <link rel="stylesheet" href="_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="_static/dark_mode_css/general.css" type="text/css" />
      <link rel="stylesheet" href="_static/dark_mode_css/dark.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->

        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="_static/dark_mode_js/default_light.js"></script>
        <script src="_static/dark_mode_js/theme_switcher.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to neuropy’s documentation!" href="index.html" />
</head>

<body class="wy-body-for-nav">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> neuropy
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">neuropy.anomaly_detection</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-neuropy.cluster_analysis"><code class="docutils literal notranslate"><span class="pre">neuropy.cluster_analysis</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-neuropy.config"><code class="docutils literal notranslate"><span class="pre">neuropy.config</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-neuropy.correlation"><code class="docutils literal notranslate"><span class="pre">neuropy.correlation</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-neuropy.dimensionality_reduction"><code class="docutils literal notranslate"><span class="pre">neuropy.dimensionality_reduction</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-neuropy.frequency_domain"><code class="docutils literal notranslate"><span class="pre">neuropy.frequency_domain</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-neuropy.frequentist_statistics"><code class="docutils literal notranslate"><span class="pre">neuropy.frequentist_statistics</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-neuropy.group_analysis"><code class="docutils literal notranslate"><span class="pre">neuropy.group_analysis</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-neuropy.internal_composite"><code class="docutils literal notranslate"><span class="pre">neuropy.internal_composite</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-neuropy.internal_utils"><code class="docutils literal notranslate"><span class="pre">neuropy.internal_utils</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-neuropy.machine_learning_classification"><code class="docutils literal notranslate"><span class="pre">neuropy.machine_learning_classification</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-neuropy.machine_learning_regression"><code class="docutils literal notranslate"><span class="pre">neuropy.machine_learning_regression</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-neuropy.machine_learning_utils"><code class="docutils literal notranslate"><span class="pre">neuropy.machine_learning_utils</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-neuropy.utils"><code class="docutils literal notranslate"><span class="pre">neuropy.utils</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-neuropy.vumc_utils"><code class="docutils literal notranslate"><span class="pre">neuropy.vumc_utils</span></code></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">neuropy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><code class="docutils literal notranslate"><span class="pre">neuropy.anomaly_detection</span></code></li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">


<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="module-neuropy.anomaly_detection">
<span id="neuropy-anomaly-detection"></span><h1><code class="docutils literal notranslate"><span class="pre">neuropy.anomaly_detection</span></code><a class="headerlink" href="#module-neuropy.anomaly_detection" title="Permalink to this headline"></a></h1>
<p>Submodule anomaly_detection.py includes the following functions: &lt;br&gt;
- <strong>local_outlier_factor():</strong> Run local outlier factor using sklearn.neighbors &lt;br&gt;
- <strong>std_outlier_detector():</strong> Identify outliers based on standard deviation &lt;br&gt;
- <strong>iqr_outlier_detector():</strong> Identify outliers based on inter-quartile range &lt;br&gt;
- <strong>univariate_outlier_removal():</strong> Identify outliers via a parametric (if normal) or non-parametric method. &lt;br&gt;</p>
<dl class="py function">
<dt class="sig sig-object py" id="neuropy.anomaly_detection.iqr_outlier_detector">
<span class="sig-prename descclassname"><span class="pre">neuropy.anomaly_detection.</span></span><span class="sig-name descname"><span class="pre">iqr_outlier_detector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.5</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/neuropy/anomaly_detection.html#iqr_outlier_detector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.anomaly_detection.iqr_outlier_detector" title="Permalink to this definition"></a></dt>
<dd><p>Inter-quartile-range-based outlier removal helper.</p>
<p>Note: if <cite>s</cite> is not numerical, it returns a list with the same number of <cite>False</cite> objects as there are rows in <cite>s</cite>.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>s: pd.Series</strong></dt><dd><p>numerical variable to identify outliers from</p>
</dd>
<dt><strong>factor: float (default: 1.5)</strong></dt><dd><p>determines the upper and lower bounds of what is “normal” in the data.
anything beyond those bounds is an “anomaly”:</p>
<blockquote>
<div><p>upper bound: 3rd quartile + (IQR  * factor)
lower bound: 1st quartile - (IQR * factor)</p>
</div></blockquote>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>List[bool]</dt><dd><p>list of boolean flags indicating if data point is an outlier</p>
</dd>
<dt>lower: float</dt><dd><p>integer of the lower cutoff used to define an outlier</p>
</dd>
<dt>upper: float</dt><dd><p>integer of the upper cutoff used to define an outlier</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_outlier</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span> <span class="o">=</span> <span class="n">iqr_outlier_detector</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">is_outlier</span> <span class="o">==</span> <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.anomaly_detection.local_outlier_factor">
<span class="sig-prename descclassname"><span class="pre">neuropy.anomaly_detection.</span></span><span class="sig-name descname"><span class="pre">local_outlier_factor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'minkowski'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_neighbours</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(25,</span> <span class="pre">2)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/anomaly_detection.html#local_outlier_factor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.anomaly_detection.local_outlier_factor" title="Permalink to this definition"></a></dt>
<dd><dl>
<dt>Perform local outlier factor algorithm. Input cannot contain missing values.</dt><dd><p>When performed with two features, a 2D plot is created.</p>
<p>Further Information:
<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.neighbors.LocalOutlierFactor.html#sklearn.neighbors.LocalOutlierFactor">https://scikit-learn.org/stable/modules/generated/sklearn.neighbors.LocalOutlierFactor.html#sklearn.neighbors.LocalOutlierFactor</a></p>
</dd>
</dl>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>X: pandas.DataFrame</strong></dt><dd><p>Dataframe with variables in columns.</p>
</dd>
<dt><strong>show: bool (default: False)</strong></dt><dd><p>Whether to show dataframe with outliers and summary.</p>
</dd>
<dt><strong>plot: bool (default: True)</strong></dt><dd><p>Whether to plot local outlier factor plots.</p>
</dd>
<dt><strong>metric: str (default: ‘minkowski’)</strong></dt><dd><p>metric used for the distance computation. Valid values for metric are:</p>
<ul class="simple">
<li><p>from scikit-learn: [‘cityblock’, ‘cosine’, ‘euclidean’, ‘l1’, ‘l2’,</p></li>
</ul>
<p>‘manhattan’]</p>
<ul class="simple">
<li><p>from scipy.spatial.distance: [‘braycurtis’, ‘canberra’, ‘chebyshev’,</p></li>
</ul>
<p>‘correlation’, ‘dice’, ‘hamming’, ‘jaccard’, ‘kulsinski’, ‘mahalanobis’, ‘
matching’, ‘minkowski’, ‘rogerstanimoto’, ‘russellrao’, ‘seuclidean’,
‘sokalmichener’, ‘sokalsneath’, ‘sqeuclidean’, ‘yule’]</p>
</dd>
<dt><strong>n_neighbours: int, optional (default: 20)</strong></dt><dd><p>Number of neighbors to use by default for <code class="xref py py-meth docutils literal notranslate"><span class="pre">kneighbors()</span></code> queries.
If n_neighbors is larger than the number of samples provided,
all samples will be used.</p>
</dd>
<dt><strong>feature_1: str (default:None)</strong></dt><dd><p>Specify a feature on which LOF should be applied.</p>
</dd>
<dt><strong>feature_2: str (default:None)</strong></dt><dd><p>Specify another feature on which LOF should be applied.</p>
</dd>
<dt><strong>figsize: tuple (default: (25,2))</strong></dt><dd><p>Figure size of the heatmap, does not change size of 2D plot.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df_outliers: pandas.DataFrame</dt><dd><p>Dataframe containing feature values and outlier column.</p>
</dd>
<dt>summary: pandas.DataFrame</dt><dd><p>Dataframe containing a lof summary:
[n_total, n_inliers,  n_outliers, percentage_outliers]</p>
</dd>
<dt>fig: matplotlib.pyplot.Figure (optional)</dt><dd><p>if plot==True, return figure object</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s1">&#39;iris&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">&#39;species&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">df_outliers</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">fig</span><span class="p">)</span> <span class="o">=</span> <span class="n">local_outlier_factor</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;minkowski&quot;</span><span class="p">,</span> <span class="n">n_neighbours</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                              <span class="n">feature_1</span><span class="o">=</span><span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="n">feature_2</span><span class="o">=</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.anomaly_detection.std_outlier_detector">
<span class="sig-prename descclassname"><span class="pre">neuropy.anomaly_detection.</span></span><span class="sig-name descname"><span class="pre">std_outlier_detector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/neuropy/anomaly_detection.html#std_outlier_detector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.anomaly_detection.std_outlier_detector" title="Permalink to this definition"></a></dt>
<dd><p>Standard-deviation-based outlier removal helper.</p>
<p>Note: if <cite>s</cite> is not numerical, it returns a list with the same number of <cite>False</cite> objects as there are rows in <cite>s</cite>.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>s: pd.Series</strong></dt><dd><p>numerical variable to identify outliers from</p>
</dd>
<dt><strong>factor: float (default: 3.)</strong></dt><dd><p>determines the upper and lower bounds of what is “normal” in the data.
anything beyond those bounds is an “anomaly”:</p>
<blockquote>
<div><p>upper bound: mean + (std  * factor)
lower bound: mean - (std * factor)</p>
</div></blockquote>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>discard list: List[bool]</dt><dd><p>list of boolean flags indicating if data point is an outlier</p>
</dd>
<dt>lower: float</dt><dd><p>integer of the lower cutoff used to define an outlier</p>
</dd>
<dt>upper: float</dt><dd><p>integer of the upper cutoff used to define an outlier</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_outlier</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span> <span class="o">=</span> <span class="n">std_outlier_detector</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mf">1.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">is_outlier</span> <span class="o">==</span> <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.anomaly_detection.univariate_outlier_removal">
<span class="sig-prename descclassname"><span class="pre">neuropy.anomaly_detection.</span></span><span class="sig-name descname"><span class="pre">univariate_outlier_removal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df:</span> <span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nonparam_func:</span> <span class="pre">typing.Callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">iqr_outlier_detector&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nonparam_args:</span> <span class="pre">typing.Dict[str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">typing.Any]</span> <span class="pre">=</span> <span class="pre">{'factor':</span> <span class="pre">1.5}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nonparam_name:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'inter-quartile</span> <span class="pre">range</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k=1.5'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std_factor:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">3.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize:</span> <span class="pre">typing.Tuple[float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">float]</span> <span class="pre">=</span> <span class="pre">(15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">7)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/neuropy/anomaly_detection.html#univariate_outlier_removal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.anomaly_detection.univariate_outlier_removal" title="Permalink to this definition"></a></dt>
<dd><p>Rule-based univariate outlier removal.</p>
<p>Applies both a parametric or a non-parametric outlier removal based on a condition (parametric assumption).
By default, the parametric method assumes a gaussian distribution, and so:</p>
<blockquote>
<div><p>if met, defines ouliers based on the empirical rule (see <a class="reference external" href="https://en.wikipedia.org/wiki/68%E2%80%9395%E2%80%9399.7_rule">https://en.wikipedia.org/wiki/68%E2%80%9395%E2%80%9399.7_rule</a>)
if NOT met, defines ouliers based on its inter-quartile range</p>
</div></blockquote>
<p>Note that detection is ONLY applied to numerical columns. Categorical columns will remain and returned UNALTERED
in every case.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>df: pd.DataFrame</strong></dt><dd><p>dataframe with column variables to apply outlier removal to. Only numerical variables are considered.</p>
</dd>
<dt><strong>nonparam_func: callable (default: iqr_outlier_detector())</strong></dt><dd><p>non-parametric function. Must take in a Pandas Series, and return a list of booleans of the same size
indicating whether a data point is an outlier or not, and the lower and upper float values that define an
outlier. Default is IQR method.</p>
</dd>
<dt><strong>nonparam_args: dict (default: {“factor”: 1.5})</strong></dt><dd><p>non-parametric input arguments. Default is k=1.5 for IQR method.</p>
</dd>
<dt><strong>nonparam_name: str (default: “non-parametric method”)</strong></dt><dd><p>non-parametric method name (as shown in summary output).</p>
</dd>
<dt><strong>std_factor: float (default: 3.)</strong></dt><dd><p>factor multiplier for <cite>std_outlier_detector</cite>. See ‘std_outlier_detector` docstrings for more info.</p>
</dd>
<dt><strong>remove: bool (default: False)</strong></dt><dd><p>whether to apply outlier removal to input dataframe (mask of NaNs). Categorical columns remain unaltered.</p>
</dd>
<dt><strong>plot: bool (default: False)</strong></dt><dd><p>whether to plot outliers.</p>
</dd>
<dt><strong>figsize: Tuple[float, float] (default: (15, 7))</strong></dt><dd><p>figure size.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df: pd.Dataframe</dt><dd><p>input dataframe with or without outliers</p>
</dd>
<dt>summary: pd.DataFrame</dt><dd><p>summary report of outlier removal analysis</p>
</dd>
<dt>fig: plt.Figure (optional)</dt><dd><p>if plot==True, return figure object</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.anomaly_detection</span> <span class="kn">import</span> <span class="n">univariate_outlier_removal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s1">&#39;titanic&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">some_outlier_detector</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">4.</span><span class="p">):</span>
<span class="gp">... </span>       <span class="n">to_discard</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">threshold</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">s</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">)</span>
<span class="gp">... </span>       <span class="k">return</span> <span class="n">to_discard</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="o">-</span><span class="n">threshold</span><span class="p">,</span> <span class="n">threshold</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">univariate_outlier_removal</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
<span class="gp">... </span>                                              <span class="n">nonparam_func</span><span class="o">=</span><span class="n">some_outlier_detector</span><span class="p">,</span>
<span class="gp">... </span>                                              <span class="n">nonparam_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;threshold&quot;</span><span class="p">:</span> <span class="mf">55.</span><span class="p">},</span>
<span class="gp">... </span>                                              <span class="n">nonparam_name</span><span class="o">=</span><span class="s2">&quot;hard threshold, t=5&quot;</span><span class="p">,</span>
<span class="gp">... </span>                                              <span class="n">remove</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>                                              <span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                                              <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-neuropy.cluster_analysis">
<span id="neuropy-cluster-analysis"></span><h1><code class="docutils literal notranslate"><span class="pre">neuropy.cluster_analysis</span></code><a class="headerlink" href="#module-neuropy.cluster_analysis" title="Permalink to this headline"></a></h1>
<p>Submodule dimensionality_reduction.py includes the following functions: &lt;br&gt;
- <strong>tSNE():</strong> t-Distributed Stochastic Neighbor Embedding (t-SNE) Analysis &lt;br&gt;
- <strong>PCA_analysis():</strong> Perform Principal Component Analysis (PCA) &lt;br&gt;</p>
<dl class="py function">
<dt class="sig sig-object py" id="neuropy.cluster_analysis.PCA_analysis">
<span class="sig-prename descclassname"><span class="pre">neuropy.cluster_analysis.</span></span><span class="sig-name descname"><span class="pre">PCA_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_components</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/cluster_analysis.html#PCA_analysis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.cluster_analysis.PCA_analysis" title="Permalink to this definition"></a></dt>
<dd><p>Perform Principal Component Analysis (PCA). Analysis is done only using numerical features</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame</strong></dt><dd><p>Dataframe which contains some numerical feature</p>
</dd>
<dt><strong>n_components</strong><span class="classifier">int (default: 2)</span></dt><dd><p>Number of principal components to obtain with PCA</p>
</dd>
<dt><strong>hue: string, optional</strong></dt><dd><p>Grouping variable that will produce points with different colors</p>
</dd>
<dt><strong>plot</strong><span class="classifier">bool, optional (default: True)</span></dt><dd><p>plot PCA analysis</p>
</dd>
<dt><strong>kwargs: key, value pairings</strong></dt><dd><dl class="simple">
<dt>Additional keyword arguments for plot setting matplolib style. Available setting:</dt><dd><p>figsize : tuple (default: (20, 10))
textsize : int (default: 15) adjust size for xticks label, title and legend</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>pca_summary: pandas.DataFrame</dt><dd><p>Nrovide info relative to the explained variance (and cumulative) for each pca component</p>
</dd>
<dt>pca_features: pandas.DataFrame</dt><dd><p>Number of PCA component defined by n_components</p>
</dd>
<dt>summary_input: pandas.DataFrame</dt><dd><p>Info about the number of features feed to PCA with Nan values, outliers</p>
</dd>
<dt>fig: matplotlib.figure.Figure</dt><dd><p>plot object if plot==True. Left: Plot with the first 2 PCA components, Right: Scree plot</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.cluster_analysis</span> <span class="kn">import</span> <span class="n">PCA_analysis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;iris&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">pca_summary</span><span class="p">,</span> <span class="n">pca_features</span><span class="p">,</span> <span class="n">summary_input</span><span class="p">,</span> <span class="n">fig</span><span class="p">)</span> <span class="o">=</span> <span class="n">PCA_analysis</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n_components</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;species&quot;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.cluster_analysis.tSNE">
<span class="sig-prename descclassname"><span class="pre">neuropy.cluster_analysis.</span></span><span class="sig-name descname"><span class="pre">tSNE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_components</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_fontsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">14</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_plot</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/cluster_analysis.html#tSNE"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.cluster_analysis.tSNE" title="Permalink to this definition"></a></dt>
<dd><p>Perform t-Distributed Stochastic Neighbor Embedding (t-SNE) Analysis
More info : <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.manifold.TSNE.html">https://scikit-learn.org/stable/modules/generated/sklearn.manifold.TSNE.html</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame</strong></dt><dd><p>Dataframe which contains some numerical feature</p>
</dd>
<dt><strong>n_components</strong><span class="classifier">int, optional (default: 2)</span></dt><dd><p>Dimension of the embedded space (2D or 3D).</p>
</dd>
<dt><strong>normalize</strong><span class="classifier">bool, optional (default: True)</span></dt><dd><p>Normalize data prior tSNE.</p>
</dd>
<dt><strong>hue: string, optional</strong></dt><dd><p>Grouping variable that will produce points with different colors.
Can be either categorical or numeric, although color mapping will behave
differently in latter case.</p>
</dd>
<dt><strong>tag: string, optional</strong></dt><dd><p>Tag each point with the value relative to the corresponding column (only 2D currently)</p>
</dd>
<dt><strong>label_fontsize: int, optional (default: 14)</strong></dt><dd><p>Font size for the <cite>tag</cite></p>
</dd>
<dt><strong>figsize: tuple (default: (11.7, 8.27))</strong></dt><dd><p>Width and height of the figure in inches</p>
</dd>
<dt><strong>generate_plot</strong><span class="classifier">bool, optional (default: False)</span></dt><dd><p>Save figure in .jpg format and store in working directory</p>
</dd>
<dt><strong>kwargs: key, value pairings</strong></dt><dd><p>Additional keyword arguments relative to tSNE() function. Additional info:
<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.manifold.TSNE.html">https://scikit-learn.org/stable/modules/generated/sklearn.manifold.TSNE.html</a></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>fig: matplotlib.pyplot.Figure</dt><dd><p>Graph with clusters in embedded space</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;mpg&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.cluster_analysis</span> <span class="kn">import</span> <span class="n">tSNE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span> <span class="o">=</span> <span class="n">tSNE</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n_components</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;origin&#39;</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">generate_plot</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-neuropy.config">
<span id="neuropy-config"></span><h1><code class="docutils literal notranslate"><span class="pre">neuropy.config</span></code><a class="headerlink" href="#module-neuropy.config" title="Permalink to this headline"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="neuropy.config.Config">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">neuropy.config.</span></span><span class="sig-name descname"><span class="pre">Config</span></span><a class="reference internal" href="_modules/neuropy/config.html#Config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.config.Config" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="neuropy.config.Config.get_aggregation_map">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_aggregation_map</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/config.html#Config.get_aggregation_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.config.Config.get_aggregation_map" title="Permalink to this definition"></a></dt>
<dd><p>Provide dict of aggregation used for health data</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neuropy.config.Config.get_composite_score_map">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_composite_score_map</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/config.html#Config.get_composite_score_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.config.Config.get_composite_score_map" title="Permalink to this definition"></a></dt>
<dd><p>Provide dict relative to composite score</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neuropy.config.Config.get_health_columns_map">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_health_columns_map</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/config.html#Config.get_health_columns_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.config.Config.get_health_columns_map" title="Permalink to this definition"></a></dt>
<dd><p>Provide map relative to health data</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neuropy.config.Config.get_health_core_columns">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_health_core_columns</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/config.html#Config.get_health_core_columns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.config.Config.get_health_core_columns" title="Permalink to this definition"></a></dt>
<dd><p>Provide metadata relative to health data</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neuropy.config.Config.get_health_feature_columns">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_health_feature_columns</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/config.html#Config.get_health_feature_columns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.config.Config.get_health_feature_columns" title="Permalink to this definition"></a></dt>
<dd><p>Provide list features relative to health data</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neuropy.config.Config.get_health_raw_columns">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_health_raw_columns</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/config.html#Config.get_health_raw_columns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.config.Config.get_health_raw_columns" title="Permalink to this definition"></a></dt>
<dd><p>Provide list of raw features relative to health data</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neuropy.config.Config.get_keystroke_meta_columns">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_keystroke_meta_columns</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/config.html#Config.get_keystroke_meta_columns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.config.Config.get_keystroke_meta_columns" title="Permalink to this definition"></a></dt>
<dd><p>Provide List of metadata relative to keystroke</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neuropy.config.Config.get_nested_health_columns_map">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_nested_health_columns_map</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/config.html#Config.get_nested_health_columns_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.config.Config.get_nested_health_columns_map" title="Permalink to this definition"></a></dt>
<dd><p>Provide dict of map relative to health data</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-neuropy.correlation">
<span id="neuropy-correlation"></span><h1><code class="docutils literal notranslate"><span class="pre">neuropy.correlation</span></code><a class="headerlink" href="#module-neuropy.correlation" title="Permalink to this headline"></a></h1>
<p>Submodule correlation.py includes the following functions: &lt;br&gt;
- <strong>correlation_analysis():</strong> Run correlations for numerical features and return output in different formats &lt;br&gt;
- <strong>plot_correlogram():</strong> Plot correlogram of numerical features. Rows with missing values are excluded &lt;br&gt;
- <strong>ancovan():</strong> An internal function compiled from the necessary parts of the pingouin.ancova() function &lt;br&gt;
- <strong>rm_correlation_analysis():</strong> Run a repeated measures correlation &lt;br&gt;
- <strong>correlations_as_sample_increases():</strong> Run correlations for subparts of the data to check robustness &lt;br&gt;</p>
<dl class="py function">
<dt class="sig sig-object py" id="neuropy.correlation.ancovan">
<span class="sig-prename descclassname"><span class="pre">neuropy.correlation.</span></span><span class="sig-name descname"><span class="pre">ancovan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">covar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">between</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">effsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'np2'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/correlation.html#ancovan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.correlation.ancovan" title="Permalink to this definition"></a></dt>
<dd><p>ANCOVA with n covariates.
This is an internal function. The main call to this function should be done
by the <a class="reference internal" href="#neuropy.correlation.rm_correlation_analysis" title="neuropy.correlation.rm_correlation_analysis"><code class="xref py py-func docutils literal notranslate"><span class="pre">neuropy.correlation.rm_correlation_analysis()</span></code></a> function.
ATTENTION: This function should not be called directly, please use the rm_correlation_analysis() function.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.correlation.correlation_analysis">
<span class="sig-prename descclassname"><span class="pre">neuropy.correlation.</span></span><span class="sig-name descname"><span class="pre">correlation_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_norm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'pearson'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dropna</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'pairwise'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">permutation_test</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_permutations</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_permutation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/correlation.html#correlation_analysis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.correlation.correlation_analysis" title="Permalink to this definition"></a></dt>
<dd><p>Run correlations for numerical features and return output in different formats</p>
<p>Different methods to compute correlations and to handle missing values are implemented.
Inspired by <cite>researchpy.corr_case</cite> and <cite>researchpy.corr_pair</cite>.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with variables in columns, cases in rows</p>
</dd>
<dt><strong>row_list: list or None (default: None)</strong></dt><dd><p>List with names of columns in <cite>data</cite> that should be in the rows of the correlogram.
If None, all columns are used but only every unique combination.</p>
</dd>
<dt><strong>col_list: list or None (default: None)</strong></dt><dd><p>List with names of columns in <cite>data</cite> that should be in the columns of the correlogram.
If None, all columns are used and only every unique combination.</p>
</dd>
<dt><strong>check_norm: bool (default: False)</strong></dt><dd><p>If True, normality will be checked for columns in <cite>data</cite> using <cite>normal_check</cite>. This influences the used method
for correlations, i.e. Pearson or Spearman. Note: normality check ignores missing values.</p>
</dd>
<dt><strong>method: {‘pearson’, ‘kendall’, ‘spearman’}, default ‘pearson’</strong></dt><dd><p>Type of correlation, either Pearson’s r, Spearman’s rho, or Kendall’s tau, implemented via respectively
<cite>scipy.stats.pearsonr</cite>, <cite>scipy.stats.spearmanr</cite>, and <cite>scipy.stats.kendalltau</cite>
Will be ignored if check_norm=True. Instead, Person’s r is used for every combination of normally distributed
columns and Spearman’s rho is used for all other combinations.</p>
</dd>
<dt><strong>dropna</strong><span class="classifier">{‘listwise’, ‘pairwise’}, default ‘pairwise’</span></dt><dd><p>Should rows with missing values be dropped over the complete <cite>data</cite> (‘listwise’) or for every correlation
separately (‘pairwise’)</p>
</dd>
<dt><strong>permutation_test: bool (default: False)</strong></dt><dd><p>If true, a permutation test will added</p>
</dd>
<dt><strong>n_permutations: int (default: 1000)</strong></dt><dd><p>Number of permutations in the permutation test</p>
</dd>
<dt><strong>random_state: None or int (default: None)</strong></dt><dd><p>Random state for permutation_test. If not None, random_state will be updated for every permutation</p>
</dd>
<dt><strong>plot_permutation: bool (default: False)</strong></dt><dd><p>Whether to plot the results of the permutation test</p>
</dd>
<dt><strong>figsize: tuple (default: (11.7, 8.27))</strong></dt><dd><p>Width and height of the figure in inches</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt>result_dict: dict</dt><dd><p>Dictionary containing with the following keys:
info : pandas.DataFrame</p>
<blockquote>
<div><p>Description of correlation method, missing values handling and number of observations</p>
</div></blockquote>
<dl class="simple">
<dt>r-values<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with correlation coefficients. Indices and columns are column names from <cite>data</cite>. Only lower
triangle is filled.</p>
</dd>
<dt>p-values<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with p-values. Indices and columns are column names from <cite>data</cite>. Only lower triangle is filled.</p>
</dd>
<dt>N<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with numbers of observations. Indices and columns are column names from <cite>data</cite>. Only lower
triangle is filled. If dropna =’listwise’, every correlation will have the same number of observations.</p>
</dd>
<dt>summary<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with columns [‘analysis’, ‘feature1’, ‘feature2’, ‘r-value’, ‘p-value’, ‘N’, ‘stat-sign’]
which indicate the type of test used for the correlation, the pair of columns, the correlation coefficient,
the p-value, the number of observations for each combination of columns in <cite>data</cite> and whether the r-value is
statistically significant.</p>
</dd>
</dl>
</dd>
<dt>plotted_permuations: Figure</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">References</p>
<p>Bryant, C (2018). researchpy’s documentation [Revision 9ae5ed63]. Retrieved from
<a class="reference external" href="https://researchpy.readthedocs.io/en/latest/">https://researchpy.readthedocs.io/en/latest/</a></p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.correlation</span> <span class="kn">import</span> <span class="n">correlation_analysis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iris</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s1">&#39;iris&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_results</span><span class="p">,</span> <span class="n">fig_permutations</span> <span class="o">=</span> <span class="n">correlation_analysis</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;pearson&#39;</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="s1">&#39;listwise&#39;</span><span class="p">,</span> <span class="n">permutation_test</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                       <span class="n">n_permutations</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">check_norm</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_results</span><span class="p">[</span><span class="s1">&#39;summary&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.correlation.correlations_as_sample_increases">
<span class="sig-prename descclassname"><span class="pre">neuropy.correlation.</span></span><span class="sig-name descname"><span class="pre">correlations_as_sample_increases</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starting_N</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pearson'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">42</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bootstrap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bootstrap_per_N</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addition_to_title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.05</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/correlation.html#correlations_as_sample_increases"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.correlation.correlations_as_sample_increases" title="Permalink to this definition"></a></dt>
<dd><p>Plot changes in r-value and p-value from correlation between two features when sample size increases.</p>
<p>Different methods to compute correlations are implemented. Data is shuffled first, to prevent any order effects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with variables in columns, cases in rows</p>
</dd>
<dt><strong>feature1: str</strong></dt><dd><p>Name of column with first feature to be included in correlation</p>
</dd>
<dt><strong>feature2: str</strong></dt><dd><p>Name of column with second feature to be included in correlation</p>
</dd>
<dt><strong>starting_N: int (default: 10)</strong></dt><dd><p>Number of cases that should be used for first correlation</p>
</dd>
<dt><strong>step: int (default: 1)</strong></dt><dd><p>Step for increasing the number of cases for the correlations</p>
</dd>
<dt><strong>method: {‘pearson’, ‘kendall’, ‘spearman’}, default ‘pearson’</strong></dt><dd><p>Type of correlation, either Pearson’s r, Spearman’s rho, or Kendall’s tau, implemented via respectively
<cite>scipy.stats.pearsonr</cite>, <cite>scipy.stats.spearmanr</cite>, and <cite>scipy.stats.kendalltau</cite>.</p>
</dd>
<dt><strong>random_state: int (default: 42)</strong></dt><dd><p>Random state for reordering the data</p>
</dd>
<dt><strong>bootstrap: bool</strong></dt><dd><p>Whether to bootstrap the data at each N</p>
</dd>
<dt><strong>bootstrap_per_N: int</strong></dt><dd><p>If bootstrap is True then how many bootstraps per each sample size should be performed i.e if bootstrap_per_N
is 2 then at sample size N=20, 2 bootstraps will be performed. This will continue until starting_N == N.</p>
</dd>
<dt><strong>plot: bool (default: True)</strong></dt><dd><p>Whether to plot the results</p>
</dd>
<dt><strong>addition_to_title: str (default: ‘’)</strong></dt><dd><p>The title of the plot will be “The absolute r-value between {feature1} and {feature2} as N increases” and
followed by the addition (e.g. to describe a dataset).</p>
</dd>
<dt><strong>alpha: float (default: 0.05)</strong></dt><dd><p>Threshold for p-value that should be shown in the plot</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>cor_results: pd.DataFrame</dt><dd><p>Dataframe with the results for all ran analyses</p>
</dd>
<dt>fig: Figure</dt><dd><p>Figure will be returned if plot=True, otherwise None. This allows you to change properties of the figure
afterwards, e.g. fig.axes[0].set_title(‘This is my new title’)</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.correlation</span> <span class="kn">import</span> <span class="n">correlations_as_sample_increases</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iris</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s1">&#39;iris&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span><span class="p">,</span>  <span class="n">fig</span> <span class="o">=</span> <span class="n">correlations_as_sample_increases</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">iris</span><span class="p">,</span><span class="n">feature1</span><span class="o">=</span><span class="s1">&#39;petal_width&#39;</span><span class="p">,</span><span class="n">feature2</span><span class="o">=</span><span class="s1">&#39;sepal_length&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">starting_N</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.correlation.plot_correlogram">
<span class="sig-prename descclassname"><span class="pre">neuropy.correlation.</span></span><span class="sig-name descname"><span class="pre">plot_correlogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data:</span> <span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_list=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_list=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_norm=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method='pearson'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dropna='pairwise'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margins=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">font_scale=1.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_p=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap=&lt;matplotlib.colors.LinearSegmentedColormap</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize=(15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">15)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/correlation.html#plot_correlogram"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.correlation.plot_correlogram" title="Permalink to this definition"></a></dt>
<dd><p>Plot correlogram of numerical features. Rows with missing values are excluded.
Different methods to compute correlations are implemented.
Parameters
———-
data : pandas.DataFrame</p>
<blockquote>
<div><p>Dataframe with variables in columns, cases in rows</p>
</div></blockquote>
<dl class="simple">
<dt>row_list: list or None (default: None)</dt><dd><p>List with names of columns in <cite>data</cite> that should be in the rows of the correlogram.
If None, all columns are used and only the lower half of the correlogram will be filled.</p>
</dd>
<dt>col_list: list or None (default: None)</dt><dd><p>List with names of columns in <cite>data</cite> that should be in the columns of the correlogram.
If None, all columns are used and only the lower half of the correlogram will be filled.</p>
</dd>
<dt>check_norm: bool (default: False)</dt><dd><p>If True, normality will be checked for columns in <cite>data</cite> using <cite>normal_check</cite>. This influences the used method
for correlations, <cite>method</cite> will be ignored. Note: normality check ignores missing values.</p>
</dd>
<dt>method: {‘pearson’, ‘kendall’, ‘spearman’}, default ‘pearson’</dt><dd><p>Type of correlation, either Pearson’s r, Spearman’s rho, or Kendall’s tau, implemented via respectively
<cite>scipy.stats.pearsonr</cite>, <cite>scipy.stats.spearmanr</cite>, and <cite>scipy.stats.kendalltau</cite>. Ignored if check_norm is True.</p>
</dd>
<dt>dropna<span class="classifier">{‘listwise’, ‘pairwise’}, default ‘pairwise’</span></dt><dd><p>Should rows with missing values be dropped over the complete <cite>data</cite> (‘listwise’) or for every correlation
separately (‘pairwise’)</p>
</dd>
<dt>margins: dict or ‘jupyter’ or None (default: None)</dt><dd><p>Margins for the correlogram. Any of them that are None are referred from <cite>matplotlib.pyplot.subplots_adjust</cite>
If ‘jupyter’, default values are {‘left’: None, ‘bottom’: 1, ‘right’: None, ‘top’: 2}.</p>
</dd>
<dt>font_scale: float</dt><dd><p>Size of the labels in the correlogram.</p>
</dd>
<dt>show_p: bool (default: True)</dt><dd><p>Place crosses when correlation is not significant (i.e. p-value higher than 0.05).</p>
</dd>
<dt>cmap: colormap (either seaborn or matplotlib)</dt><dd><p>A continuous colormap either from seaborn or matplotlib which will be used to define the extremes in the
correlogram. For more information see: <a class="reference external" href="https://seaborn.pydata.org/tutorial/color_palettes.html">https://seaborn.pydata.org/tutorial/color_palettes.html</a></p>
</dd>
<dt>figsize: tuple (default: (15, 15))</dt><dd><p>Width and height of the figure in inches.</p>
</dd>
</dl>
<dl class="simple">
<dt>corplot: Figure</dt><dd><p>Graph with <cite>seaborn.heatmap</cite> of the correlations (lower triangle only)</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">iris</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s1">&#39;iris&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">plot_correlogram</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;pearson&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.correlation.plot_rm_correlation">
<span class="sig-prename descclassname"><span class="pre">neuropy.correlation.</span></span><span class="sig-name descname"><span class="pre">plot_rm_correlation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subject_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'user_id'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs_facetgrid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'aspect':</span> <span class="pre">1,</span> <span class="pre">'height':</span> <span class="pre">6,</span> <span class="pre">'palette':</span> <span class="pre">'Paired'}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/correlation.html#plot_rm_correlation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.correlation.plot_rm_correlation" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>df: pandas.DataFrame</strong></dt><dd><p>Dataframe with variables in columns, cases in rows</p>
</dd>
<dt><strong>feature, target</strong><span class="classifier">str</span></dt><dd><p>Name of columns in <cite>df</cite> containing the two dependent variables.</p>
</dd>
<dt><strong>subject_column: str</strong></dt><dd><p>Name of column in <cite>df</cite> containing the subject indicator.</p>
</dd>
<dt><strong>legend</strong><span class="classifier">boolean (default=True)</span></dt><dd><p>If True, add legend to plot. Legend will show all the unique values in
<code class="docutils literal notranslate"><span class="pre">subject</span></code>.</p>
</dd>
<dt><strong>kwargs_facetgrid</strong><span class="classifier">dict</span></dt><dd><p>Optional keyword argument passed to <code class="xref py py-class docutils literal notranslate"><span class="pre">seaborn.FacetGrid</span></code></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>g</strong><span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">seaborn.FacetGrid</span></code></span></dt><dd><p>Seaborn FacetGrid.</p>
</dd>
<dt><strong>test_data</strong><span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></span></dt><dd><p>A pandas DataFrame including the initial data with a predicted outcomes column appended.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#neuropy.correlation.rm_correlation_analysis" title="neuropy.correlation.rm_correlation_analysis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rm_correlation_analysis</span></code></a></dt><dd></dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>Repeated measures correlation (rmcorr) is a statistical technique
for determining the common within-individual association for paired
measures assessed on two or more occasions for multiple individuals.</p>
<p>Results have been tested against the <cite>rmcorr</cite> R package. Note that this
function requires the statsmodels Python package.</p>
<p>Missing values are automatically removed from the <code class="docutils literal notranslate"><span class="pre">data</span></code>
(listwise deletion).</p>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="rf112b472ea12-1"><span class="brackets">1</span></dt>
<dd><p>Bakdash, J.Z., Marusich, L.R., 2017. Repeated Measures Correlation.
Front. Psychol. 8, 456. <a class="reference external" href="https://doi.org/10.3389/fpsyg.2017.00456">https://doi.org/10.3389/fpsyg.2017.00456</a></p>
</dd>
<dt class="label" id="rf112b472ea12-2"><span class="brackets">2</span></dt>
<dd><p>Bland, J. M., &amp; Altman, D. G. (1995). Statistics notes: Calculating
correlation coefficients with repeated observations:
Part 1—correlation within subjects. Bmj, 310(6977), 446.</p>
</dd>
<dt class="label" id="rf112b472ea12-3"><span class="brackets">3</span></dt>
<dd><p><a class="reference external" href="https://github.com/cran/rmcorr">https://github.com/cran/rmcorr</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.correlation</span> <span class="kn">import</span> <span class="n">plot_rm_correlation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;mpg&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;origin&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">codes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># convert the country of origin to integer as the rm_correlation functions expect all inputs to be numeric</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="p">,</span> <span class="n">rm_corr_df</span> <span class="o">=</span> <span class="n">plot_rm_correlation</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                   <span class="n">feature</span><span class="o">=</span><span class="s1">&#39;mpg&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                   <span class="n">target</span><span class="o">=</span><span class="s1">&#39;horsepower&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                   <span class="n">subject_column</span><span class="o">=</span><span class="s1">&#39;origin&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="n">kwargs_facetgrid</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;height&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;aspect&#39;</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span> <span class="s1">&#39;palette&#39;</span><span class="p">:</span> <span class="s1">&#39;Paired&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span>                  <span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.correlation.rm_correlation_analysis">
<span class="sig-prename descclassname"><span class="pre">neuropy.correlation.</span></span><span class="sig-name descname"><span class="pre">rm_correlation_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subject_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'user_id'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dropna</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'pairwise'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/correlation.html#rm_correlation_analysis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.correlation.rm_correlation_analysis" title="Permalink to this definition"></a></dt>
<dd><p>Run a repeated measure correlation for numerical features and return output in different formats</p>
<p>Repeated measures correlation (rmcorr) is a statistical technique for determining the common
within-individual association for paired measures assessed on two or more occasions for multiple individuals.
Inspired by <cite>pinqoun.rm_corr</cite>.</p>
<p>Rmcorr can be viewed as a “light” version of multilevel modeling because it is comparable to a simple,
null multilevel model with random/varying effects of intercept for each individual and a fixed effect
(i.e., common/overall) slope. However, rmcorr only analyzes intra-individual variance. Multilevel modeling</p>
<blockquote>
<div><p>can simultaneously analyze both intra- and inter-individual variance using partial pooling, which permits
varying slopes and other parameters that cannot be estimated with simpler techniques.</p>
</div></blockquote>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>df: pandas.DataFrame</strong></dt><dd><p>Dataframe with variables in columns, cases in rows</p>
</dd>
<dt><strong>feature_list: list or None (default: None)</strong></dt><dd><p>List with names of columns in <cite>df</cite> that represent keystroke dynamic features.
If None, all numerical columns are used but only every unique combination.</p>
</dd>
<dt><strong>target_list: list or None (default: None)</strong></dt><dd><p>List with names of columns in <cite>df</cite> that represent endpoints or clinical measures.
If None, all columns are used and only every unique combination.</p>
</dd>
<dt><strong>subject_column: str (default: ‘user_id’)</strong></dt><dd><p>Name of column in <cite>df</cite> containing the subject indicator.</p>
</dd>
<dt><strong>dropna</strong><span class="classifier">{‘listwise’, ‘pairwise’}, default ‘pairwise’</span></dt><dd><p>Should rows with missing values be dropped over the complete <cite>df</cite> (‘listwise’) or for every correlation
separately (‘pairwise’)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt>result_dict: dict</dt><dd><p>Dictionary containing with the following keys:
info : pandas.DataFrame</p>
<blockquote>
<div><p>Description of correlation method, missing values handling and number of observations</p>
</div></blockquote>
<dl class="simple">
<dt>r-values<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with rm correlation coefficients. Indices and columns are column names from <cite>data</cite>. Only lower
triangle is filled.</p>
</dd>
<dt>p-values<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with p-values. Indices and columns are column names from <cite>data</cite>. Only lower triangle is filled.</p>
</dd>
<dt>N<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with numbers of observations. Indices and columns are column names from <cite>data</cite>. Only lower
triangle is filled. If dropna =’listwise’, every correlation will have the same number of observations.</p>
</dd>
<dt>summary<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with columns [‘analysis’, ‘feature1’, ‘feature2’, ‘r-value’, ‘p-value’, ‘N’, ‘stat-sign’]
which indicate the type of test used for the correlation, the pair of columns, the correlation coefficient,
the p-value, the number of observations for each combination of columns in <cite>data</cite> and whether the r-value is
statistically significant.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">References</p>
<p>Bakdash, J.Z., Marusich, L.R., 2017. Repeated Measures Correlation. Front. Psychol. 8, 456.
<a class="reference external" href="https://doi.org/10.3389/fpsyg.2017.00456">https://doi.org/10.3389/fpsyg.2017.00456</a></p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.correlation</span> <span class="kn">import</span> <span class="n">rm_correlation_analysis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;mpg&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;origin&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">codes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># convert the country of origin to integer as the rm_correlation functions expect all inputs to be numeric</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_results</span> <span class="o">=</span> <span class="n">rm_correlation_analysis</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">feature_list</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;mpg&#39;</span><span class="p">],</span> <span class="n">target_list</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;horsepower&#39;</span><span class="p">],</span> <span class="n">subject_column</span><span class="o">=</span><span class="s1">&#39;origin&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_results</span><span class="p">[</span><span class="s1">&#39;summary&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-neuropy.dimensionality_reduction">
<span id="neuropy-dimensionality-reduction"></span><h1><code class="docutils literal notranslate"><span class="pre">neuropy.dimensionality_reduction</span></code><a class="headerlink" href="#module-neuropy.dimensionality_reduction" title="Permalink to this headline"></a></h1>
<p>Submodule dimensionality_reduction.py includes the following functions:
- <strong>variance_threshold():</strong> Perform dimensionality reduction using variance threshold &lt;br&gt;
- <strong>missing_value_threshold():</strong> Perform dimensionality reduction using missing value threshold &lt;br&gt;
- <strong>nullity_sort():</strong> Sorts the data frame based on it’s nullity &lt;br&gt;
- <strong>nullity_filter():</strong> Filters the data frame based on it’s nullity &lt;br&gt;
- <strong>msno_matrix():</strong> A matrix visualization of the nullity of the given DataFrame &lt;br&gt;
- <strong>chisquare_threshold():</strong> Perform dimensionality reduction using chisquare &lt;br&gt;
- <strong>high_correlation_threshold():</strong> Perform dimensionality reduction by removing highly correlated features &lt;br&gt;
- <strong>robust_rfecv():</strong> Run Recursive Feature Elimination (RFE) using multiple Machine learning models &lt;br&gt;</p>
<dl class="py function">
<dt class="sig sig-object py" id="neuropy.dimensionality_reduction.chisquare_threshold">
<span class="sig-prename descclassname"><span class="pre">neuropy.dimensionality_reduction.</span></span><span class="sig-name descname"><span class="pre">chisquare_threshold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/dimensionality_reduction.html#chisquare_threshold"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.dimensionality_reduction.chisquare_threshold" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>Perform dimensionality reduction using chisquare. The method considers is applied only to categorical features.</dt><dd><p>the target variable y need to either either categical or integer type. Rows with any missing values will be discarded.</p>
</dd>
</dl>
<dl class="simple">
<dt>data: pandas.DataFrame</dt><dd><p>Dataframe with variables in columns, cases in rows</p>
</dd>
<dt>threshold: float (default: 0.05)</dt><dd><p>p-value threshold which is used to assess which feature to discard</p>
</dd>
<dt>show: bool (default: False)</dt><dd><p>whether to show the summary</p>
</dd>
<dt>plot: bool (default: False)</dt><dd><p>whether to plot the bar plot with normalized features</p>
</dd>
<dt>figsize: tuple (default: (11.7, 8.27))</dt><dd><p>Width and height of the figure in inches</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>summary: pandas.DataFrame</dt><dd><p>Dataframe containing a feature selection summary:
[normalized-variance feature-type  variance-threshold  to-discard]</p>
</dd>
<dt>barplot: Figure</dt><dd><p>A figure is returned if plot == True, else None</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;titanic&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;survived&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;survived&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">chisquare_threshold</span><span class="p">(</span><span class="n">X</span> <span class="o">=</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">show</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.dimensionality_reduction.high_correlation_threshold">
<span class="sig-prename descclassname"><span class="pre">neuropy.dimensionality_reduction.</span></span><span class="sig-name descname"><span class="pre">high_correlation_threshold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_norm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'pearson'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/dimensionality_reduction.html#high_correlation_threshold"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.dimensionality_reduction.high_correlation_threshold" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>Perform dimensionality reduction using correlation. The method will consider highly correlated features and will</dt><dd><p>add features with a lower correlation with the target variable y to a discard list. This method uses the
<cite>correlation_analysis</cite> function from neuropy.correlation.</p>
</dd>
</dl>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pd.DataFrame</strong></dt><dd><p>Includes the features.</p>
</dd>
<dt><strong>target: str or List[str]</strong></dt><dd><p>Target variable, in case of multioutput problem insert a list of targets.</p>
</dd>
<dt><strong>threshold: float (default: 0.8)</strong></dt><dd><p>The threshold value for the r-value, only r-values exceeding the threshold will be considered.</p>
</dd>
<dt><strong>check_norm: bool (default: False)</strong></dt><dd><p>If True, normality will be checked for columns in <cite>data</cite> using <cite>normal_check</cite>. This influences the used method
for correlations, i.e. Pearson or Spearman. Note: normality check ignores missing values.</p>
</dd>
<dt><strong>method: {‘pearson’, ‘kendall’, ‘spearman’}, default ‘pearson’</strong></dt><dd><p>Type of correlation, either Pearson’s r, Spearman’s rho, or Kendall’s tau, implemented via respectively
<cite>scipy.stats.pearsonr</cite>, <cite>scipy.stats.spearmanr</cite>, and <cite>scipy.stats.kendalltau</cite>. Ignored if check_norm is True.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df_summary: pd.Dataframe</dt><dd><p>Summary dataframe with correlation analysis results and dimensionality reduction results. The correlation with
the target(s) is/are absolute and thus do not denote directionality.</p>
</dd>
<dt>to_discard_corr_list: List</dt><dd><dl class="simple">
<dt>List of all features to discard. This list can be passed as an argument to:</dt><dd><p>e.g. df.drop(columns=to_discard_corr_list)</p>
</dd>
</dl>
</dd>
<dt>Examples</dt><dd></dd>
</dl>
<blockquote>
<div></div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.dimensionality_reduction</span> <span class="kn">import</span> <span class="n">high_correlation_threshold</span>
<span class="go">    ..</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">datasets</span>
<span class="go">    ..</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="go">    ..</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">boston_data</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">load_boston</span><span class="p">()</span>
<span class="go">    ..</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df_boston</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">boston_data</span><span class="o">.</span><span class="n">data</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">boston_data</span><span class="o">.</span><span class="n">feature_names</span><span class="p">)</span>
<span class="go">    ..</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df_boston</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">boston_data</span><span class="o">.</span><span class="n">target</span><span class="p">)</span>
<span class="go">    ..</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df_summary</span><span class="p">,</span> <span class="n">to_discard_corr_list</span> <span class="o">=</span> <span class="n">high_correlation_threshold</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_boston</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;target&#39;</span><span class="p">)</span>
<span class="go">    ..</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.dimensionality_reduction.missing_value_threshold">
<span class="sig-prename descclassname"><span class="pre">neuropy.dimensionality_reduction.</span></span><span class="sig-name descname"><span class="pre">missing_value_threshold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(25,</span> <span class="pre">10)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/dimensionality_reduction.html#missing_value_threshold"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.dimensionality_reduction.missing_value_threshold" title="Permalink to this definition"></a></dt>
<dd><p>Perform dimensionality reduction using missing value threshold.
The method considers both numerical and categorical features.
———-
data: pandas.DataFrame</p>
<blockquote>
<div><p>Dataframe with variables in columns, cases in rows</p>
</div></blockquote>
<dl class="simple">
<dt>threshold: float (default: 5)</dt><dd><p>Features with a higher missing value percentage than threshold will be flagged</p>
</dd>
<dt>show: bool (default: False)</dt><dd><p>whether to show the summary</p>
</dd>
<dt>plot: bool (default: False)</dt><dd><p>whether to plot the heatmap with missing values</p>
</dd>
<dt>figsize: tuple (default: (25, 10))</dt><dd><p>Width and height of the figure in inches</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>summary: pandas.DataFrame</dt><dd><p>Dataframe containing a feature selection summary:
[‘feature-type’, ‘missing-value %’, ‘missing-threshold %’, ‘to-discard’]</p>
</dd>
<dt>missplot: Figure</dt><dd><p>A figure is returned if plot == True, else None</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.dimensionality_reduction</span> <span class="kn">import</span> <span class="n">missing_value_threshold</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">titanic</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;titanic&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">missing_value_threshold</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">titanic</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.dimensionality_reduction.msno_matrix">
<span class="sig-prename descclassname"><span class="pre">neuropy.dimensionality_reduction.</span></span><span class="sig-name descname"><span class="pre">msno_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(25,</span> <span class="pre">10)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width_ratios</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.25,</span> <span class="pre">0.25,</span> <span class="pre">0.25)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fontsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sparkline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/dimensionality_reduction.html#msno_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.dimensionality_reduction.msno_matrix" title="Permalink to this definition"></a></dt>
<dd><p>A matrix visualization of the nullity of the given DataFrame. COPIED from missingo package
:param df: The <cite>DataFrame</cite> being mapped.
:param filter: The filter to apply to the heatmap. Should be one of “top”, “bottom”, or None (default).
:param n: The max number of columns to include in the filtered DataFrame.
:param p: The max percentage fill of the columns in the filtered DataFrame.
:param sort: The row sort order to apply. Can be “ascending”, “descending”, or None.
:param figsize: The size of the figure to display.
:param fontsize: The figure’s font size. Default to 16.
:param labels: Whether or not to display the column names. Defaults to the underlying data labels when there are
50 columns or less, and no labels when there are more than 50 columns.
:param sparkline: Whether or not to display the sparkline. Defaults to True.
:param width_ratios: The ratio of the width of the matrix to the width of the sparkline. Defaults to <cite>(15, 1)</cite>.
Does nothing if <cite>sparkline=False</cite>.
:param color: The color of the filled columns. Default is <cite>(0.25, 0.25, 0.25)</cite>.
:return: If <cite>inline</cite> is False, the underlying <cite>matplotlib.figure</cite> object. Else, nothing.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.dimensionality_reduction.nullity_filter">
<span class="sig-prename descclassname"><span class="pre">neuropy.dimensionality_reduction.</span></span><span class="sig-name descname"><span class="pre">nullity_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/dimensionality_reduction.html#nullity_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.dimensionality_reduction.nullity_filter" title="Permalink to this definition"></a></dt>
<dd><p>COPIED FROM MISSINGNO
Filters a DataFrame according to its nullity, using some combination of ‘top’ and ‘bottom’ numerical and
percentage values. Percentages and numerical thresholds can be specified simultaneously: for example,
to get a DataFrame with columns of at least 75% completeness but with no more than 5 columns, use
<cite>nullity_filter(df, filter=’top’, p=.75, n=5)</cite>.
:param df: The DataFrame whose columns are being filtered.
:param filter: The orientation of the filter being applied to the DataFrame. One of, “top”, “bottom”,
or None (default). The filter will simply return the DataFrame if you leave the filter argument unspecified or
as None.
:param p: A completeness ratio cut-off. If non-zero the filter will limit the DataFrame to columns with at least p
completeness. Input should be in the range [0, 1].
:param n: A numerical cut-off. If non-zero no more than this number of columns will be returned.
:return: The nullity-filtered <cite>DataFrame</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.dimensionality_reduction.nullity_sort">
<span class="sig-prename descclassname"><span class="pre">neuropy.dimensionality_reduction.</span></span><span class="sig-name descname"><span class="pre">nullity_sort</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'columns'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/dimensionality_reduction.html#nullity_sort"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.dimensionality_reduction.nullity_sort" title="Permalink to this definition"></a></dt>
<dd><p>COPIED FROM MISSINGNO
Sorts a DataFrame according to its nullity, in either ascending or descending order.
:param df: The DataFrame object being sorted.
:param sort: The sorting method: either “ascending”, “descending”, or None (default).
:return: The nullity-sorted DataFrame.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.dimensionality_reduction.robust_rfecv">
<span class="sig-prename descclassname"><span class="pre">neuropy.dimensionality_reduction.</span></span><span class="sig-name descname"><span class="pre">robust_rfecv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">KFold(n_splits=3,</span> <span class="pre">random_state=None,</span> <span class="pre">shuffle=False)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scoring</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preprocessing_pipe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">njobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">4</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/dimensionality_reduction.html#robust_rfecv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.dimensionality_reduction.robust_rfecv" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>Run Recursive Feature Elimination (RFE) using multiple Machine learning models.</dt><dd><p>The function is suitable for both classification and regression problem.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>X: pd.DataFrame</strong></dt><dd><p>Contains training vectors.</p>
</dd>
<dt><strong>y: pd.Series</strong></dt><dd><p>Target values.</p>
</dd>
<dt><strong>model_list: List</strong></dt><dd><p>Estimators that have either coef. or feature importance. object.</p>
</dd>
<dt><strong>step: int, optional (default=1)</strong></dt><dd><p>It refers to the (integer) number of features to remove at each iteration.</p>
</dd>
<dt><strong>cv: cross-validation generator (default: KFold(3))</strong></dt><dd><p>Determines the cross-validation splitting strategy.
For more details see <a class="reference external" href="https://scikit-learn.org/stable/modules/cross_validation.html">https://scikit-learn.org/stable/modules/cross_validation.html</a></p>
</dd>
<dt><strong>scoring: string, callable or None, optional</strong></dt><dd><p>A string or a scorer callable object / function with signature.
For more details see <a class="reference external" href="https://scikit-learn.org/stable/modules/model_evaluation.html">https://scikit-learn.org/stable/modules/model_evaluation.html</a></p>
</dd>
<dt><strong>preprocessing_pipe: Pipeline object, or Nones</strong></dt><dd><p>Preprocessing steps needed before the estimator (e.g. StandardScaler)</p>
</dd>
<dt><strong>groups: pd.Series, or Nones</strong></dt><dd><p>Group labels for the samples used while splitting the dataset into train/test set.
Only used in conjunction with a “Group” cv instance (e.g., GroupKFold).
For more details see <a class="reference external" href="https://scikit-learn.org/stable/modules/cross_validation.html">https://scikit-learn.org/stable/modules/cross_validation.html</a>
section 3.1.2.2. Cross-validation iterators with stratification based on class labels</p>
</dd>
<dt><strong>show: Boolean</strong></dt><dd><p>Whether to print the results.</p>
</dd>
<dt><strong>plot: Boolean</strong></dt><dd><p>Whether to plot the rfe summary plot.</p>
</dd>
<dt><strong>njobs: int</strong></dt><dd><p>The amount of cores to use when running the RFECV worker function.</p>
</dd>
<dt><strong>kwargs: key, value pairings</strong></dt><dd><dl class="simple">
<dt>Additional keyword arguments for plot setting matplotlib style. Available setting:</dt><dd><p>figsize  : tuple (default: (7, 5))
textsize : int (default: 15) adjust size for xticks label, title and legend
xlim : tuple. Set the x limits of the current axes.
ylim : tuple. Set the y limits of the current axes.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df_summary: pd.DataFrame</dt><dd><p>Dataframe which show they number of optimal feature, score value and score type e.g., r2, auc.</p>
</dd>
<dt>df_feature:</dt><dd><p>DataFrame containing the selected features for each ML model and the corresponding intersection</p>
</dd>
<dt>fig: matplotlib.figure.Figure</dt><dd><p>matplotlib object</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_breast_cancer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.discriminant_analysis</span> <span class="kn">import</span> <span class="n">LinearDiscriminantAnalysis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.dimensionality_reduction</span> <span class="kn">import</span> <span class="n">robust_rfecv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span><span class="p">,</span> <span class="n">AdaBoostClassifier</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">Pipeline</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.impute</span> <span class="kn">import</span> <span class="n">SimpleImputer</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># load dataset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cancer</span> <span class="o">=</span> <span class="n">load_breast_cancer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">cancer</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">],</span> <span class="n">cancer</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]],</span> <span class="n">columns</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cancer</span><span class="p">[</span><span class="s1">&#39;feature_names&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># prepare pipeline and classifies</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([</span>
<span class="gp">... </span>   <span class="p">(</span><span class="s1">&#39;inputer&#39;</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;median&#39;</span><span class="p">)),</span>
<span class="gp">... </span>   <span class="p">(</span><span class="s1">&#39;scaler&#39;</span><span class="p">,</span> <span class="n">StandardScaler</span><span class="p">())</span>
<span class="gp">... </span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clf</span> <span class="o">=</span> <span class="p">[</span><span class="n">AdaBoostClassifier</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">20</span><span class="p">),</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">max_depth</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span> <span class="n">LinearDiscriminantAnalysis</span><span class="p">()]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df_summary</span><span class="p">,</span> <span class="n">df_feature</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">robust_rfecv</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">model_list</span><span class="o">=</span><span class="n">clf</span><span class="p">,</span> <span class="n">preprocessing_pipe</span><span class="o">=</span><span class="n">pipe</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s1">&#39;roc_auc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.dimensionality_reduction.variance_threshold">
<span class="sig-prename descclassname"><span class="pre">neuropy.dimensionality_reduction.</span></span><span class="sig-name descname"><span class="pre">variance_threshold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/dimensionality_reduction.html#variance_threshold"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.dimensionality_reduction.variance_threshold" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>Perform dimensionality reduction using variance threshold. The method considers numerical features only.</dt><dd><p>Rows with any missing values will be discarded.</p>
</dd>
</dl>
<dl class="simple">
<dt>data: pandas.DataFrame</dt><dd><p>Dataframe with variables in columns, cases in rows</p>
</dd>
<dt>threshold: float (default: 0.001)</dt><dd><p>Features with a variance lower than threshold will be flagged.</p>
</dd>
<dt>show: bool (default: False)</dt><dd><p>whether to show the summary</p>
</dd>
<dt>plot: bool (default: False)</dt><dd><p>whether to plot the box plot with normalized features</p>
</dd>
<dt>figsize: tuple (default: (11.7, 8.27))</dt><dd><p>Width and height of the figure in inches</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>summary: pandas.DataFrame</dt><dd><p>Dataframe containing a feature selection summary:
[normalized-variance feature-type  variance-threshold  to-discard]</p>
</dd>
<dt>boxplot: Figure</dt><dd><p>Properties of the gigure can be changed later, e.g. boxplot.axes[0].set_ylim(0,10) to change the limits. If
plot == False, boxplot will be None.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.dimensionality_reduction</span> <span class="kn">import</span> <span class="n">variance_threshold</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;titanic&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">variance_threshold</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">threshold</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">show</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-neuropy.frequency_domain">
<span id="neuropy-frequency-domain"></span><h1><code class="docutils literal notranslate"><span class="pre">neuropy.frequency_domain</span></code><a class="headerlink" href="#module-neuropy.frequency_domain" title="Permalink to this headline"></a></h1>
<p>Submodule frequency_domain.py includes the following functions: &lt;br&gt;
- <strong>frequency_analysis():</strong> Compute Fast Fourier Transform on a time series &lt;br&gt;</p>
<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequency_domain.frequency_analysis">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequency_domain.</span></span><span class="sig-name descname"><span class="pre">frequency_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pandas.core.frame.DataFrame</span></span></span><a class="reference internal" href="_modules/neuropy/frequency_domain.html#frequency_analysis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequency_domain.frequency_analysis" title="Permalink to this definition"></a></dt>
<dd><p>Compute Fast Fourier Transform on a time series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame</strong></dt><dd><p>Dataframe which contains some numerical feature</p>
</dd>
<dt><strong>fs: int</strong></dt><dd><p>sample frequency of the signal in Hertz [Hz].</p>
</dd>
<dt><strong>plot: bool, optional (default: True)</strong></dt><dd><p>plot fourier analysis</p>
</dd>
<dt><strong>kwargs:</strong></dt><dd><dl class="simple">
<dt>Additional keyword arguments for plot setting matplolib style. Available setting:</dt><dd><p>{“title”: str, “xlim”: tuple, “ylim”: tuple, “grid”: bool}.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>data_fourier: pandas.DataFrame</dt><dd><p>Dataframe containing the Fourier transformed signals.</p>
</dd>
<dt>fig: matplotlib.pyplot.Figure</dt><dd><p>Figure is returned if plot == True, else None.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.frequency_domain</span> <span class="kn">import</span> <span class="n">frequency_analysis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># fs: sample rate | f: signal frequency | Toss: observation time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">Toss</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Toss</span><span class="p">,</span> <span class="n">Toss</span> <span class="o">*</span> <span class="n">fs</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># generate a signal with 2 harmonics</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x_sine</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">f</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="n">f</span><span class="p">)</span><span class="o">*</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_time</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x_sine&#39;</span><span class="p">:</span> <span class="n">x_sine</span><span class="p">},</span>
<span class="gp">... </span>                         <span class="n">index</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;figsize&quot;</span><span class="p">:(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span>
<span class="gp">... </span>             <span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;Fourier Analysis&quot;</span><span class="p">,</span>
<span class="gp">... </span>             <span class="s2">&quot;ylim&quot;</span><span class="p">:(</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.6</span><span class="p">),</span>
<span class="gp">... </span>             <span class="s2">&quot;xlim&quot;</span><span class="p">:(</span><span class="mi">0</span><span class="p">,</span><span class="mi">16</span><span class="p">),</span>
<span class="gp">... </span>             <span class="s2">&quot;grid&quot;</span><span class="p">:</span><span class="kc">True</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_fourier</span><span class="p">,</span> <span class="n">fig</span> <span class="o">=</span> <span class="n">frequency_analysis</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">data_time</span><span class="p">,</span>
<span class="gp">... </span>                                       <span class="n">fs</span><span class="o">=</span><span class="n">fs</span><span class="p">,</span>
<span class="gp">... </span>                                       <span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                                       <span class="o">**</span><span class="n">plot_kwargs</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-neuropy.frequentist_statistics">
<span id="neuropy-frequentist-statistics"></span><h1><code class="docutils literal notranslate"><span class="pre">neuropy.frequentist_statistics</span></code><a class="headerlink" href="#module-neuropy.frequentist_statistics" title="Permalink to this headline"></a></h1>
<p>Submodule frequentist_statistics.py includes the following functions: &lt;br&gt;
- <strong>chisquare():</strong> Run chi-square test using <cite>stats.chi2_contingency</cite> &lt;br&gt;
- <strong>permutation_plot():</strong> Show the result of the permutations &lt;br&gt;
- <strong>permute_test():</strong> Helper function to run tests for permutations &lt;br&gt;
- <strong>dependent_t_test():</strong> Run paired sample t-tests including assumptions using <cite>scipy.stats.ttest_rel</cite> &lt;br&gt;
- <strong>analysis_dependent_t_test():</strong> Run <cite>dependent_t_test</cite> for all combinations of features &lt;br&gt;
- <strong>independent_t_test():</strong> Run independent sample t-tests including assumptions using <cite>scipy.stats.levene</cite> and</p>
<blockquote>
<div><p><cite>statsmodels.stats.weightstats.ttest_ind</cite> &lt;br&gt;</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>analysis_independent_t_test():</strong> Run <cite>independent_t_test</cite> for all combinations of features &lt;br&gt;</p></li>
<li><p><strong>dependent_wilcoxon_test():</strong> Run paired sample Wilcoxon test using <cite>scipy.stats.wilcoxon</cite> &lt;br&gt;</p></li>
<li><p><strong>analysis_dependent_wilcoxon_test():</strong> Run <cite>dependent_wilcoxon_test</cite> for all combinations of features &lt;br&gt;</p></li>
<li><p><strong>independent_mannwhitneyu_test():</strong> Run independent Mann-Whitney U test using <cite>scipy.stats.mannwhitneyu</cite> &lt;br&gt;</p></li>
<li><p><strong>analysis_independent_mannwhitneyu_test():</strong> Run <cite>independent_mannwhitneyu_test</cite> for all features &lt;br&gt;</p></li>
<li><p><strong>one_way_ANOVA():</strong> Run one-way ANOVAs using <cite>scipy.stats.f_oneway</cite> and check homogeneity of variances with Levenes
test using <cite>scipy.stats.levene</cite> &lt;br&gt;</p></li>
<li><p><strong>mapping_dist_mean_median():</strong> Adds line and text relative to moments of distribution to densityplots using
<cite>seaborn.distplots</cite> &lt;br&gt;</p></li>
<li><p><strong>plot_distribution():</strong> Plot distributions relative to numerical (ungrouped) features &lt;br&gt;</p></li>
<li><p><strong>ecdf():</strong> Computes empirical cumulative distribution function for a one-dimensional array of measurements &lt;br&gt;</p></li>
<li><p><strong>mapping_ecdf():</strong> Adds empirical and theoretical distribution of the data &lt;br&gt;</p></li>
<li><p><strong>compare_theoretical_ecdf():</strong> compare empirical distribution to the theoretical distribution based on mean and
standard deviation &lt;br&gt;</p></li>
<li><p><strong>normal_check():</strong> compare the distribution of numeric variables to a normal distribution using the Kolmogrov-Smirnov
test &lt;br&gt;</p></li>
<li><p><strong>apply_power_transformations():</strong> transform data with log transformations and Box-cox transformations &lt;br&gt;</p></li>
<li><p><strong>find_optimal_transformation():</strong> choose the best transformation based on the results of <cite>normal_check</cite> after
<cite>apply_power_transformations</cite> &lt;br&gt;</p></li>
<li><p><strong>ols():</strong> run a linear regression model with ordinary least squares (OLS) estimation &lt;br&gt;</p></li>
<li><p><strong>diagnostic_plots():</strong> function to reproduce the 4 diagnostic plots of an OLS model in R. Currently, fitted linear</p></li>
</ul>
<p>regression models/ mixed linear models from pymer4, statsmodels, and sklearn are accepted. &lt;br&gt;
- <strong>correct_pvalues():</strong> function to correct for multiple testing &lt;br&gt;
- <strong>bland_altman_plot():</strong> function to plot a mean-difference plot also know as a Bland-Altman Plot. &lt;br&gt;
- <strong>bland_altman_plot_repeated():</strong> an adapted function to plot a mean-difference plot also know as a Bland-Altman Plot,
whilst accounting for multiple time points per group. &lt;br&gt;
- <strong>ICC_repeated_measures_anova():</strong> function to calculate the ICC based on the repeated measures ANOVA framework. &lt;br&gt;
- <strong>multiple_ICCs():</strong> a wrapper function to return the ICC, SDC and SEMc based on repeated measures data. &lt;br&gt;</p>
<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.ICC_repeated_measures_anova">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">ICC_repeated_measures_anova</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">numpy.array</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#ICC_repeated_measures_anova"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.ICC_repeated_measures_anova" title="Permalink to this definition"></a></dt>
<dd><p>Return the intraclass correlation (ICC) between 2 or more time points. The repeated measures ANOVA framework is
used here with the equation:</p>
<p>One Sample Repeated measure ANOVA:
Y = XB + E with X = [Factor / Subjects]</p>
<p>Along with the intraclass correlation, the degrees of freedom and the error terms used in the calculation, are
also returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: Union[pd.DataFrame, np.array]</strong></dt><dd><p>The data frame or numpy array from which data will be used to calculate the ICC. The function expects the data
in the form of rows=users, columns=time_points. i.e for 100 users and 2 time points where the measure is
recorded, the shape should be (100, 2).</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>ICC: float</dt><dd><p>The intraclass correlation between the different time points of the measure included in the data.</p>
</dd>
<dt>between_subjects_variance: float</dt><dd><p>The variance calculated between the mean square of the subject effect, the mean square of the error divided by
the number of conditions.</p>
</dd>
<dt>mean_square_error: float</dt><dd><p>The mean of the squared error term.</p>
</dd>
<dt>session_effect_F: float</dt><dd><p>The f-statistic of the session effect - the variation between sample means divided by the
variation within the samples</p>
</dd>
<dt>degrees_freedom_conditions: float</dt><dd><p>The degrees of freedom of the conditions i.e. the number of columns - 1.</p>
</dd>
<dt>degrees_freedom_error: float</dt><dd><dl class="simple">
<dt>The degrees of freedom of the error term i.e. the number of subjects or rows - 1 multiplied by the</dt><dd><p>degrees of freedom of the conditions.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">References</p>
<p>Shrout, P. E., &amp; Fleiss, J. L. (1979). Intraclass correlations: uses in assessing rater reliability.
Psychological bulletin, 86(2), 420.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Load relevant libraries.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.frequentist_statistics</span> <span class="kn">import</span> <span class="n">ICC_repeated_measures_anova</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Calculating the ICC based on two time points.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Seed the random number generator.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># This ensures that the results below are reproducible.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">69420</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">measure_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">measure_2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">2020</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;t1&quot;</span><span class="p">:</span> <span class="n">measure_1</span><span class="p">,</span> <span class="s2">&quot;t2&quot;</span><span class="p">:</span> <span class="n">measure_2</span><span class="p">,</span> <span class="s2">&quot;user_id&quot;</span><span class="p">:</span> <span class="n">user_ids</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">ICC</span><span class="p">,</span> <span class="n">between_subjects_variance</span><span class="p">,</span> <span class="n">mean_square_error</span><span class="p">,</span> <span class="n">session_effect_F</span><span class="p">,</span> <span class="n">degrees_freedom_conditions</span><span class="p">,</span>
<span class="gp">... </span><span class="n">degrees_freedom_error</span><span class="p">)</span> <span class="o">=</span> <span class="n">ICC_repeated_measures_anova</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">[[</span><span class="s2">&quot;t1&quot;</span><span class="p">,</span> <span class="s2">&quot;t2&quot;</span><span class="p">]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.analysis_dependent_t_test">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">analysis_dependent_t_test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">features</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#analysis_dependent_t_test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.analysis_dependent_t_test" title="Permalink to this definition"></a></dt>
<dd><p>Run <cite>dependent_t_test</cite> for all combinations of features</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame)</strong></dt><dd><p>Dataframe with <cite>features</cite> in columns</p>
</dd>
<dt><strong>features: list</strong></dt><dd><p>list with feature names (str)</p>
</dd>
<dt><strong>show: bool</strong></dt><dd><p>whether to print the results</p>
</dd>
<dt><strong>plot: bool</strong></dt><dd><p>whether to plot the distribution and the data</p>
</dd>
<dt><strong>figsize: tuple (default: (11.7, 8.27))</strong></dt><dd><p>Width and height of the figure in inches</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df_analysis: pandas.DataFrame</dt><dd><dl class="simple">
<dt>Dataframe with most important results (name of the test, features, means, stds,</dt><dd><p>mean difference, t-value, degrees of freedom, p-value, significance)</p>
</dd>
</dl>
</dd>
<dt>list_residplots: list</dt><dd><p>List with figures if plot == True, else with None</p>
</dd>
<dt>list_boxplots: list</dt><dd><p>List with figures if plot == True, else with None</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_analysis</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">analysis_dependent_t_test</span><span class="p">(</span><span class="n">tips</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;total_bill&#39;</span><span class="p">,</span> <span class="s1">&#39;tip&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">],</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.analysis_dependent_wilcoxon_test">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">analysis_dependent_wilcoxon_test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">features</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#analysis_dependent_wilcoxon_test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.analysis_dependent_wilcoxon_test" title="Permalink to this definition"></a></dt>
<dd><p>Run <cite>dependent_wilcoxon_test</cite> for all combinations of features</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame)</strong></dt><dd><p>Dataframe with <cite>features</cite> in columns</p>
</dd>
<dt><strong>features: list</strong></dt><dd><p>list with feature names (str)</p>
</dd>
<dt><strong>show: bool</strong></dt><dd><p>whether to print the results</p>
</dd>
<dt><strong>plot: bool</strong></dt><dd><p>whether to plot the distribution and the data</p>
</dd>
<dt><strong>figsize: tuple (default: (11.7, 8.27))</strong></dt><dd><p>Width and height of the figure in inches</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df_analysis: pandas.DataFrame</dt><dd><dl class="simple">
<dt>Dataframe with most important results (name of the test, features, means, stds,</dt><dd><p>mean difference, t-value, p-value, significance)</p>
</dd>
</dl>
</dd>
<dt>list_boxplots: list</dt><dd><p>List with figures if plot == True, else with None</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_analysis</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">analysis_dependent_wilcoxon_test</span><span class="p">(</span><span class="n">tips</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;total_bill&#39;</span><span class="p">,</span> <span class="s1">&#39;tip&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">],</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.analysis_independent_mannwhitneyu_test">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">analysis_independent_mannwhitneyu_test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">features</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_var</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_grp1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_grp2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">permutation_test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_permutations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#analysis_independent_mannwhitneyu_test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.analysis_independent_mannwhitneyu_test" title="Permalink to this definition"></a></dt>
<dd><p>Run <cite>independent_mannwhitneyu_test</cite> for all features</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame)</strong></dt><dd><p>Dataframe with <cite>features</cite> and <cite>grouping_var</cite> in columns</p>
</dd>
<dt><strong>features: list</strong></dt><dd><p>list with feature names (str)</p>
</dd>
<dt><strong>grouping_var: str</strong></dt><dd><p>Name of the  column with grouping labels in <cite>data</cite></p>
</dd>
<dt><strong>grouping_grp1: str</strong></dt><dd><p>Name of the first label in <cite>data[grouping_var]</cite></p>
</dd>
<dt><strong>grouping_grp2:</strong></dt><dd><p>Name of the second label in <cite>data[grouping_var]</cite></p>
</dd>
<dt><strong>permutation_test: bool</strong></dt><dd><p>If true, a permutation test will added</p>
</dd>
<dt><strong>n_permutations: int (default: 1000)</strong></dt><dd><p>Number of permutations in the permutation test</p>
</dd>
<dt><strong>random_state: None or int (default: None)</strong></dt><dd><p>Random state for permutations</p>
</dd>
<dt><strong>show: bool</strong></dt><dd><p>whether to print the results</p>
</dd>
<dt><strong>plot: bool</strong></dt><dd><p>whether to plot the distribution and the data</p>
</dd>
<dt><strong>figsize: tuple (default: (11.7, 8.27))</strong></dt><dd><p>Width and height of the figure in inches</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df_analysis: pandas.DataFrame</dt><dd><dl class="simple">
<dt>Dataframe with most important results (name of the test, features, groups, means, stds,</dt><dd><p>u-value, p-value, significance)</p>
</dd>
</dl>
</dd>
<dt>list_boxplots: list</dt><dd><p>List with figures if plot == True, else None</p>
</dd>
<dt>list_p_plots: list</dt><dd><p>List with figures if plot == True, else None</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_analysis</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">analysis_independent_mannwhitneyu_test</span><span class="p">(</span><span class="n">tips</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;total_bill&#39;</span><span class="p">,</span> <span class="s1">&#39;tip&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">],</span> <span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="s1">&#39;Female&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                                     <span class="s1">&#39;Male&#39;</span><span class="p">,</span> <span class="n">show</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.analysis_independent_t_test">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">analysis_independent_t_test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">features</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_var</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_grp1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_grp2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">permutation_test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_permutations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#analysis_independent_t_test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.analysis_independent_t_test" title="Permalink to this definition"></a></dt>
<dd><p>Run <cite>independent_t_test</cite> for all combinations of features</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame)</strong></dt><dd><p>Dataframe with <cite>features</cite> and <cite>grouping_var</cite> in columns</p>
</dd>
<dt><strong>features: list</strong></dt><dd><p>list with feature names (str)</p>
</dd>
<dt><strong>grouping_var: str</strong></dt><dd><p>Name of the  column with grouping labels in <cite>data</cite></p>
</dd>
<dt><strong>grouping_grp1: str</strong></dt><dd><p>Name of the first label in <cite>data[grouping_var]</cite></p>
</dd>
<dt><strong>grouping_grp2: str</strong></dt><dd><p>Name of the second label in <cite>data[grouping_var]</cite></p>
</dd>
<dt><strong>permutation_test: bool</strong></dt><dd><p>If true, a permutation test will added</p>
</dd>
<dt><strong>n_permutations: int (default: 1000)</strong></dt><dd><p>Number of permutations in the permutation test</p>
</dd>
<dt><strong>random_state: None or int (default: None)</strong></dt><dd><p>Random state for permutations</p>
</dd>
<dt><strong>show: bool</strong></dt><dd><p>whether to print the results</p>
</dd>
<dt><strong>plot: bool</strong></dt><dd><p>whether to plot the distribution and the data</p>
</dd>
<dt><strong>figsize: tuple (default: (11.7, 8.27))</strong></dt><dd><p>Width and height of the figure in inches</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df_analysis: pandas.DataFrame</dt><dd><dl class="simple">
<dt>Dataframe with most important results (name of the test, features, groups, means, stds,</dt><dd><p>Levenes test, t-value, degrees of freedom, p-value, significance)</p>
</dd>
</dl>
</dd>
<dt>list_distplots: list</dt><dd><p>List with figures if plot == True, else with None</p>
</dd>
<dt>list_boxplots: list</dt><dd><p>List with figures if plot == True, else with None</p>
</dd>
<dt>list_p_plots: list</dt><dd><p>List with figures if plot == True, else with None</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_analysis</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">analysis_independent_t_test</span><span class="p">(</span><span class="n">tips</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;total_bill&#39;</span><span class="p">,</span> <span class="s1">&#39;tip&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">],</span> <span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="s1">&#39;Female&#39;</span><span class="p">,</span> <span class="s1">&#39;Male&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                          <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.apply_power_transformations">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">apply_power_transformations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#apply_power_transformations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.apply_power_transformations" title="Permalink to this definition"></a></dt>
<dd><p>Transform data with log transformations and Box-cox transformations</p>
<p>Columns that have values &lt;=0 will be rescaled before transformations.
Any <cite>numpy.nans</cite> will be ignored and retained. However, a warning ‘invalid value encountered in less equal’ is
returned by <cite>scipy.stats.boxcox</cite> which can be ignored.
Transformations
- natural logarithm
- base 10 logarithm
- square root
- inverse of square root
- inverse
- square</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame</strong></dt><dd><p>Dataframe with the features to be transformed</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>pandas.Dataframe</dt><dd><p>Dataframe with original data and transformations. Abbrevations of the transformations are added to the feature
names (i.e., ln, log10, box_sqrt, box_inv, box_square)</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tips_transformed</span> <span class="o">=</span> <span class="n">apply_power_transformations</span><span class="p">(</span><span class="n">tips</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.bland_altman_plot">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">bland_altman_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hue_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sd_limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.96</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scatter_kwds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean_line_kwds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_lines_kwds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plt_title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">(12,</span> <span class="pre">7)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#bland_altman_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.bland_altman_plot" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Bland-Altman Mean Difference Plot.</p>
<p>The Bland-Altman Plot is a graphical method to analyze
the differences between two methods of measurement.
It is a way of quantifying the agreement of two clinical measures.
The mean of the measures is plotted against their difference.</p>
<p>For more information see
<a class="reference external" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4470095/">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4470095/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pd.DataFrame</strong></dt><dd><p>The data frame from which data will be used for the plot.</p>
</dd>
<dt><strong>column1: str</strong></dt><dd><p>The name of the column of the first measure.</p>
</dd>
<dt><strong>column2: str</strong></dt><dd><p>The name of the column of the second measure.</p>
</dd>
<dt><strong>hue_column: str</strong></dt><dd><p>The name of the column used to color groups in the Bland Altman Plot.</p>
</dd>
<dt><strong>sd_limit: float</strong></dt><dd><p>The limit of agreements expressed in terms of the standard deviation of
the differences. If <cite>md</cite> is the mean of the differences, and <cite>sd</cite> is
the standard deviation of those differences, then the limits of
agreement that will be plotted are md +/- sd_limit * sd.
The default of 1.96 will produce 95% confidence intervals for the means
of the differences. If sd_limit = 0, no limits will be plotted, and
the ylimit of the plot defaults to 3 standard deviations on either
side of the mean.</p>
</dd>
<dt><strong>scatter_kwds: dict</strong></dt><dd><p>Options to to style the scatter plot. Accepts any keywords for the
matplotlib Axes.scatter plotting method.</p>
</dd>
<dt><strong>mean_line_kwds: dict</strong></dt><dd><p>Options to to style the scatter plot. Accepts any keywords for the
matplotlib Axes.axhline plotting method.</p>
</dd>
<dt><strong>limit_lines_kwds: dict</strong></dt><dd><p>Options to style the scatter plot. Accepts any keywords for the
matplotlib Axes.axhline plotting method.</p>
</dd>
<dt><strong>plt_title: str</strong></dt><dd><p>An optional string to overwrite the default title.</p>
</dd>
<dt><strong>figsize: tuple</strong></dt><dd><p>A tuple of numbers to be passed to the plt.figure(figsize= ) function
to manually specify the size of the plot.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>fig: matplotlib.figure.Figure</dt><dd><p>The matplotlib.figure.Figure object that is shown when running the function</p>
</dd>
<dt>ax: matplotlib.axes._subplots.AxesSubplot</dt><dd><p>The associated matplotlib.axes._subplots.AxesSubplot object of the plotted figure</p>
</dd>
<dt>means: pd.Series</dt><dd><p>The series of means that are plotted</p>
</dd>
<dt>diffs: pd.Series</dt><dd><p>The series of differences that are plotted</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">References</p>
<p>Bland JM, Altman DG (1986). “Statistical methods for assessing agreement
between two methods of clinical measurement”
Giavarina D. (2015). Understanding Bland Altman analysis. Biochemia medica, 25(2), 141–151. <a class="reference external" href="https://doi.org/10.11613/BM.2015.015">https://doi.org/10.11613/BM.2015.015</a></p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Load relevant libraries.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.frequentist_statistics</span> <span class="kn">import</span> <span class="n">bland_altman_plot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Making a bland-altman difference plot.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Seed the random number generator.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># This ensures that the results below are reproducible.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">69420</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">measure_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">measure_2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">other_group_difference</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;m1&quot;</span><span class="p">:</span> <span class="n">measure_1</span><span class="p">,</span> <span class="s2">&quot;m2&quot;</span><span class="p">:</span> <span class="n">measure_2</span><span class="p">,</span> <span class="s2">&quot;hue_column&quot;</span><span class="p">:</span> <span class="n">other_group_difference</span><span class="p">})</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Example 1: plotting the bland altman plot whilst incorporating a hue column</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">means</span><span class="p">,</span> <span class="n">diffs</span> <span class="o">=</span> <span class="n">bland_altman_plot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">column1</span><span class="o">=</span><span class="s2">&quot;m1&quot;</span><span class="p">,</span> <span class="n">column2</span><span class="o">=</span><span class="s2">&quot;m2&quot;</span><span class="p">,</span> <span class="n">hue_column</span><span class="o">=</span><span class="s2">&quot;hue_column&quot;</span><span class="p">,</span> <span class="n">sd_limit</span><span class="o">=</span><span class="mf">1.96</span><span class="p">,</span>
<span class="gp">... </span>                                             <span class="n">scatter_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mean_line_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit_lines_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                                             <span class="n">plt_title</span><span class="o">=</span><span class="s2">&quot;Bland Altman plot of </span><span class="se">\n</span><span class="s2"> two different measures&quot;</span><span class="p">,</span>
<span class="gp">... </span>                                             <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Example 2: plotting the bland altman plot whilst incorporating specific keywords for the scatter plot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">means</span><span class="p">,</span> <span class="n">diffs</span> <span class="o">=</span> <span class="n">bland_altman_plot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">column1</span><span class="o">=</span><span class="s2">&quot;m1&quot;</span><span class="p">,</span> <span class="n">column2</span><span class="o">=</span><span class="s2">&quot;m2&quot;</span><span class="p">,</span>  <span class="n">hue_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                                          <span class="n">sd_limit</span><span class="o">=</span><span class="mf">1.96</span><span class="p">,</span> <span class="n">scatter_kwds</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span><span class="s1">&#39;navy&#39;</span><span class="p">},</span>
<span class="gp">... </span>                                          <span class="n">mean_line_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit_lines_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                                          <span class="n">plt_title</span><span class="o">=</span><span class="s2">&quot;Bland Altman plot of </span><span class="se">\n</span><span class="s2"> two different measures&quot;</span><span class="p">,</span>
<span class="gp">... </span>                                          <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.bland_altman_plot_repeated">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">bland_altman_plot_repeated</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hue_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limits_approach</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'anova'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregate_scatter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregate_scatter_method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sd_limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.96</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optional_formula</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scatter_kwds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean_line_kwds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_lines_kwds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plt_title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">(12,</span> <span class="pre">7)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#bland_altman_plot_repeated"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.bland_altman_plot_repeated" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Bland-Altman Mean Difference Plot.
The Bland-Altman Plot is a graphical method to analyze
the differences between two methods of measurement.
It is a way of quantifying the agreement of two clinical measures.
The mean of the measures is plotted against their difference.
For more information see
<a class="reference external" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4470095/">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4470095/</a>
Parameters
———-
data: pd.DataFrame</p>
<blockquote>
<div><p>The data frame from which data will be used for the plot.</p>
</div></blockquote>
<dl class="simple">
<dt>column1: str</dt><dd><p>The name of the column of the first measure.</p>
</dd>
<dt>column2: str</dt><dd><p>The name of the column of the second measure.</p>
</dd>
<dt>hue_column: str</dt><dd><p>The name of the column used to color groups in the Bland Altman Plot.</p>
</dd>
<dt>sd_limit: float</dt><dd><p>The limit of agreements expressed in terms of the standard deviation of
the differences. If <cite>md</cite> is the mean of the differences, and <cite>sd</cite> is
the standard deviation of those differences, then the limits of
agreement that will be plotted are md +/- sd_limit * sd.
The default of 1.96 will produce 95% confidence intervals for the means
of the differences. If sd_limit = 0, no limits will be plotted, and
the ylimit of the plot defaults to 3 standard deviations on either
side of the mean.</p>
</dd>
<dt>scatter_kwds: dict</dt><dd><p>Options to to style the scatter plot. Accepts any keywords for the
matplotlib Axes.scatter plotting method.</p>
</dd>
<dt>mean_line_kwds: dict</dt><dd><p>Options to to style the scatter plot. Accepts any keywords for the
matplotlib Axes.axhline plotting method.</p>
</dd>
<dt>limit_lines_kwds: dict</dt><dd><p>Options to style the scatter plot. Accepts any keywords for the
matplotlib Axes.axhline plotting method.</p>
</dd>
<dt>plt_title: str</dt><dd><p>An optional string to overwrite the default title.</p>
</dd>
<dt>figsize: tuple</dt><dd><p>A tuple of numbers to be passed to the plt.figure(figsize= ) function
to manually specify the size of the plot.</p>
</dd>
</dl>
<dl class="simple">
<dt>fig: matplotlib.figure.Figure</dt><dd><p>The matplotlib.figure.Figure object that is shown when running the function</p>
</dd>
<dt>ax: matplotlib.axes._subplots.AxesSubplot</dt><dd><p>The associated matplotlib.axes._subplots.AxesSubplot object of the plotted figure</p>
</dd>
<dt>means: pd.Series</dt><dd><p>The series of means that are plotted</p>
</dd>
<dt>diffs: pd.Series</dt><dd><p>The series of differences that are plotted</p>
</dd>
</dl>
<p>Bland JM, Altman DG (1986). “Statistical methods for assessing agreement
between two methods of clinical measurement”
Giavarina D. (2015). Understanding Bland Altman analysis. Biochemia medica, 25(2), 141–151. <a class="reference external" href="https://doi.org/10.11613/BM.2015.015">https://doi.org/10.11613/BM.2015.015</a>
Examples
——–
&gt;&gt;&gt; # Load relevant libraries.
&gt;&gt;&gt; from neuropy.frequentist_statistics import bland_altman_plot
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; import pandas as pd
&gt;&gt;&gt; import matplotlib.pyplot as plt
&gt;&gt;&gt; # Making a bland-altman difference plot.
&gt;&gt;&gt; # Seed the random number generator.
&gt;&gt;&gt; # This ensures that the results below are reproducible.
&gt;&gt;&gt; np.random.seed(69420)
&gt;&gt;&gt; measure_1 = np.random.random(100)
&gt;&gt;&gt; measure_2 = np.random.random(100)
&gt;&gt;&gt; other_group_difference = np.random.choice([0, 1], 100)
&gt;&gt;&gt; df = pd.DataFrame({“m1”: measure_1, “m2”: measure_2, “hue_column”: other_group_difference})
&gt;&gt;&gt; # Example 1: plotting the bland altman plot whilst incorporating a hue column
&gt;&gt;&gt; fig, ax, means, diffs = bland_altman_plot(data=df, column1=”m1”, column2=”m2”, hue_column=”hue_column”, sd_limit=1.96,
…                                              scatter_kwds=None, mean_line_kwds=None, limit_lines_kwds=None,
…                                              plt_title=”Bland Altman plot of n two different measures”,
…                                              figsize=(7,5))
&gt;&gt;&gt; _ = plt.show()
&gt;&gt;&gt; # Example 2: plotting the bland altman plot whilst incorporating specific keywords for the scatter plot
&gt;&gt;&gt; fig, ax, means, diffs = bland_altman_plot(data=df, column1=”m1”, column2=”m2”,  hue_column=None,
…                                           sd_limit=1.96, scatter_kwds={‘color’:’navy’},
…                                           mean_line_kwds=None, limit_lines_kwds=None,
…                                           plt_title=”Bland Altman plot of n two different measures”,
…                                           figsize=(7,5))
&gt;&gt;&gt; _ = plt.show()</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.chisquare">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">chisquare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categories</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#chisquare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.chisquare" title="Permalink to this definition"></a></dt>
<dd><p>Run chi-square test using <cite>stats.chi2_contingency</cite></p>
<dl class="simple">
<dt>data<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe with variables in columns, cases in rows</p>
</dd>
<dt>groups: str</dt><dd><p>column name of groups in <cite>data</cite></p>
</dd>
<dt>categories: str</dt><dd><p>column name of categories in <cite>data</cite></p>
</dd>
<dt>show: bool (default: True)</dt><dd><p>Whether to print the results of the analysis</p>
</dd>
<dt>correction: bool (default: True)</dt><dd><p>Whether to apply the Yates’ correction for continuity</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>pd.DataFrame</dt><dd><p>Data frame with columns [‘test-type’, ‘grouping-var’, ‘categories’, ‘chi-square’, ‘df’, ‘p-value’, ‘stat-sign’]</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s1">&#39;tips&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chisquare</span><span class="p">(</span><span class="n">tips</span><span class="p">,</span> <span class="s1">&#39;smoker&#39;</span><span class="p">,</span> <span class="s1">&#39;sex&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.compare_theoretical_ecdf">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">compare_theoretical_ecdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_wrap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#compare_theoretical_ecdf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.compare_theoretical_ecdf" title="Permalink to this definition"></a></dt>
<dd><p>Compare emperical distribution to the theoretical distribution based on mean and standard deviation
Uses <cite>mapping_ecdf</cite> to plot the distributions and <cite>ecdf</cite> to calculate the distributions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame</strong></dt><dd><p>Dataframe including numerical features for which distribution is checked</p>
</dd>
<dt><strong>figsize: tuple (default: (11.7, 8.27))</strong></dt><dd><p>Width and height of the figure in inches</p>
</dd>
<dt><strong>col_wrap: int or None (default: None)</strong></dt><dd><p>If int, number of subplots that are allowed in a single row</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>ecdfplot: Figure</dt><dd><p>Figure with emperical and theoretical distributions of all numerical variables in subplots</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">compare_theoretical_ecdf</span><span class="p">(</span><span class="n">tips</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.correct_pvalues">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">correct_pvalues</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'fdr_bh'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">(10,</span> <span class="pre">5)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#correct_pvalues"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.correct_pvalues" title="Permalink to this definition"></a></dt>
<dd><p>Correct an array-like with pvalues using <cite>method</cite>, wrapper for <cite>statsmodels.stats.multitest.multipletests</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>pvals: array-like, 1d</strong></dt><dd><p>uncorrected pvalues</p>
</dd>
<dt><strong>alpha: float</strong></dt><dd><p>FWER, family-wise error rate</p>
</dd>
<dt><strong>method: str, one of {‘bonferroni’, ‘sidak’, ‘holm-sidak’, ‘holm’, ‘simes-hochberg’, ‘hommel’, ‘fdr_bh’,</strong></dt><dd></dd>
<dt><strong>‘fdr_by’, ‘fdr_tsbh’, ‘fdr_tsbky’}</strong></dt><dd></dd>
<dt><strong>plot: bool</strong></dt><dd><p>whether to plot the results</p>
</dd>
<dt><strong>title: str</strong></dt><dd><p>title to show above the plot</p>
</dd>
<dt><strong>labels: array-like, 1d</strong></dt><dd><p>labels for the uncorrected pvalues</p>
</dd>
<dt><strong>figsize: tuple</strong></dt><dd><p>size for the Figure</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>reject: numpy.array, bool</dt><dd><p>true for hypothesis that can be rejected for given alpha</p>
</dd>
<dt>corrected_p: numpy.array</dt><dd><p>p-values corrected for multiple tests</p>
</dd>
<dt>pvalues_plot: matplotlib.figure.Figure (optional)</dt><dd><p>Figure if plot == True, else None</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.dependent_t_test">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">dependent_t_test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#dependent_t_test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.dependent_t_test" title="Permalink to this definition"></a></dt>
<dd><p>Run paired sample t-tests including assumptions using <cite>scipy.stats.ttest_rel</cite></p>
<p>Rows with missing values in any of the features will be dropped.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame)</strong></dt><dd><p>Dataframe with <cite>feature1</cite> and <cite>feature2</cite> in columns</p>
</dd>
<dt><strong>feature1: str</strong></dt><dd><p>Name of the first feature</p>
</dd>
<dt><strong>feature2: str</strong></dt><dd><p>Name of the second feature</p>
</dd>
<dt><strong>show: bool</strong></dt><dd><p>whether to print the results</p>
</dd>
<dt><strong>plot: bool</strong></dt><dd><p>whether to plot the distribution and the data</p>
</dd>
<dt><strong>figsize: tuple (default: (11.7, 8.27))</strong></dt><dd><p>Width and height of the figure in inches</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df_t_test: pandas.DataFrame</dt><dd><dl class="simple">
<dt>Dataframe with most important results (name of the test, features, means, stds,</dt><dd><p>mean difference, t-value, degrees of freedom, p-value, significance)</p>
</dd>
</dl>
</dd>
<dt>residplot: Figure</dt><dd><p>Figure if plot == True, else None</p>
</dd>
<dt>boxplot: Figure</dt><dd><p>Figure if plot == True, else None</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bill_and_tip_difference</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dependent_t_test</span><span class="p">(</span><span class="n">tips</span><span class="p">,</span> <span class="s1">&#39;total_bill&#39;</span><span class="p">,</span> <span class="s1">&#39;tip&#39;</span><span class="p">,</span> <span class="n">show</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.dependent_wilcoxon_test">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">dependent_wilcoxon_test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#dependent_wilcoxon_test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.dependent_wilcoxon_test" title="Permalink to this definition"></a></dt>
<dd><p>Run paired sample Wilcoxon test using <cite>scipy.stats.wilcoxon</cite></p>
<p>Rows with missing values in any of the features will be dropped.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame)</strong></dt><dd><p>Dataframe with <cite>feature1</cite> and <cite>feature2</cite> in columns</p>
</dd>
<dt><strong>feature1: str</strong></dt><dd><p>Name of the first feature</p>
</dd>
<dt><strong>feature2: str</strong></dt><dd><p>Name of the second feature</p>
</dd>
<dt><strong>show: bool</strong></dt><dd><p>whether to print the results</p>
</dd>
<dt><strong>plot: bool</strong></dt><dd><p>whether to plot the distribution and the data</p>
</dd>
<dt><strong>figsize: tuple (default: (11.7, 8.27))</strong></dt><dd><p>Width and height of the figure in inches</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df_t_test: pandas.DataFrame</dt><dd><dl class="simple">
<dt>Dataframe with most important results (name of the test, features, means, stds,</dt><dd><p>mean difference, t-value, p-value, significance)</p>
</dd>
</dl>
</dd>
<dt>boxplot: Figure</dt><dd><p>Figure if plot == True, else None</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bill_and_tip_difference</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dependent_wilcoxon_test</span><span class="p">(</span><span class="n">tips</span><span class="p">,</span> <span class="s1">&#39;total_bill&#39;</span><span class="p">,</span> <span class="s1">&#39;tip&#39;</span><span class="p">,</span> <span class="n">show</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.diagnostic_plots">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">diagnostic_plots</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_fit:</span> <span class="pre">fitted</span> <span class="pre">linear</span> <span class="pre">model</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X:</span> <span class="pre">typing.Optional[pandas.core.frame.DataFrame]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y:</span> <span class="pre">typing.Optional[pandas.core.series.Series]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize:</span> <span class="pre">tuple</span> <span class="pre">=</span> <span class="pre">(12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">12)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_cooks_plot:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subplot_adjust_args:</span> <span class="pre">dict</span> <span class="pre">=</span> <span class="pre">{'hspace':</span> <span class="pre">0.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'wspace':</span> <span class="pre">0.3}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#diagnostic_plots"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.diagnostic_plots" title="Permalink to this definition"></a></dt>
<dd><p>This function is an extension of the diagnostic_plots function. This is done to include the use of models
defined using pymer4, statsmodels, and sklearn*. Specifically the currently accepted models are:</p>
<ul class="simple">
<li><p>pymer4.models.Lm.Lm</p></li>
<li><p>pymer4.models.Lmer.Lmer</p></li>
<li><p>sklearn.linear_model._base.LinearRegression</p></li>
<li><p>sklearn.linear_model._coordinate_descent.Lasso</p></li>
<li><p>sklearn.linear_model._ridge.Ridge</p></li>
<li><p>statsmodels.regression.linear_model.RegressionResultsWrapper</p></li>
<li><p>statsmodels.regression.mixed_linear_model.MixedLMResultsWrapper</p></li>
</ul>
<dl class="simple">
<dt><a href="#id4"><span class="problematic" id="id5">*</span></a>The sklearn models listed have been tried, although in theory all variants of the sklearn linear regression</dt><dd><p>models should work with this function</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>model_fit:</strong></dt><dd><p>A fitted linear regression model, ideally one of the ones listed above.</p>
</dd>
<dt><strong>X:</strong></dt><dd><p>The array of predictors used to fit the model. This is only required if the inputted model is an sklearn
model. For all other models just the fitted model is sufficient.</p>
</dd>
<dt><strong>y:</strong></dt><dd><p>The target array used to fit the model. This is only required if the inputted model is an sklearn
model. For all other models just the fitted model is sufficient.</p>
</dd>
<dt><strong>figsize: tuple</strong></dt><dd><p>Width and height of the figure in inches</p>
</dd>
<dt><strong>limit_cooks_plot: bool</strong></dt><dd><p>Whether to apply a y-limit to the cooks distances plot (i.e. would you like to see the cooks distances
better, or the individual scatter points better?)</p>
</dd>
<dt><strong>subplot_adjust_args: dict</strong></dt><dd><p>A dictionary of arguments to change the dimensions of the subplots. This is useful to include if the chosen
figsize is making the plot labels overlap.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>diagplot: matplotlib.figure.Figure</dt><dd><p>Figure with four diagnostic plots: residuals vs fitted, QQplot, scale location, residuals vs leverage</p>
</dd>
<dt>axes: np.array</dt><dd><p>An array of the associated axes of the four subplots.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">## Pymer4 example</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pymer4</span> <span class="kn">import</span> <span class="n">Lmer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.frequentist_statistics</span> <span class="kn">import</span> <span class="n">diagnostic_plots</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;mpg&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_fit</span> <span class="o">=</span> <span class="n">Lmer</span><span class="p">(</span><span class="s2">&quot;mpg ~ cylinders + displacement + weight + acceleration + (1 | model_year)&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_summary</span> <span class="o">=</span> <span class="n">model_fit</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">conf_int</span> <span class="o">=</span> <span class="s2">&quot;profile&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">diagnostic_plots</span><span class="p">(</span><span class="n">model_fit</span><span class="o">=</span><span class="n">model_fit</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">X</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span>
<span class="gp">... </span>                                        <span class="n">limit_cooks_plot</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">subplot_adjust_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wspace&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s2">&quot;hspace&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">}</span>
<span class="gp">... </span>                                       <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">## sklearn example</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LinearRegression</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.frequentist_statistics</span> <span class="kn">import</span> <span class="n">diagnostic_plots</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;mpg&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="s1">&#39;cylinders&#39;</span><span class="p">,</span> <span class="s1">&#39;displacement&#39;</span><span class="p">,</span> <span class="s1">&#39;weight&#39;</span><span class="p">,</span> <span class="s1">&#39;acceleration&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;mpg&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_fit</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">diagnostic_plots</span><span class="p">(</span><span class="n">model_fit</span><span class="o">=</span><span class="n">model_fit</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span>
<span class="gp">... </span>                                        <span class="n">limit_cooks_plot</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">subplot_adjust_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wspace&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s2">&quot;hspace&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">}</span>
<span class="gp">... </span>                                       <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">## statsmodels example</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.frequentist_statistics</span> <span class="kn">import</span> <span class="n">diagnostic_plots</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;mpg&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="s1">&#39;cylinders&#39;</span><span class="p">,</span> <span class="s1">&#39;displacement&#39;</span><span class="p">,</span> <span class="s1">&#39;weight&#39;</span><span class="p">,</span> <span class="s1">&#39;acceleration&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;mpg&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_fit</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">MixedLM</span><span class="p">(</span><span class="n">endog</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">exog</span><span class="o">=</span><span class="n">X</span><span class="p">,</span> <span class="n">groups</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;model_year&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;lbfgs&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">diagnostic_plots</span><span class="p">(</span><span class="n">model_fit</span><span class="o">=</span><span class="n">model_fit</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">X</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span>
<span class="gp">... </span>                                        <span class="n">limit_cooks_plot</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">subplot_adjust_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wspace&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s2">&quot;hspace&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">}</span>
<span class="gp">... </span>                                       <span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.ecdf">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">ecdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.series.Series</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#ecdf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.ecdf" title="Permalink to this definition"></a></dt>
<dd><p>Computes emperical cumulative distribution function for a one-dimensional array of measurements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.Series</strong></dt><dd><p>series with measurements</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>x: pandas.Series</dt><dd><p>sorted data</p>
</dd>
<dt>y: pandas.Series</dt><dd><p>cumulative distribution</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bills</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)[</span><span class="s1">&#39;total_bill&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">ecdf</span><span class="p">(</span><span class="n">bills</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.find_optimal_transformation">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">find_optimal_transformation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">normality_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['ln_',</span> <span class="pre">'log10_',</span> <span class="pre">'box_sqrt_',</span> <span class="pre">'box_sqrt_inv_',</span> <span class="pre">'box_inv_',</span> <span class="pre">'box_square_']</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#find_optimal_transformation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.find_optimal_transformation" title="Permalink to this definition"></a></dt>
<dd><p>Choose the best transformation based on the results of <cite>normal_check</cite> after <cite>apply_transformation</cite>
If no transformation returns a normal distribution, the original feature should be used with nonparametric methods</p>
<dl class="simple">
<dt>df_normality_check: pandas.DataFrame</dt><dd><p>Dataframe that includes feature (str), p-value (float) and normality (bool)</p>
</dd>
<dt>feature_list: list</dt><dd><p>List with the original feature names, corresponding to parts of the column names in df_normality_check (i.e.
the original feature names)</p>
</dd>
<dt>prefix_list: list</dt><dd><p>List with the prefixes that were added to the original feature names in the feature_list</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>use_transformation: list</dt><dd><p>optimal transformation for each feature</p>
</dd>
<dt>use_nonparametric: list</dt><dd><p>features for which no appropriate transformation was available</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#Assumption: all columns need transformations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tips_transformed</span> <span class="o">=</span> <span class="n">apply_power_transformations</span><span class="p">(</span><span class="n">tips</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="s1">&#39;number&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_normality_check</span> <span class="o">=</span> <span class="n">normal_check</span><span class="p">(</span><span class="n">tips_transformed</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">use_transformation</span><span class="p">,</span> <span class="n">use_nonparametric</span> <span class="o">=</span> <span class="n">find_optimal_transformation</span><span class="p">(</span><span class="n">df_normality_check</span><span class="p">,</span>
<span class="gp">... </span><span class="n">tips</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="s1">&#39;number&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.independent_mannwhitneyu_test">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">independent_mannwhitneyu_test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_var</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_grp1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_grp2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">permutation_test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_permutations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#independent_mannwhitneyu_test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.independent_mannwhitneyu_test" title="Permalink to this definition"></a></dt>
<dd><p>Run independent Mann-Whitney U test using <cite>scipy.stats.mannwhitneyu</cite></p>
<p>Rows with missing values in <cite>feature</cite> or <cite>grouping_var</cite> will be dropped.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame)</strong></dt><dd><p>Dataframe with <cite>feature</cite> and <cite>grouping_var</cite> in columns</p>
</dd>
<dt><strong>feature: str</strong></dt><dd><p>Name of the feature</p>
</dd>
<dt><strong>grouping_var: str</strong></dt><dd><p>Name of the  column with grouping labels in <cite>data</cite></p>
</dd>
<dt><strong>grouping_grp1: str</strong></dt><dd><p>Name of the first label in <cite>data[grouping_var]</cite></p>
</dd>
<dt><strong>grouping_grp2:</strong></dt><dd><p>Name of the second label in <cite>data[grouping_var]</cite></p>
</dd>
<dt><strong>permutation_test: bool (default: False)</strong></dt><dd><p>If true, a permutation test will added</p>
</dd>
<dt><strong>n_permutations: int (default: 1000)</strong></dt><dd><p>Number of permutations in the permutation test</p>
</dd>
<dt><strong>random_state: None or int (default: None)</strong></dt><dd><p>Random state for permutation_test. If not None, random_state will be updated for every permutation</p>
</dd>
<dt><strong>show: bool</strong></dt><dd><p>whether to print the results</p>
</dd>
<dt><strong>plot: bool</strong></dt><dd><p>whether to plot the distribution and the data</p>
</dd>
<dt><strong>figsize: tuple (default: (11.7, 8.27))</strong></dt><dd><p>Width and height of the figure in inches</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df_t_test: pandas.DataFrame</dt><dd><dl class="simple">
<dt>Dataframe with most important results (name of the test, feature, groups, means, stds,</dt><dd><p>u-value, p-value, significance)</p>
</dd>
</dl>
</dd>
<dt>boxplot: Figure</dt><dd><p>Figure if plot == True, else None</p>
</dd>
<dt>p_plot: Figure</dt><dd><p>Figure if plot == True, else None</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sex_tip_difference</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">independent_mannwhitneyu_test</span><span class="p">(</span><span class="n">tips</span><span class="p">,</span> <span class="s1">&#39;tip&#39;</span><span class="p">,</span><span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="s1">&#39;Female&#39;</span><span class="p">,</span> <span class="s1">&#39;Male&#39;</span><span class="p">,</span> <span class="n">show</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                                                      <span class="n">plot</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.independent_t_test">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">independent_t_test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_var</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_grp1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_grp2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">permutation_test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_permutations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#independent_t_test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.independent_t_test" title="Permalink to this definition"></a></dt>
<dd><p>Run independent sample t-tests including assumptions using <cite>scipy.stats.levene</cite> and <cite>statsmodels.stats.
weightstats.ttest_ind</cite></p>
<p>Rows with missing values in <cite>features</cite> or <cite>grouping_var</cite> will be dropped.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame)</strong></dt><dd><p>Dataframe with <cite>feature</cite> and <cite>grouping_var</cite> in columns</p>
</dd>
<dt><strong>feature: str</strong></dt><dd><p>Name of the feature</p>
</dd>
<dt><strong>grouping_var: str</strong></dt><dd><p>Name of the  column with grouping labels in <cite>data</cite></p>
</dd>
<dt><strong>grouping_grp1: str</strong></dt><dd><p>Name of the first label in <cite>data[grouping_var]</cite></p>
</dd>
<dt><strong>grouping_grp2: str</strong></dt><dd><p>Name of the second label in <cite>data[grouping_var]</cite></p>
</dd>
<dt><strong>permutation_test: bool (default: False)</strong></dt><dd><p>If true, a permutation test will added</p>
</dd>
<dt><strong>n_permutations: int (default: 1000)</strong></dt><dd><p>Number of permutations in the permutation test</p>
</dd>
<dt><strong>random_state: None or int (default: None)</strong></dt><dd><p>Random state for permutation_test. If not None, random_state will be updated for every permutation</p>
</dd>
<dt><strong>show: bool (default: False)</strong></dt><dd><p>whether to print the results</p>
</dd>
<dt><strong>plot: bool (default: False)</strong></dt><dd><p>whether to plot the distribution and the data</p>
</dd>
<dt><strong>figsize: tuple (default: (11.7, 8.27))</strong></dt><dd><p>Width and height of the figure in inches</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df_t_test: pandas.DataFrame</dt><dd><dl class="simple">
<dt>Dataframe with most important results (name of the test, feature, groups, means, stds,</dt><dd><p>Levenes test, t-value, degrees of freedom, p-value, significance)</p>
</dd>
</dl>
</dd>
<dt>distplot: matplotlib.figure.Figure with distributions (if plot is True else None)</dt><dd></dd>
<dt>boxplot: matplotlib.figure.Figure with data (if plot is True else None)</dt><dd></dd>
<dt>p_plot: matplotlib.figure.Figure with permutation results (if plot and permutation_test else None)</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sex_tip_difference</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">independent_t_test</span><span class="p">(</span><span class="n">tips</span><span class="p">,</span> <span class="s1">&#39;tip&#39;</span><span class="p">,</span><span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="s1">&#39;Female&#39;</span><span class="p">,</span> <span class="s1">&#39;Male&#39;</span><span class="p">,</span> <span class="n">show</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.mapping_dist_mean_median">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">mapping_dist_mean_median</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#mapping_dist_mean_median"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.mapping_dist_mean_median" title="Permalink to this definition"></a></dt>
<dd><p>Adds line and text relative to moments of distribution to densityplots using <cite>seaborn.distplots</cite></p>
<p>Helper function (map) for plotting distributions, can be used with <cite>plot_distribution</cite>
Adds dashed line at mean value and solid line at median value.
Adds text with mean, median, skewness, kurtosis values at right top of the plot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>(**kwargs)</strong></dt><dd><p>arguments passed by <cite>plot_distribution</cite> or <cite>seaborn.FacetGrid</cite>: <cite>data</cite>, <cite>bins</cite>, <cite>**kwargs</cite></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>function</dt><dd><p>Plotting functions to be used in <cite>plot_distribution</cite></p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">frequentist_statistics_preparation.plot_distribution</span></code></dt><dd></dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;number&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tips_melted</span> <span class="o">=</span> <span class="n">tips</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">var_name</span><span class="o">=</span><span class="s1">&#39;feature&#39;</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s1">&#39;values&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">tips_melted</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s2">&quot;feature&quot;</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">mapping_dist_mean_median</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">... </span>   <span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">... </span>   <span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{col_name}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">... </span>   <span class="o">.</span><span class="n">set_xlabels</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="gp">... </span>   <span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">.2</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">.3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># _ = plt.show()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.mapping_ecdf">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">mapping_ecdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#mapping_ecdf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.mapping_ecdf" title="Permalink to this definition"></a></dt>
<dd><p>Adds emperical and theoretical distribution of the data</p>
<p>Helper function (map) for plotting distributions, can be used with <cite>compare_theoretical_ecdf</cite>
Adds solid line at theoretical distribution
Adds points at emperical data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>(**kwargs)</strong></dt><dd><p>arguments passed by <cite>compare_theoretical_ecdf</cite> or <cite>seaborn.FacetGrid</cite>: <cite>data</cite>, <cite>**kwargs</cite></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>function</dt><dd><p>Plotting functions to be used in <cite>compare_theoretical_ecdf</cite></p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">frequentist_statistics_preparation.compare_theoretical_ecdf</span></code></dt><dd></dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;number&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tips_melted</span> <span class="o">=</span> <span class="n">tips</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">var_name</span><span class="o">=</span><span class="s1">&#39;feature&#39;</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s1">&#39;values&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">tips_melted</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s2">&quot;feature&quot;</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">mapping_ecdf</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">)</span>
<span class="gp">... </span>   <span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">... </span>   <span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{col_name}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">... </span>   <span class="o">.</span><span class="n">set_xlabels</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="gp">... </span>   <span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">.2</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">.3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># _ = plt.show()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.multiple_ICCs">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">multiple_ICCs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_list_of_dicts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#multiple_ICCs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.multiple_ICCs" title="Permalink to this definition"></a></dt>
<dd><p>Return a data frame including the feature name, Intra-Class Correlation (ICC), Smallest Detectable Change (SDC),
Standard Error of Measurement (SEMc) between 2 or more time points. This function is essentially a wrapper function
around the ICC_repeated_measures_anova() function in order to apply the function to multiple features.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: Union[pd.DataFrame, np.array]</strong></dt><dd><p>The data frame or numpy array from which data will be used to calculate the ICC. The function expects the data
in the form of rows=users, columns=time_points. i.e for 100 users and 2 time points where the measure is
recorded, the shape should be (100, 2).</p>
</dd>
<dt><strong>feature_list_of_dicts: list</strong></dt><dd><p>A list of dictionaries in the form of: [{‘general_name_1’: [‘name_first_session’, ‘name_second_session’]},
{‘general_name_2’: [‘name_width_first_session’, ‘name_second_session’]}]. The “general_name” is the one shown
in the returned data frame, and the list of other names are used to select the columns prior to the creation
of the data frames used directly in the ICC_repeated_measures_anova() function for loop.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>all_ICC_based_measures_df: pd.DataFrame</dt><dd><p>The intraclass correlation between the different time points of the measure included in the data.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">References</p>
<p>Shrout, P. E., &amp; Fleiss, J. L. (1979). Intraclass correlations: uses in assessing rater reliability.
Psychological bulletin, 86(2), 420.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Load relevant libraries.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.frequentist_statistics</span> <span class="kn">import</span> <span class="n">multiple_ICCs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;iris&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;pre_post&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">75</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">75</span><span class="p">)),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">features_list</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">icc_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;pre_post&quot;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;pre_post&quot;</span><span class="p">]</span><span class="o">==</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="gp">... </span>                  <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">suffixes</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;_first_session&#39;</span><span class="p">,</span> <span class="s1">&#39;_second_session&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">feature_list_of_dicts</span> <span class="o">=</span> <span class="p">[{</span><span class="n">x</span><span class="p">:</span> <span class="n">icc_df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()}</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">features_list</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">all_ICC_based_measures_df</span><span class="o">=</span><span class="n">multiple_ICCs</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">icc_df</span><span class="p">,</span> <span class="n">feature_list_of_dicts</span><span class="o">=</span><span class="n">feature_list_of_dicts</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.normal_check">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">normal_check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pandas.core.frame.DataFrame</span></span></span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#normal_check"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.normal_check" title="Permalink to this definition"></a></dt>
<dd><p>Compare the distribution of numeric variables to a normal distribution using the Kolmogrov-Smirnov test</p>
<p>Wrapper for <cite>scipy.stats.kstest</cite>: the empircal data is compared to a normally distributed variable with the
same mean and standard deviation. A significant result (p &lt; 0.05) in the goodness of fit test means that the
data is not normally distributed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame</strong></dt><dd><p>Dataframe including the columns of interest</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df_normality_check: pd.DataFrame</dt><dd><p>Dataframe with column names, p-values and an indication of normality</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_normality_check</span> <span class="o">=</span> <span class="n">normal_check</span><span class="p">(</span><span class="n">tips</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.ols">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">ols</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_intercept</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">impute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation_strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'median'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cov_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'nonrobust'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cov_kwds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#ols"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.ols" title="Permalink to this definition"></a></dt>
<dd><p>Run a linear regression model with ordinary least squares (OLS) estimation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>X: pandas.DataFrame</strong></dt><dd><p>Dataframe with predictors</p>
</dd>
<dt><strong>y: pandas.Series</strong></dt><dd><p>Series with outcome</p>
</dd>
<dt><strong>fit_intercept:  bool</strong></dt><dd><p>whether to add an intercept to the model</p>
</dd>
<dt><strong>normalize: bool</strong></dt><dd><p>whether to mean center and scale the numerical predictors (z-scores)</p>
</dd>
<dt><strong>impute: bool</strong></dt><dd><p>whether to impute missing values (<cite>np.nan</cite>) in numerical predictors in X</p>
</dd>
<dt><strong>imputation_strategy: {‘mean’, ‘median’, ‘most_frequent’} (default=’median’)</strong></dt><dd><p>imputation strategy when impute=True</p>
</dd>
<dt><strong>show: bool</strong></dt><dd><p>whether to print the main results</p>
</dd>
<dt><strong>plot: bool</strong></dt><dd><p>whether to show plots with model diagnostics
if missing values in the data are not imputed, it is not possible to show model diagnostics</p>
</dd>
<dt><strong>figsize: tuple (default: (11.7, 8.27))</strong></dt><dd><p>Width and height of the figure in inches</p>
</dd>
<dt><strong>cov_type: str</strong></dt><dd><p>covariance estimator, see statsmodels.regression.linear_model.RegressionResults.get_robustcov_results for
available covariance estimators</p>
</dd>
<dt><strong>cov_kwds: list or None, optional</strong></dt><dd><p>See statsmodels.regression.linear_model.RegressionResults.get_robustcov_results for a description of the
required keyswords for alternative covariance estimators</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df_coef: pandas.DataFrame</dt><dd><dl class="simple">
<dt>Dataframe with the results regarding coefficients: predictors, coefficients, standard errors, confidence</dt><dd><p>intervals, p-values</p>
</dd>
</dl>
</dd>
<dt>df_fitting: pandas.DataFrame</dt><dd><dl class="simple">
<dt>Dataframe with the results regarding model fit: outcome, number of observations, RMSE, F-value, df model,</dt><dd><p>df residuals, p-value, R-squared, adjusted R-squared</p>
</dd>
</dl>
</dd>
<dt>diagplot: Figure</dt><dd><p>Figure with model diagnostics if plot == True, else None</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;mpg&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mpg&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="s1">&#39;cylinders&#39;</span><span class="p">,</span> <span class="s1">&#39;displacement&#39;</span><span class="p">,</span> <span class="s1">&#39;weight&#39;</span><span class="p">,</span> <span class="s1">&#39;acceleration&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coefs</span><span class="p">,</span> <span class="n">fits</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">ols</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.one_way_ANOVA">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">one_way_ANOVA</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_var</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groups_of_interest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_wrap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#one_way_ANOVA"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.one_way_ANOVA" title="Permalink to this definition"></a></dt>
<dd><p>Run one-way ANOVAs using <cite>scipy.stats.f_oneway</cite> and check homogeneity of variances with Levenes test
using <cite>scipy.stats.levene</cite></p>
<p><cite>one_way_ANOVA</cite> assumes equal variances within the groups and will not give a warning if show=False</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame)</strong></dt><dd><p>Dataframe with <cite>feature</cite> and <cite>grouping_var</cite> in columns</p>
</dd>
<dt><strong>feature: str</strong></dt><dd><p>Name of the feature</p>
</dd>
<dt><strong>grouping_var: str</strong></dt><dd><p>Name of the  column with grouping labels in <cite>data</cite></p>
</dd>
<dt><strong>groups_of_interest: list</strong></dt><dd><p>Names (str) of labels in <cite>data[grouping_var]</cite></p>
</dd>
<dt><strong>show: bool</strong></dt><dd><p>whether to print the results</p>
</dd>
<dt><strong>plot: bool</strong></dt><dd><p>whether to plot the distribution and the data</p>
</dd>
<dt><strong>figsize: tuple (default: (11.7, 8.27))</strong></dt><dd><p>Width and height of the figure in inches</p>
</dd>
<dt><strong>col_wrap: int or None (default: None)</strong></dt><dd><p>If int, number of subplots that are allowed in a single row</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df_result: pd.DataFrame</dt><dd></dd>
<dt>df_descriptive: pd.DataFrame</dt><dd></dd>
<dt>distplot: Figure</dt><dd><p>Figure if plot == True, else None</p>
</dd>
<dt>boxplot: Figure</dt><dd><p>Figure if plot == True, else None</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">one_way_ANOVA</span><span class="p">(</span><span class="n">tips</span><span class="p">,</span> <span class="s1">&#39;tip&#39;</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Sat&#39;</span><span class="p">,</span><span class="s1">&#39;Sun&#39;</span><span class="p">,</span><span class="s1">&#39;Thur&#39;</span><span class="p">],</span> <span class="n">show</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.permutation_plot">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">permutation_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">permutations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#permutation_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.permutation_plot" title="Permalink to this definition"></a></dt>
<dd><p>Show the result of the permutations using a histogram</p>
<dl class="simple">
<dt>permutations: array-like</dt><dd><p>Array with single p-value per permutation</p>
</dd>
<dt>p_value: float</dt><dd><p>P-value obtained from real data</p>
</dd>
<dt>feature1: None or str (default: None)</dt><dd><p>Name of the first feature involved</p>
</dd>
<dt>feature2: None or str (default: None)</dt><dd><p>Name of the second feature involved</p>
</dd>
<dt>figsize: tuple (default: (11.7, 8.27))</dt><dd><p>Width and height of the figure in inches</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>permutation_plot: Figure</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Demonstration of the function using random data</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">permutations</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">permutation_plot</span> <span class="o">=</span> <span class="n">permutation_plot</span><span class="p">(</span><span class="n">permutations</span><span class="p">,</span> <span class="n">p_value</span> <span class="o">=</span> <span class="mf">0.02</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># plt.show()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.permute_test">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">permute_test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#permute_test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.permute_test" title="Permalink to this definition"></a></dt>
<dd><p>Helper function to run tests for permutations</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>a</strong><span class="classifier">np.array</span></dt><dd></dd>
<dt><strong>test_type: str {‘correlation’, ‘independent_t_test’}</strong></dt><dd><p>Type of the test to be used</p>
</dd>
<dt><strong>test:</strong></dt><dd><p>e.g. <cite>scipy.stats.pearsonr</cite> or <cite>statsmodels.stats.weightstats.ttest_ind</cite></p>
</dd>
<dt><strong>**kwargs:</strong></dt><dd><p>Additional keywords to be added to <cite>test</cite>
- <cite>n</cite> for the number of observations in the first group if test_type = ‘independent_t_test’
- <cite>usevar</cite> for the type of variances if test_type = ‘independent_t_test’
- <cite>a2</cite> for the second feature if test_type = ‘correlation’</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>float:</dt><dd><p>p value for permutation</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.frequentist_statistics.plot_distribution">
<span class="sig-prename descclassname"><span class="pre">neuropy.frequentist_statistics.</span></span><span class="sig-name descname"><span class="pre">plot_distribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">5)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_wrap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/frequentist_statistics.html#plot_distribution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.frequentist_statistics.plot_distribution" title="Permalink to this definition"></a></dt>
<dd><p>Plot distributions relative to numerical (ungrouped) features</p>
<p>Wrapper of <cite>seaborn.FacetGrid</cite> that uses plotting function <cite>dist_mean_median</cite> to plot distributions and displays
the moments of the distribution for numerical columns in <cite>data</cite></p>
<dl class="simple">
<dt>data<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe containing the features of interest</p>
</dd>
<dt>figsize: tuple (default: (11.7, 8.27))</dt><dd><p>Width and height of the figure in inches</p>
</dd>
<dt>col_wrap: int or None (default: None)</dt><dd><p>If int, number of subplots that are allowed in a single row</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>distplot: Figure</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">plot_distribution</span><span class="p">(</span><span class="n">tips</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># plt.show()</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-neuropy.group_analysis">
<span id="neuropy-group-analysis"></span><h1><code class="docutils literal notranslate"><span class="pre">neuropy.group_analysis</span></code><a class="headerlink" href="#module-neuropy.group_analysis" title="Permalink to this headline"></a></h1>
<p>Submodule group_analysis.py includes the following functions: &lt;br&gt;
- <strong>roc_analysis():</strong> Compute ROC analysis [medical field version] &lt;br&gt;</p>
<dl class="py function">
<dt class="sig sig-object py" id="neuropy.group_analysis.medical_roc">
<span class="sig-prename descclassname"><span class="pre">neuropy.group_analysis.</span></span><span class="sig-name descname"><span class="pre">medical_roc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_benchmark</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta_feature</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold_array</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.array</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anchor_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/group_analysis.html#medical_roc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.group_analysis.medical_roc" title="Permalink to this definition"></a></dt>
<dd><p>Compute ROC analysis [medical field version]
Ref: Receiver Operating Characteristic (ROC) Curve Analysis for Medical Diagnostic Test Evaluation
DOI: <a class="reference external" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3755824/">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3755824/</a></p>
<dl class="simple">
<dt>y_benchmark: np.array, pd.Series, list</dt><dd><p>array with binary values (0, 1) relative to the benchmark/anchor</p>
</dd>
<dt>delta_feature: np.array</dt><dd><p>array containing the difference of a feature feature at two difference time points, e.g. between m00 and m03</p>
</dd>
<dt>threshold_array: Union[np.array, None] (default: None)</dt><dd><p>array contining threshold values to evaluate <cite>delta_scores</cite> on</p>
</dd>
<dt>plot<span class="classifier">bool (default: True)</span></dt><dd><p>plot roc_curve</p>
</dd>
<dt>anchor_name<span class="classifier">str (default: None),</span></dt><dd><p>add to plot the name of y_benchmark</p>
</dd>
<dt>feature_name<span class="classifier">str (default: None),</span></dt><dd><p>add to plot the name of feature</p>
</dd>
<dt>figsize<span class="classifier">tuple (default: (11.7, 8.27))</span></dt><dd><p>set plot size</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>summary: pandas.DataFrame</dt><dd><p>Summary dataframe with with columns true positive rate (tpr), false positive rate (fpr),
true negative rate (tnr), Youden index</p>
</dd>
<dt>roc_auc: float</dt><dd><p>the area under the receiving operating characteristic (ROC)</p>
</dd>
<dt>fig: matplotlib.figure.Figure (optional)</dt><dd><p>Figure if plot == True, else None</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Threshold implementation is equivalent to sklearn’s <cite>roc_curve()</cite> with <cite>drop_intermediate=False</cite>.</p>
</dd></dl>

</section>
<section id="module-neuropy.internal_composite">
<span id="neuropy-internal-composite"></span><h1><code class="docutils literal notranslate"><span class="pre">neuropy.internal_composite</span></code><a class="headerlink" href="#module-neuropy.internal_composite" title="Permalink to this headline"></a></h1>
<p>Submodule internal_utils.py includes the following functions: &lt;br&gt;
- <strong>construct_composite_score():</strong> Construct composite score with flexible type of aggregation. &lt;br&gt;
- <strong>construct_composite_score_multicore():</strong> Construct composite score function with multiprocessing. &lt;br&gt;
- <strong>_apply_composite_score():</strong> The worker function used in the construct_composite_score() function. &lt;br&gt;</p>
<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_composite.construct_composite_score">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_composite.</span></span><span class="sig-name descname"><span class="pre">construct_composite_score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">df:</span> <span class="pre">pandas.core.frame.DataFrame,</span> <span class="pre">composite_score_dict:</span> <span class="pre">typing.Dict[str,</span> <span class="pre">list],</span> <span class="pre">drop_input_features:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">mask_lower_cutoff:</span> <span class="pre">typing.Optional[typing.Dict[str,</span> <span class="pre">typing.Union[int,</span> <span class="pre">float]]]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">method:</span> <span class="pre">typing.Callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">mean&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/internal_composite.html#construct_composite_score"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_composite.construct_composite_score" title="Permalink to this definition"></a></dt>
<dd><p>Construct composite score with flexible type of aggregation.
Parameters
———-
df: pd.DataFrame</p>
<blockquote>
<div><p>dataframe containing Neurocast features</p>
</div></blockquote>
<dl class="simple">
<dt>composite_score_dict: dict</dt><dd><p>dictionary that specifies the features for each composite score. The keys represent the composite score name,
whereas the values are lists containing the features set used to construct the composite score.</p>
</dd>
<dt>drop_input_features: bool (default: False)</dt><dd><p>if True, the features used to construct the composite score are removed from the dataframe before it is
returned.</p>
</dd>
<dt>mask_lower_cutoff: Union[dict[str, list], None] (default: None)</dt><dd><p>Mask elements based on a cutoff value. The pair {key:value} denotes the column name used for the condition and
the cutoff value, respectively. For instance, {‘event_count’: 50} means that within the feature set used to
construct the composite score, all the rows where event_count &lt;= 50 will be set as np.nan.</p>
</dd>
<dt>method: Callable (default: np.mean)</dt><dd><p>Method passed to pd.DataFrame.apply(axis=1), used to aggregate the feature set contained in the values
of composite_score_dict. The input can be strings (e.g. ‘mean’), functions (e.g. np.mean) and
lambda functions (e.g. lambda row: row.sum()+1)</p>
</dd>
</dl>
<dl class="simple">
<dt>pd.Dataframe</dt><dd><p>The copy of the original dataframe containing the composite scores.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.internal_composite</span> <span class="kn">import</span> <span class="n">construct_composite_score</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load dataset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="p">(</span><span class="n">sns</span>
<span class="gp">... </span>       <span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;iris&#39;</span><span class="p">)</span>
<span class="gp">... </span>       <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">event_count</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">150</span><span class="p">))</span>
<span class="gp">... </span>      <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># construct two composited scores named SEPAL and PETAL using mean aggregation,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># and mask all value where event_count &lt;= 0.2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_out</span> <span class="o">=</span> <span class="n">construct_composite_score</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">composite_score_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;SEPAL&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;sepal_length&#39;</span><span class="p">,</span><span class="s1">&#39;sepal_width&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                                        <span class="s1">&#39;PETAL&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;petal_length&#39;</span><span class="p">,</span><span class="s1">&#39;petal_width&#39;</span><span class="p">]},</span>
<span class="gp">... </span>                                  <span class="n">mask_lower_cutoff</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;event_count&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">},</span>
<span class="gp">... </span>                                  <span class="n">method</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># construct two composite scores named SEPAL and PETAL using np.linalg.norm(ord=2).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_out</span> <span class="o">=</span> <span class="n">construct_composite_score</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">composite_score_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;SEPAL&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;sepal_length&#39;</span><span class="p">,</span><span class="s1">&#39;sepal_width&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                                        <span class="s1">&#39;PETAL&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;petal_length&#39;</span><span class="p">,</span><span class="s1">&#39;petal_width&#39;</span><span class="p">]},</span>
<span class="gp">... </span>                                  <span class="n">method</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="nb">ord</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_composite.construct_composite_score_multicore">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_composite.</span></span><span class="sig-name descname"><span class="pre">construct_composite_score_multicore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">df:</span> <span class="pre">pandas.core.frame.DataFrame,</span> <span class="pre">composite_score_dicts_list:</span> <span class="pre">typing.List[typing.Dict[str,</span> <span class="pre">typing.List]],</span> <span class="pre">drop_input_features:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">mask_lower_cutoff:</span> <span class="pre">typing.Optional[typing.Dict[str,</span> <span class="pre">typing.Union[int,</span> <span class="pre">float]]]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">method:</span> <span class="pre">typing.Callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">mean&gt;,</span> <span class="pre">n_cores:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">12</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/internal_composite.html#construct_composite_score_multicore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_composite.construct_composite_score_multicore" title="Permalink to this definition"></a></dt>
<dd><p>Construct composite score with flexible type of aggregation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>df: pd.DataFrame</strong></dt><dd><p>dataframe containing Neurocast features</p>
</dd>
<dt><strong>composite_score_dicts_list: list</strong></dt><dd><p>a list with dictionaries that specifies the features for each composite score. The keys represent the
composite score name, whereas the values are lists containing the feature sets used to construct
the composite score. e.g.
[{“comp_1”: [“feat_1”, “feat_2”, “feat_3”]},
{“comp_2”: [“feat_4”, “feat_5”, “feat_6”]},
{“comp_3”: [“feat_7”, “feat_8”, “feat_9”]},]</p>
</dd>
<dt><strong>drop_input_features: bool (default: False)</strong></dt><dd><p>if True, the features used to construct the composite score are discarded.</p>
</dd>
<dt><strong>mask_lower_cutoff: Union[dict[str, list], None] (default: None)</strong></dt><dd><p>Mask elements based on a cutoff value. The pair {key:value} denotes the column name used for the condition and
the cutoff value, respectively. For instance, {‘event_count’: 50} means that within the feature set used to
construct the composite score, all the rows where event_count &lt;= 50 will be set as np.nan.</p>
</dd>
<dt><strong>method: Callable (default: np.mean)</strong></dt><dd><p>Method passed to pd.DataFrame.apply(axis=1), used to aggregate the feature set contained in the values
of composite_score_dict. The input can be strings (e.g. ‘mean’) or functions (e.g. np.mean) Be aware that
the “multiprocessing” package does not allow “lambda” functions.</p>
</dd>
<dt><strong>n_cores: int</strong></dt><dd><p>An integer specifying the amount of cores to use when calculating the composite score</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>pd.Dataframe</dt><dd><p>The copy of the original dataframe containing the composite scores.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.internal_composite</span> <span class="kn">import</span> <span class="n">construct_composite_score_multicore</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load dataset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="p">(</span><span class="n">sns</span>
<span class="gp">... </span>       <span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;iris&#39;</span><span class="p">)</span>
<span class="gp">... </span>       <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">event_count</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">150</span><span class="p">))</span>
<span class="gp">... </span>      <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># construct two composited scores named SEPAL and PETAL using mean aggregation,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># and mask all value where event_count &lt;= 0.2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_out</span> <span class="o">=</span> <span class="n">construct_composite_score_multicore</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">composite_score_dicts_list</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;SEPAL&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;sepal_length&#39;</span><span class="p">,</span><span class="s1">&#39;sepal_width&#39;</span><span class="p">]},</span>
<span class="gp">... </span>                                                        <span class="p">{</span><span class="s1">&#39;PETAL&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;petal_length&#39;</span><span class="p">,</span><span class="s1">&#39;petal_width&#39;</span><span class="p">]}],</span>
<span class="gp">... </span>                                  <span class="n">mask_lower_cutoff</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;event_count&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">},</span>
<span class="gp">... </span>                                  <span class="n">method</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># construct two composite scores named SEPAL and PETAL using np.linalg.norm(ord=2).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_out</span> <span class="o">=</span> <span class="n">construct_composite_score_multicore</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">composite_score_dicts_list</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;SEPAL&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;sepal_length&#39;</span><span class="p">,</span><span class="s1">&#39;sepal_width&#39;</span><span class="p">]},</span>
<span class="gp">... </span>                                                        <span class="p">{</span><span class="s1">&#39;PETAL&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;petal_length&#39;</span><span class="p">,</span><span class="s1">&#39;petal_width&#39;</span><span class="p">]}],</span>
<span class="gp">... </span>                                  <span class="n">method</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="nb">ord</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_composite.flatten">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_composite.</span></span><span class="sig-name descname"><span class="pre">flatten</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/internal_composite.html#flatten"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_composite.flatten" title="Permalink to this definition"></a></dt>
<dd><p>Utility function to flatten a list of lists</p>
</dd></dl>

</section>
<section id="module-neuropy.internal_utils">
<span id="neuropy-internal-utils"></span><h1><code class="docutils literal notranslate"><span class="pre">neuropy.internal_utils</span></code><a class="headerlink" href="#module-neuropy.internal_utils" title="Permalink to this headline"></a></h1>
<p>Submodule internal_utils.py includes the following functions: &lt;br&gt;
- <strong>aws_data_extraction():</strong> Load data from specified AWS S3 Bucket. &lt;br&gt;
- <strong>assign_datetime_and_date():</strong> Assign datetime to timestamp and extract date. &lt;br&gt;
- <strong>select_keystroke_time_range():</strong> Get keystroke data from a specific time range based on a specified date
column. &lt;br&gt;
- <strong>_unpack_one_nested_json():</strong> Get data from column with lists of dict to multiple columns (e.g. ACM/health data) &lt;br&gt;
- <strong>prep_weather_df():</strong> Get weather data from nested format to multiple columns. &lt;br&gt;
- <strong>aws_bucket_search():</strong> List all available file paths and datasets on aws in a bucket or find all buckets. &lt;br&gt;
- <strong>api_send_request():</strong> Data util to request datasets from Neurocast data API. &lt;br&gt;
- <strong>api_send_request_in_chunks():</strong> Data util to request datasets from Neurocast data API in chunks
(for large files). &lt;br&gt;
- <strong>_prepare_health_data():</strong> Data util to pre-process raw health data. &lt;br&gt;
- <strong>_aggregate_health_data():</strong> Aggregation of raw health data. Required step for merging to keystroke dataframes. &lt;br&gt;
- <strong>merge_keystrokes_and_health():</strong> Function used to merge keystroke and health kit data whilst maintaining as much
data possible. &lt;br&gt;
- <strong>sql_data_extraction():</strong> Pulling data from the sql database. &lt;br&gt;
- <strong>aws_upload_data():</strong> Uploading csvs to the S3 buckets. &lt;br&gt;
- <strong>sql_show_column_information():</strong> Looking up column information of an available table in the sql database. &lt;br&gt;
- <strong>sql_show_tables():</strong> Looking up the available tables in the sql database. &lt;br&gt;</p>
<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_utils.api_send_request">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_utils.</span></span><span class="sig-name descname"><span class="pre">api_send_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">86400000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'keystroke_features_test'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/internal_utils.html#api_send_request"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_utils.api_send_request" title="Permalink to this definition"></a></dt>
<dd><p>Data util to request datasets from Neurocast’s data API.</p>
<p>It send a GET request to the API’s <cite>materialize</cite> endpoint.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>user_ids: List[int]</strong></dt><dd><p>A list of user ids of interest.</p>
</dd>
<dt><strong>time_window: List[str]</strong></dt><dd><p>A list of two strings: a start and end date in ISO format (YYYY-MM-DD or YYYY-M-D) delimiting a date range.
Start and end dates are included. E.g. [“2020-09-01”, “2020-09-30”].</p>
</dd>
<dt><strong>dataset_name: str</strong></dt><dd><p>A filename. Must be unique in <cite>s3://neurocast-vm-shared/&lt;user-name&gt;/</cite>, otherwise it’ll overwrite the existing
file.</p>
</dd>
<dt><strong>interval: int (default: 86400000)</strong></dt><dd><p>The level of aggregation in milliseconds. Popular intervals are: session (0), hour (3600000) and day (86400000).</p>
</dd>
<dt><strong>source: str (default: “keystroke_features_test”)</strong></dt><dd><p>Whether to request aggregated or raw data. Suppported values: <cite>keystroke_features</cite>, <cite>keystroke_features_test</cite>,
<cite>accelerometer_features</cite>, <cite>accelerometer_features_test</cite>, <cite>gyroscope_features</cite>, <cite>gyroscope_features_test</cite>,
<cite>raw</cite>.</p>
</dd>
<dt><strong>source_type: Union[str, None] (default: None)</strong></dt><dd><p>The kind of raw data to request. Only valid when <cite>source == “raw”</cite>. Supported values: <cite>keystrokes</cite>,
<cite>accelerometer</cite>, <cite>gyroscope</cite>, <cite>health</cite>, <cite>health2</cite>, <cite>adaptive_correction_moments</cite>, <cite>labels</cite>, <cite>steps</cite>,
<cite>st_results</cite>, <cite>weather</cite>.</p>
</dd>
<dt><strong>verbose: bool (default: True)</strong></dt><dd><p>Whether to print request payload and response.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>payload:  HTTP payload (json) passed to the API endpoint</dt><dd></dd>
<dt>status: whether the API call was successful ot not. Two possible outcomes: <cite>success</cite> and <cite>failed</cite></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.internal_utils</span> <span class="kn">import</span> <span class="n">api_send_request</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">payload</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">api_send_request</span><span class="p">(</span><span class="n">user_ids</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span>
<span class="gp">... </span>                                   <span class="n">time_window</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;2020-1-1&quot;</span><span class="p">,</span> <span class="s2">&quot;2020-1-10&quot;</span><span class="p">],</span>
<span class="gp">... </span>                                   <span class="n">dataset_name</span><span class="o">=</span><span class="s2">&quot;my_dataset&quot;</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">interval</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">source</span><span class="o">=</span><span class="s2">&quot;keystroke_features&quot;</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">source_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># {</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;timewindow&quot;: [&quot;2020-1-1&quot;, &quot;2020-1-10&quot;],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;dataset_name&quot;: &quot;my_dataset&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;user_ids&quot;: [3, 40],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;Neurocast-API-Key&quot;: &quot;HDWFEHFN32ALENFLKSJL41KFJWFNWLEGNJ8!NW&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;interval&quot;: 0,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;source&quot;: &quot;keystroke_features&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># }</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># &quot;success&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_utils.api_send_request_in_chunks">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_utils.</span></span><span class="sig-name descname"><span class="pre">api_send_request_in_chunks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">86400000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'keystroke_features_test'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'_part'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/internal_utils.html#api_send_request_in_chunks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_utils.api_send_request_in_chunks" title="Permalink to this definition"></a></dt>
<dd><p>Data util to request datasets from Neurocast’s data API in chunks.</p>
<p>Useful for large datasets, e.g. a year worth of session data or a month worth of raw data from many user.
Wrapper for api_send_request, sends multiple GET requests to the API’s <cite>materialize</cite> endpoint.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>user_ids: List[int]</strong></dt><dd><p>A list of user ids of interest.</p>
</dd>
<dt><strong>time_window: List[str]</strong></dt><dd><p>A list of two strings: a start and end date in ISO format (YYYY-MM-DD or YYYY-M-D) delimiting a date range.
Start and end dates are included. E.g. [“2020-09-01”, “2020-09-30”].</p>
</dd>
<dt><strong>dataset_name: str</strong></dt><dd><p>A filename. Must be unique in <cite>s3://neurocast-vm-shared/&lt;user-name&gt;/</cite>, otherwise it’ll overwrite the existing
file.</p>
</dd>
<dt><strong>interval: int (default: 86400000)</strong></dt><dd><p>The level of aggregation in milliseconds. Popular intervals are: session (0), hour (3600000) and day (86400000).</p>
</dd>
<dt><strong>source: str (default: “keystroke_features_test”)</strong></dt><dd><p>Whether to request aggregated or raw data. Suppported values: <cite>keystroke_features</cite>, <cite>keystroke_features_test</cite>,
<cite>accelerometer_features</cite>, <cite>accelerometer_features_test</cite>, <cite>gyroscope_features</cite>, <cite>gyroscope_features_test</cite>,
<cite>raw</cite>.</p>
</dd>
<dt><strong>source_type: Union[str, None] (default: None)</strong></dt><dd><p>The kind of raw data to request. Only valid when <cite>source == “raw”</cite>. Supported values: <cite>keystrokes</cite>,
<cite>accelerometer</cite>, <cite>gyroscope</cite>, <cite>health</cite>, <cite>health2</cite>, <cite>adaptive_correction_moments</cite>, <cite>labels</cite>, <cite>steps</cite>,
<cite>st_results</cite>, <cite>weather</cite>.</p>
</dd>
<dt><strong>chunk_size: int (default: 10)</strong></dt><dd><p>the number of days (size) in a chunk of data. E.g. if <cite>chunk_size == 5</cite> and
<a href="#id6"><span class="problematic" id="id7">`</span></a>time_window == [“2020-11-01”, “2020-11-10”], it will send two requests: [“2020-11-01”, “2020-11-05”]
and [“2020-11-06”, “2020-11-10”]. The different chunks will be saved in separate files,
with {suffix}_0, {suffix}_1, etc. appended to the filename.</p>
</dd>
<dt><strong>suffix: str (default: “_part”)</strong></dt><dd><p>optional sub-string appended at the end of each chunk’s filename. E.g. if suffix=”_chunk”, dataset_name=”dataset”
and there are 3 chunks, then filenames will be <cite>data_chunk-0</cite>, <cite>data_chunk-1</cite>, <cite>data_chunk-2</cite>.</p>
</dd>
<dt><strong>verbose: bool (default: True)</strong></dt><dd><p>Whether to print request payload and response.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>payload: list of HTTP payloads (json) passed to the API endpoint, one for each chunk file</dt><dd></dd>
<dt>status: list of strings indicating success (<cite>success</cite>) or failure (<cite>failed</cite>) of API calls, one for each chunk file</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.internal_utils</span> <span class="kn">import</span> <span class="n">api_send_request_in_chunks</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">payload</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">api_send_request_in_chunks</span><span class="p">(</span><span class="n">user_ids</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span>
<span class="gp">... </span>                                             <span class="n">time_window</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;2020-1-1&quot;</span><span class="p">,</span> <span class="s2">&quot;2020-1-10&quot;</span><span class="p">],</span>
<span class="gp">... </span>                                             <span class="n">dataset_name</span><span class="o">=</span><span class="s2">&quot;my_dataset&quot;</span><span class="p">,</span>
<span class="gp">... </span>                                             <span class="n">interval</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="gp">... </span>                                             <span class="n">source</span><span class="o">=</span><span class="s2">&quot;keystroke_features&quot;</span><span class="p">,</span>
<span class="gp">... </span>                                             <span class="n">source_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                                             <span class="n">chunk_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<span class="gp">... </span>                                             <span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;_chunk&quot;</span>
<span class="gp">... </span>                                             <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># [{</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;timewindow&quot;: [&quot;2020-1-1&quot;, &quot;2020-1-5&quot;],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;dataset_name&quot;: &quot;my_dataset_chunk-0&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;user_ids&quot;: [3, 40],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;Neurocast-API-Key&quot;: &quot;HDWFEHFN32ALENFLKSJL41KFJWFNWLEGNJ8!NW&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;interval&quot;: 0,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;source&quot;: &quot;keystroke_features&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># },</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># {</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;timewindow&quot;: [&quot;2020-1-6&quot;, &quot;2020-1-10&quot;],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;dataset_name&quot;: &quot;my_dataset_chunk-1&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;user_ids&quot;: [3, 40],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;Neurocast-API-Key&quot;: &quot;HDWFEHFN32ALENFLKSJL41KFJWFNWLEGNJ8!NW&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;interval&quot;: 0,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#    &quot;source&quot;: &quot;keystroke_features&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># }]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># [&quot;success&quot;, &quot;success&quot;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_utils.assign_datetime_and_date">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_utils.</span></span><span class="sig-name descname"><span class="pre">assign_datetime_and_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'timestamp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timezone_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'timeZoneOffset'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/internal_utils.html#assign_datetime_and_date"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_utils.assign_datetime_and_date" title="Permalink to this definition"></a></dt>
<dd><p>Create datetime object from unit timestamp column, takes timezone into account. Also adds a new column
with only a date object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>df: pd.DataFrame</strong></dt><dd></dd>
<dt><strong>time_column: ‘str’, default=’timestamp’</strong></dt><dd><p>The column with unit timestamps.</p>
</dd>
<dt><strong>timezone_column: ‘str’, default=’timeZoneOffset’</strong></dt><dd><p>The time zone expressed in ms.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>pd.DataFrame</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_utils.aws_bucket_search">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_utils.</span></span><span class="sig-name descname"><span class="pre">aws_bucket_search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">search_term</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'neurocast-vm-shared'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/internal_utils.html#aws_bucket_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_utils.aws_bucket_search" title="Permalink to this definition"></a></dt>
<dd><p>List all available file paths and datasets on aws in a bucket or find all buckets</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>search_term: str</strong></dt><dd><p>Search string for all elements in bucket</p>
</dd>
<dt><strong>bucket: str or None (default: “neurocast-vm-shared”)</strong></dt><dd><p>Bucket on S3 to look in. If None, all bucket names will be returned and search_term is ignored.</p>
</dd>
<dt><strong>regex: bool (default: False)</strong></dt><dd><p>Whether the search_term is a regex expression</p>
</dd>
<dt><strong>show: bool (default: True)</strong></dt><dd><p>Whether to print the objects/file paths that are found</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>aws_results: list</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.internal_utils</span> <span class="kn">import</span> <span class="n">aws_bucket_search</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Find all paths that contain a certain string</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res_list</span> <span class="o">=</span> <span class="n">aws_bucket_search</span><span class="p">(</span><span class="n">search_term</span><span class="o">=</span><span class="s1">&#39;Almer&#39;</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="s2">&quot;neurocast-vm-shared&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Find all buckets</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res_list</span> <span class="o">=</span> <span class="n">aws_bucket_search</span><span class="p">(</span><span class="n">bucket</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get all paths that include a folder structure</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res_list</span> <span class="o">=</span> <span class="n">aws_bucket_search</span><span class="p">(</span><span class="s1">&#39;[A-z]/&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Show unique folder names from the paths</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">res_list</span><span class="p">])</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Since this included empty folder names, get all elements from split</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">splitted_res_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">res_list</span> <span class="k">for</span> <span class="n">substring</span> <span class="ow">in</span> <span class="n">path</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get the subfolder names if folder name is missing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">else</span> <span class="n">line</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">try1</span> <span class="p">])</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_utils.aws_data_extraction">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_utils.</span></span><span class="sig-name descname"><span class="pre">aws_data_extraction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'neurocast-vm-shared'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/internal_utils.html#aws_data_extraction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_utils.aws_data_extraction" title="Permalink to this definition"></a></dt>
<dd><p>Load data from specified AWS S3 Bucket.
AWS access key should be loaded with name ‘AWS_KEY’, AWS secret key with name ‘AWS_SECRET_KEY’
Any added <cite>**kwargs</cite> will be passed to <cite>pandas.read_csv</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>filepath</strong><span class="classifier">str</span></dt><dd><p>Path on VM where data is saved.</p>
</dd>
<dt><strong>bucket</strong><span class="classifier">str</span></dt><dd><p>Initialized on vm-shared bucket.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>pd.DataFrame</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.internal_utils</span> <span class="kn">import</span> <span class="n">aws_data_extraction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">aws_data_extraction</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s1">&#39;Aleide/B2C-INDEX-user40-20190807-20191028.csv&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                           <span class="n">bucket</span><span class="o">=</span><span class="s1">&#39;neurocast-vm-shared&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_utils.aws_upload_data">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_utils.</span></span><span class="sig-name descname"><span class="pre">aws_upload_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upload_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'neurocast-vm-shared'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/internal_utils.html#aws_upload_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_utils.aws_upload_data" title="Permalink to this definition"></a></dt>
<dd><p>Upload a pandas data frame to an aws s3 bucket.
AWS access key should be loaded with name ‘AWS_KEY’, AWS secret key with name ‘AWS_SECRET_KEY’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>df: pd.DataFrame</strong></dt><dd><p>The name of the data frame to be uploaded to aws S3.</p>
</dd>
<dt><strong>upload_name</strong><span class="classifier">str</span></dt><dd><p>The name of the .csv to be saved. The suggested naming convention is:
{PROJECT_NAME}_users_{USERRANGE}_{AGGREGATIONLEVEL}_{DATATYPE}_{DATE_RANGE}.csv
e.g. APPSMS_users_363_488_day_keystroke_20180821_20210421.csv</p>
</dd>
<dt><strong>folder_name</strong><span class="classifier">str</span></dt><dd><p>The name of the folder where the data frame should be saved.</p>
</dd>
<dt><strong>bucket</strong><span class="classifier">str</span></dt><dd><p>A valid aws s3 bucket name - we generally use “neurocast-vm-shared”.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span><span class="p">,</span> <span class="n">find_dotenv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.internal_utils</span> <span class="kn">import</span> <span class="n">aws_upload_data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">load_dotenv</span><span class="p">(</span><span class="n">find_dotenv</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;iris&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">csv_name</span><span class="o">=</span><span class="s2">&quot;iris_test_df.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">folder_name</span><span class="o">=</span><span class="s2">&quot;TESTING_UPLOAD_FUNCTION&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Bucket</span><span class="o">=</span><span class="s1">&#39;neurocast-vm-shared&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aws_upload_data</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">upload_name</span><span class="o">=</span><span class="n">csv_name</span><span class="p">,</span> <span class="n">folder_name</span><span class="o">=</span><span class="n">folder_name</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="n">Bucket</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_utils.merge_keystrokes_and_health">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_utils.</span></span><span class="sig-name descname"><span class="pre">merge_keystrokes_and_health</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_raw_health</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">how</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'outer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agg_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/internal_utils.html#merge_keystrokes_and_health"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_utils.merge_keystrokes_and_health" title="Permalink to this definition"></a></dt>
<dd><p>Merge two dataframes (containing keystroke and health data) on user ID and date.</p>
<p>This function pre-processes and aggregates raw health data before merging. See <cite>_prepare_health_data()</cite> and
<cite>_aggregate_health_data()</cite> for more details on these steps. The existing <cite>date</cite> column in the <cite>df_keys</cite> data is
used for merging, or a new <cite>date</cite> column is generated based on the <cite>timestamp</cite> and <cite>timeZoneOffset</cite> columns.</p>
<p>This function only applies to datasets requested from the Neurocast’s Data API. It specifically supports data from
the following sources:</p>
<blockquote>
<div><ul class="simple">
<li><p>For aggregated keystroke features: <cite>keystroke_features</cite>, <cite>keystroke_features_test</cite></p></li>
<li><p>For raw health events: <cite>raw</cite> (source type: <cite>health2</cite>)</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>df_raw_health: pd.DataFrame</strong></dt><dd><p>dataframe containing raw health data</p>
</dd>
<dt><strong>df_keys: pd.Dataframe</strong></dt><dd><p>dataframe containing aggregated keystroke features</p>
</dd>
<dt><strong>how: str (default: “outer”)</strong></dt><dd><p>type of merge to be performed. Supported types are “outer”, “inner”, “left”, “right”, “cross”.
See [1] for more info. Note that “left” refers to <cite>df_keys</cite> in this case, and “right” refers to <cite>df_raw_health</cite>.</p>
</dd>
<dt><strong>agg_dict: Union[Dict[str, Tuple[str, str]], None] (default: None)</strong></dt><dd><p>dictionary of aggregated features in the form {“aggregated_feature_name”: (“feature”, “aggregate”)}.
If None, use the default set of aggregations. See <cite>_aggregate_health_data()</cite> more more details.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>pd.Dataframe</dt><dd><p>a dataframe with health and keytroke data aligned on user ID and date.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">References</p>
<p>[1] <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.merge.html">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.merge.html</a></p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.internal_utils</span> <span class="kn">import</span> <span class="n">aws_data_extraction</span><span class="p">,</span> <span class="n">merge_keystrokes_and_health</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_raw_health</span> <span class="o">=</span> <span class="n">aws_data_extraction</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;Natali/raw_health_20200101_20200110_all_users.csv&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_agg_keys</span> <span class="o">=</span> <span class="n">aws_data_extraction</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;Natali/aggregated_keys_20200101_20200110_all_users.csv&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">merge_keystrokes_and_health</span><span class="p">(</span><span class="n">df_raw_health</span><span class="o">=</span><span class="n">df_raw_health</span><span class="p">,</span>
<span class="go">....                                 df_keys=df_agg_keys)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_utils.prep_weather_df">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_utils.</span></span><span class="sig-name descname"><span class="pre">prep_weather_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weather_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'weather'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/internal_utils.html#prep_weather_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_utils.prep_weather_df" title="Permalink to this definition"></a></dt>
<dd><p>Get weather data from nested format to multiple columns</p>
<p>Note: rows for which all of [humidity, cloud, temp_c, feelslike_c, uv] are zero, are likely rows from people who
did not allow to track their location, and for whom thus no weather information was retrieved.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pd.DataFrame</strong></dt><dd><p>DataFrame with weather_column that has lists of dictionaries in each row</p>
</dd>
<dt><strong>weather_column: str (default: ‘weather’)</strong></dt><dd><p>Name of the column that has the weather data</p>
</dd>
<dt><strong>missing: float or in (default: np.nan)</strong></dt><dd><p>Value for missing data in output (empty strings in input)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>data: pd.DataFrame</dt><dd><p>DataFrame with columns that correspond to the keys of the dictionaries inside the weather.
All columns in the original DataFrame except the weather column are returned.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">weather_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;userId&quot;</span><span class="p">,</span><span class="s2">&quot;eventType&quot;</span><span class="p">,</span><span class="s2">&quot;timestamp&quot;</span><span class="p">,</span><span class="s2">&quot;platform&quot;</span><span class="p">,</span><span class="s2">&quot;dataVersion&quot;</span><span class="p">,</span><span class="s2">&quot;timeZoneOffset&quot;</span><span class="p">,</span> <span class="s2">&quot;projectID&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="s2">&quot;metadataState&quot;</span><span class="p">,</span> <span class="s2">&quot;weather&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_weather</span> <span class="o">=</span> <span class="p">(</span><span class="n">aws_data_extraction</span><span class="p">(</span><span class="s1">&#39;Gerrieke/TU_weather.csv&#39;</span><span class="p">)</span>
<span class="gp">... </span>             <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">weather_columns</span><span class="p">)</span>
<span class="gp">... </span>             <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;userId&#39;</span><span class="p">:</span> <span class="s1">&#39;user_id&#39;</span><span class="p">})</span>
<span class="gp">... </span>             <span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">prep_weather_df</span><span class="p">)</span>
<span class="gp">... </span>             <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">all_zero</span> <span class="o">=</span> <span class="p">((</span><span class="n">df_weather</span><span class="o">.</span><span class="n">humidity</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_weather</span><span class="o">.</span><span class="n">cloud</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_weather</span><span class="o">.</span><span class="n">temp_c</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span>
<span class="gp">... </span>            <span class="p">(</span><span class="n">df_weather</span><span class="o">.</span><span class="n">feelslike_c</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_weather</span><span class="o">.</span><span class="n">uv</span><span class="o">==</span><span class="mi">0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_weather</span> <span class="o">=</span> <span class="n">df_weather</span><span class="p">[</span><span class="o">~</span><span class="n">all_zero</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_utils.replace_default_values_with_nan">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_utils.</span></span><span class="sig-name descname"><span class="pre">replace_default_values_with_nan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[-</span> <span class="pre">95.0,</span> <span class="pre">-</span> <span class="pre">96.0,</span> <span class="pre">-</span> <span class="pre">97.0,</span> <span class="pre">-</span> <span class="pre">98.0,</span> <span class="pre">-</span> <span class="pre">99.0,</span> <span class="pre">'1-1-2999']</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/internal_utils.html#replace_default_values_with_nan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_utils.replace_default_values_with_nan" title="Permalink to this definition"></a></dt>
<dd><p>Replaces default values with Nan values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>df: pd.DataFrame</strong></dt><dd></dd>
<dt><strong>replace_values: List</strong></dt><dd><p>Specify which values need to be replaced with Nans.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>pd.DataFrame</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_utils.select_keystroke_time_range">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_utils.</span></span><span class="sig-name descname"><span class="pre">select_keystroke_time_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_quest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">days_before</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">days_after</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quest_date_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'date'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_date_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'date'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pandas.core.frame.DataFrame</span></span></span><a class="reference internal" href="_modules/neuropy/internal_utils.html#select_keystroke_time_range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_utils.select_keystroke_time_range" title="Permalink to this definition"></a></dt>
<dd><p>Merge daily keystroke features (<cite>df_keys</cite>) to a questionaire dataset (<cite>df_quest</cite>) on <cite>user_id</cite> and <cite>checkpoint</cite>.
The user must specify how many days worth of keystroke features will be selected BEFORE and AFTER each checkpoint.</p>
<p>In case that one would want days before but not days after checkpoints, set <cite>days_after=0</cite>.
If <cite>days_before=0</cite> and <cite>days_after=0</cite>, same date is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>df_keys: pd.DataFrame</strong></dt><dd><p>daily aggregates of keystroke data in the standard form of Neurocast’s API.</p>
</dd>
<dt><strong>df_quest: pd.DataFrame</strong></dt><dd><p>data frame with questionnaire.</p>
</dd>
<dt><strong>days_before: int (default: 0)</strong></dt><dd><p>number of days before checkpoint.</p>
</dd>
<dt><strong>days_after: int (default: 0)</strong></dt><dd><p>number of days after checkpoint.</p>
</dd>
<dt><strong>keys_date_column: str (default: “date”)</strong></dt><dd><p>date column name from <cite>df_keys</cite> (in date or datetime format).</p>
</dd>
<dt><strong>quest_date_column: str (default: “date”)</strong></dt><dd><p>date column name from <cite>df_quest</cite> (in date or datetime format).</p>
</dd>
<dt><strong>checkpoint_column: Union[str, None] (default: None)</strong></dt><dd><p>reference date column name from <cite>df_quest</cite> (in date or datetime format) that is used to select data.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>pd.DataFrame</dt><dd><p>Merged df with data points wihtin selected days.</p>
</dd>
</dl>
</dd>
</dl>
<p>…     fetch_poms_dataset()
…     .pipe(melt_multiple_test_dates, checkpoint_column={“m03”: 1} end_points=[‘HADS_anxiety’, ‘HADS_total’])
…     )
&gt;&gt;&gt; df_m03_14days_before = (
…        aws_data_extraction(“Natali/VUmc_daily-aggs_363-500_20180821-20200114.csv”)
…        .pipe(assign_datetime_and_date)
…        .pipe(select_keystroke_time_range,
…        df_quest=df_quest, days_before=15, days_after=0, quest_date_column=”test_date”)
…)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_utils.sql_data_extraction">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_utils.</span></span><span class="sig-name descname"><span class="pre">sql_data_extraction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'metadata_states'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/internal_utils.html#sql_data_extraction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_utils.sql_data_extraction" title="Permalink to this definition"></a></dt>
<dd><p>Load data from a specific sql table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>connection_string</strong><span class="classifier">str</span></dt><dd><p>An sql connection string with the format:
‘mysql+pymysql://NAME:PASSWORD&#64;URL’</p>
</dd>
<dt><strong>table_name</strong><span class="classifier">str</span></dt><dd><p>the name of an sql table, to find out available sql tables run the sql_show_tables() function</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>pd.DataFrame</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span><span class="p">,</span> <span class="n">find_dotenv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.internal_utils</span> <span class="kn">import</span> <span class="n">sql_data_extraction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">load_dotenv</span><span class="p">(</span><span class="n">find_dotenv</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connect_string</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;string_HOST_neuro_users&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sql_df</span> <span class="o">=</span> <span class="n">sql_data_extraction</span><span class="p">(</span><span class="n">connection_string</span><span class="o">=</span><span class="n">connect_string</span><span class="p">,</span>
<span class="gp">... </span>                             <span class="n">table_name</span> <span class="o">=</span> <span class="s1">&#39;projects&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_utils.sql_show_column_information">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_utils.</span></span><span class="sig-name descname"><span class="pre">sql_show_column_information</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'metadata_states'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/internal_utils.html#sql_show_column_information"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_utils.sql_show_column_information" title="Permalink to this definition"></a></dt>
<dd><p>Return column information from a table in sql</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>connection_string</strong><span class="classifier">str</span></dt><dd><p>An sql connection string with the format:
‘mysql+pymysql://NAME:PASSWORD&#64;URL’</p>
</dd>
<dt><strong>table_name</strong><span class="classifier">str</span></dt><dd><p>the name of an sql table, to find out available sql tables run the sql_show_tables() function</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>pd.DataFrame</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span><span class="p">,</span> <span class="n">find_dotenv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.internal_utils</span> <span class="kn">import</span> <span class="n">sql_show_column_information</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">load_dotenv</span><span class="p">(</span><span class="n">find_dotenv</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connect_string</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;string_HOST_neuro_users&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">column_info_df</span> <span class="o">=</span> <span class="n">sql_show_column_information</span><span class="p">(</span><span class="n">connection_string</span><span class="o">=</span><span class="n">connect_string</span><span class="p">,</span>
<span class="gp">... </span>                                             <span class="n">table_name</span><span class="o">=</span><span class="s1">&#39;projects&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.internal_utils.sql_show_tables">
<span class="sig-prename descclassname"><span class="pre">neuropy.internal_utils.</span></span><span class="sig-name descname"><span class="pre">sql_show_tables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/internal_utils.html#sql_show_tables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.internal_utils.sql_show_tables" title="Permalink to this definition"></a></dt>
<dd><p>Return all available tables found within an sql connection</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>connection_string</strong><span class="classifier">str</span></dt><dd><p>An sql connection string with the format:
‘mysql+pymysql://NAME:PASSWORD&#64;URL’</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>pd.DataFrame</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span><span class="p">,</span> <span class="n">find_dotenv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.internal_utils</span> <span class="kn">import</span> <span class="n">sql_show_tables</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">load_dotenv</span><span class="p">(</span><span class="n">find_dotenv</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connect_string</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;string_HOST_neuro_users&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">column_info_df</span> <span class="o">=</span> <span class="n">sql_show_tables</span><span class="p">(</span><span class="n">connection_string</span><span class="o">=</span><span class="n">connect_string</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-neuropy.machine_learning_classification">
<span id="neuropy-machine-learning-classification"></span><h1><code class="docutils literal notranslate"><span class="pre">neuropy.machine_learning_classification</span></code><a class="headerlink" href="#module-neuropy.machine_learning_classification" title="Permalink to this headline"></a></h1>
<p>Submodule machine_learning_classification.py includes the following functions: &lt;br&gt;
- <strong>plot_decision_boundary():</strong>  Generate a simple plot of the decision boundary of a classifier. &lt;br&gt;
- <strong>_bootstrap_auc():</strong> Internal function to bootstrap auc &lt;br&gt;
- <strong>summary_performance_metrics_classification():</strong> Summary evaluation metrics specific to a binary classification. &lt;br&gt;</p>
<dl class="py function">
<dt class="sig sig-object py" id="neuropy.machine_learning_classification.plot_decision_boundary">
<span class="sig-prename descclassname"><span class="pre">neuropy.machine_learning_classification.</span></span><span class="sig-name descname"><span class="pre">plot_decision_boundary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend_title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/machine_learning_classification.html#plot_decision_boundary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.machine_learning_classification.plot_decision_boundary" title="Permalink to this definition"></a></dt>
<dd><p>Generate a simple plot of the decision boundary of a classifier.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>X</strong><span class="classifier">array-like, shape (n_samples, n_features)</span></dt><dd><p>Classifier vector, where n_samples is the number of samples and
n_features is the number of features.</p>
</dd>
<dt><strong>y</strong><span class="classifier">array-like, shape (n_samples)</span></dt><dd><p>Target relative to X for classification. Datatype should be integers.</p>
</dd>
<dt><strong>clf</strong><span class="classifier">scikit-learn algorithm</span></dt><dd><p>An object that has the <cite>predict</cite> and <cite>predict_proba</cite> methods</p>
</dd>
<dt><strong>h</strong><span class="classifier">int (default: 0.05)</span></dt><dd><p>Step size in the mesh</p>
</dd>
<dt><strong>title</strong><span class="classifier">string</span></dt><dd><p>Title for the plot.</p>
</dd>
<dt><strong>legend_title</strong><span class="classifier">string</span></dt><dd><p>Legend title for the plot.</p>
</dd>
<dt><strong>figsize: tuple (default: (11.7, 8.27))</strong></dt><dd><p>Width and height of the figure in inches</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>boundaries: Figure</dt><dd><p>Properties of the figure can be changed later, e.g. use <cite>boundaries.axes[0].set_ylim(0,100)</cite> to change ylim</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.svm</span> <span class="kn">import</span> <span class="n">SVC</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;iris&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># convert the target from string to category to numeric as sklearn cannot handle strings as target</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;species&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clf</span> <span class="o">=</span> <span class="n">SVC</span><span class="p">(</span><span class="n">kernel</span><span class="o">=</span><span class="s2">&quot;rbf&quot;</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">probability</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">plot_decision_boundary</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">clf</span><span class="o">=</span><span class="n">clf</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Decision Boundary&#39;</span><span class="p">,</span> <span class="n">legend_title</span> <span class="o">=</span> <span class="s2">&quot;Species&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># plt.show()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.machine_learning_classification.summary_performance_metrics_classification">
<span class="sig-prename descclassname"><span class="pre">neuropy.machine_learning_classification.</span></span><span class="sig-name descname"><span class="pre">summary_performance_metrics_classification</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X_test</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bootstraps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fold_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">69420</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/machine_learning_classification.html#summary_performance_metrics_classification"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.machine_learning_classification.summary_performance_metrics_classification" title="Permalink to this definition"></a></dt>
<dd><p>Summary of different evaluation metrics specific to a single class classification learning problem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>model: sklearn.model</strong></dt><dd><p>A fitted sklearn model with predict() and predict_proba() methods.</p>
</dd>
<dt><strong>X_test: pd.DataFrame</strong></dt><dd><p>A data frame used to run predict the target values (y_pred).</p>
</dd>
<dt><strong>y_true: pd.Series or np.arrays</strong></dt><dd><p>Binary true values.</p>
</dd>
<dt><strong>bootstraps: int</strong></dt><dd></dd>
<dt><strong>fold_size: int</strong></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>pd.DataFrame</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The function returns the following metrics:
- true positive (TP): The model classifies the example as positive, and the actual label also positive.
- false positive (FP): The model classifies the example as positive, but the actual label is negative.
- true negative (TN): The model classifies the example as negative, and the actual label is also negative.
- false negative (FN): The model classifies the example as negative, but the label is actually positive.
- accuracy: The fractions of predictions the model got right.
- prevalance: The proportion of positive examples. Where y=1.
- sensitivity: The probability that our test outputs positive given that the case is actually positive.
- specificity: The probability that the test outputs negative given that the case is actually negative.
- positive predictive value: The proportion of positive predictions that are true positives.
- negative predictive value: The proportion of negative predictions that are true negatives.
- auc: A measure of goodness of fit.
- bootstrapped auc: The bootstrap estimates the uncertainty by resampling the dataset with replacement.
- F1: The harmonic mean of the precision and recall, where an F1 score reaches its best value at 1 (perfect precision and recall) and worst at 0.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">datasets</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsClassifier</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">load_breast_cancer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">feature_names</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">target</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">target</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clf</span> <span class="o">=</span> <span class="n">KNeighborsClassifier</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_pred</span> <span class="o">=</span> <span class="n">clf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_performance_metrics_classification</span><span class="p">(</span><span class="n">y_true</span><span class="o">=</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="o">=</span><span class="n">y_pred</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-neuropy.machine_learning_regression">
<span id="neuropy-machine-learning-regression"></span><h1><code class="docutils literal notranslate"><span class="pre">neuropy.machine_learning_regression</span></code><a class="headerlink" href="#module-neuropy.machine_learning_regression" title="Permalink to this headline"></a></h1>
<p>Submodule machine_learning_regression.py includes the following functions: &lt;br&gt;
- <strong>test_performance():</strong> Compute p-values for parameters of the estimator. &lt;br&gt;
- <strong>display_cv_plot():</strong> Display the results of the cross validation for regularized ols. &lt;br&gt;
- <strong>display_shrinkage_plot():</strong> Display the results of the cross validation for regularized OLS. &lt;br&gt;
- <strong>ols_regularized():</strong> Linear model - Linear Regression with crossvalidation and regularization. &lt;br&gt;</p>
<dl class="py function">
<dt class="sig sig-object py" id="neuropy.machine_learning_regression.display_cv_plot">
<span class="sig-prename descclassname"><span class="pre">neuropy.machine_learning_regression.</span></span><span class="sig-name descname"><span class="pre">display_cv_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cv_result</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scoring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">best_result</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decide_scoring</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/machine_learning_regression.html#display_cv_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.machine_learning_regression.display_cv_plot" title="Permalink to this definition"></a></dt>
<dd><p>Display the results of the cross validation for regularized OLS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>cv_result: pd.DataFrame</strong></dt><dd><p>DataFrame with mean/score and std/score in columns for score in <cite>scoring</cite></p>
</dd>
<dt><strong>scoring: str or list of str</strong></dt><dd><p>(List with) scoring methods from cross validation</p>
</dd>
<dt><strong>best_result: int</strong></dt><dd><p>Index of <cite>cv_result</cite> with the best result</p>
</dd>
<dt><strong>decide_scoring: str</strong></dt><dd></dd>
<dt><strong>figsize: tuple</strong></dt><dd><p>Tuple with width and height of the figure</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>plot_cv: matplotlib.figure.Figure</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.machine_learning_regression.display_shrinkage_plot">
<span class="sig-prename descclassname"><span class="pre">neuropy.machine_learning_regression.</span></span><span class="sig-name descname"><span class="pre">display_shrinkage_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha_space</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regularization_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/machine_learning_regression.html#display_shrinkage_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.machine_learning_regression.display_shrinkage_plot" title="Permalink to this definition"></a></dt>
<dd><p>Display the results of the cross validation for regularized ols</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>reg: fitted sklearn model for which the alpha can be changes</strong></dt><dd></dd>
<dt><strong>X: predictors</strong></dt><dd></dd>
<dt><strong>y: outcome</strong></dt><dd></dd>
<dt><strong>alpha_space: list</strong></dt><dd><p>Alphas to be plotted on x</p>
</dd>
<dt><strong>regularization_type: str</strong></dt><dd><p>Description of the type, e.g. ‘ridge’ or ‘lasso’</p>
</dd>
<dt><strong>figsize: tuple</strong></dt><dd><p>Tuple with width and height of the figure</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>shrinkage_plot: matplotlib.figure.Figure</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.machine_learning_regression.ols_regularized">
<span class="sig-prename descclassname"><span class="pre">neuropy.machine_learning_regression.</span></span><span class="sig-name descname"><span class="pre">ols_regularized</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_intercept</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regularization_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ridge'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha_space</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hold_out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hold_out_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hold_out_random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hold_out_stratify</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scoring</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['neg_mean_absolute_error',</span> <span class="pre">'neg_mean_squared_error',</span> <span class="pre">'r2']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decide_scoring</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'test_neg_mean_squared_error'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.7,</span> <span class="pre">8.27)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/machine_learning_regression.html#ols_regularized"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.machine_learning_regression.ols_regularized" title="Permalink to this definition"></a></dt>
<dd><p>Linear model - Linear Regression with crossvalidation and regularization</p>
<p>The model is fitted on a use_sample and evaluated on the hold_out. If hold_out is specified, complete X and y are
the use_sample. If hold_out is not specified, X and y are splitted in the use_sample and hold_out sample using
test_test_split).
If crossvalidation is applied, the use_sample will be split in training and test samples to find the optimal alpha
for the regularization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>X: pandas.DataFrame</strong></dt><dd><p>Predictors</p>
</dd>
<dt><strong>y: pandas.Series</strong></dt><dd><p>Target</p>
</dd>
<dt><strong>fit_intercept: bool (default: True)</strong></dt><dd><p>whether to calculate the intercept for this model.
If set to False, no intercept will be used in calculations (e.g. data is expected to be already centered).</p>
</dd>
<dt><strong>regularization_type: str {‘ridge’, ‘lasso’, ‘elasticNet’} or None, default ‘ridge’</strong></dt><dd></dd>
<dt><strong>alpha_space: float, numpy.array or None (default: None)</strong></dt><dd><p>Regularization strength (or options to try in cross validation).
If None: <cite>np.logspace(-4, 0, 50)</cite> for Ridge regression and <cite>np.arange(0.0001, 0.5, 0.05)</cite> for Lasso
If numpy.array: array of regularization options
If float: regularization strength to use. No cross validation is applied.</p>
</dd>
<dt><strong>hold_out: optional, dict {X_hold: pd.DataFrame, y_hold: pd.Series}</strong></dt><dd><p>Dictionary with hold out data set to check performance of the model.</p>
</dd>
<dt><strong>hold_out_size: float (default: 0.3)</strong></dt><dd><p>Size of test subset used by <cite>sklearn.model_selection.train_test_split</cite></p>
</dd>
<dt><strong>hold_out_random_state: int or None (default: None)</strong></dt><dd><p>Seed for the random number generated used by <cite>sklearn.model_selection.train_test_split</cite></p>
</dd>
<dt><strong>hold_out_stratify: array-like or None (default: None)</strong></dt><dd><p>If not none, this is used as class labels for a stratified split by <cite>sklearn.model_selection.train_test_split</cite></p>
</dd>
<dt><strong>cv: int, cross-validation generator, an iterable, or None (default: 5)</strong></dt><dd><p>If None: no crossvalidation is applied
For all other options: see sklearn.model_selection.cross_validate</p>
</dd>
<dt><strong>groups: array-like, with shape (n_samples) or None (default: None)</strong></dt><dd><p>Group labels for samples used in conjunction with a ‘Group’ cv instance (sklearn.model_selection.cross_validate)</p>
</dd>
<dt><strong>scoring: list (default: [‘neg_mean_absolute_error’, ‘neg_mean_squared_error’, ‘r2’])</strong></dt><dd><p>Metrics that are used in the cross validation</p>
</dd>
<dt><strong>decide_scoring: str (default: ‘test_neg_mean_squared_error’)</strong></dt><dd><p>Scoring metric that should be used to select the best model in the cross validation</p>
</dd>
<dt><strong>plot: bool (default: False)</strong></dt><dd><p>Whether to plot the result from cross validation / different alpha’s</p>
</dd>
<dt><strong>show: bool (default: True)</strong></dt><dd><p>Whether to show the performance of the final model using <cite>test_performance</cite></p>
</dd>
<dt><strong>figsize: tuple</strong></dt><dd><p>Tuple with width and height of the figure</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>reg_performance: dict</dt><dd><p>Dictionary with keys ‘fitting’: dict with model performance on hold_out and ‘df_coef’: DataFrame with values of
the coefficients on the hold_out. If cv=True, the dictionary also contains ‘cv_results’: Series with the mean
and std performance during the crossvalidation.</p>
</dd>
<dt>optimal_alpha_plot: None or Figure</dt><dd><p>If cv=True, Figure that shows the model performance using different alphas for the regularization</p>
</dd>
<dt>shrinkage_plot: None or Figure</dt><dd><p>If more than one value for alpha_space is provided, Figure that shows the coefficients for different alphas on
the entire training set (i.e. all data except hold_out). If nr of coefficients &lt; 8, Neurocast colours used.</p>
</dd>
<dt>reg: sklearn.linear_model instance</dt><dd><p>The final fitted model (e.g. a Lasso)</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">datasets</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">diabetes</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">load_diabetes</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">diabetes</span><span class="o">.</span><span class="n">data</span><span class="p">[:</span><span class="mi">150</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="s1">&#39;BMI&#39;</span><span class="p">,</span> <span class="s1">&#39;BP&#39;</span><span class="p">,</span> <span class="s1">&#39;S1&#39;</span><span class="p">,</span> <span class="s1">&#39;S2&#39;</span><span class="p">,</span> <span class="s1">&#39;S3&#39;</span><span class="p">,</span> <span class="s1">&#39;S4&#39;</span><span class="p">,</span> <span class="s1">&#39;S5&#39;</span><span class="p">,</span> <span class="s1">&#39;S6&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">diabetes</span><span class="o">.</span><span class="n">target</span><span class="p">[:</span><span class="mi">150</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ols_results</span><span class="p">,</span> <span class="n">plot1</span><span class="p">,</span> <span class="n">plot2</span><span class="p">,</span> <span class="n">fitted_model</span> <span class="o">=</span> <span class="n">ols_regularized</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.machine_learning_regression.test_performance">
<span class="sig-prename descclassname"><span class="pre">neuropy.machine_learning_regression.</span></span><span class="sig-name descname"><span class="pre">test_performance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">estimator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X_test</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_test</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">named_step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/machine_learning_regression.html#test_performance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.machine_learning_regression.test_performance" title="Permalink to this definition"></a></dt>
<dd><p>Compute p-values for parameters of the estimator (sklearn regressor)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>estimator</strong></dt><dd><p>Fitted estimator from sklearn, e.g. sklearn.linear_model.LinearRegression</p>
</dd>
<dt><strong>X_test: array-like, shape (n_samples, n_features)</strong></dt><dd><p>Predictors</p>
</dd>
<dt><strong>y_test: array-like, shape (n_samples)</strong></dt><dd><p>Target</p>
</dd>
<dt><strong>show: bool (default: True)</strong></dt><dd><p>Whether to print the results</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>dict</dt><dd><p>A <cite>dict</cite> with keys ‘fitting’ (type: dict) and ‘df_coef’ (type: pandas.Dataframe) containing information on the
model performance with regards to the test data</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LinearRegression</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">datasets</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">coef</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">make_regression</span><span class="p">(</span><span class="n">n_samples</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">n_features</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">coef</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bias</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">effective_rank</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">X</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.30</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reg</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reg</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output</span> <span class="o">=</span> <span class="n">test_performance</span><span class="p">(</span><span class="n">reg</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-neuropy.machine_learning_utils">
<span id="neuropy-machine-learning-utils"></span><h1><code class="docutils literal notranslate"><span class="pre">neuropy.machine_learning_utils</span></code><a class="headerlink" href="#module-neuropy.machine_learning_utils" title="Permalink to this headline"></a></h1>
<p>Submodule machine_learning_utils.py includes the following functions. &lt;br&gt;
- <strong>summary_grid_search():</strong> Plot train and test performance of models for values of hyperparameter &lt;br&gt;
- <strong>plot_splits_grid_search():</strong> Plot train and test performance at each split in CV for (best) model &lt;br&gt;</p>
<dl class="py function">
<dt class="sig sig-object py" id="neuropy.machine_learning_utils.plot_splits_grid_search">
<span class="sig-prename descclassname"><span class="pre">neuropy.machine_learning_utils.</span></span><span class="sig-name descname"><span class="pre">plot_splits_grid_search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scoring</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'score'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">10)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hspace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/machine_learning_utils.html#plot_splits_grid_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.machine_learning_utils.plot_splits_grid_search" title="Permalink to this definition"></a></dt>
<dd><p>Plot train and test performance at each split in CV for (best) model in GridSearchCV / RandomizedSearchCV</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>grid: fitted sklearn.model_selection.GridSearchCV or RandomizedSearchCV object</strong></dt><dd></dd>
<dt><strong>model_index: int or None (default: None)</strong></dt><dd><p>Index of the chosen model. If None, <a href="#id8"><span class="problematic" id="id9">grid.best_index_</span></a> will be used</p>
</dd>
<dt><strong>scoring: str or list (default: ‘score’)</strong></dt><dd><p>Scoring method to be plotted. If one scoring method was used in the grid search, this should be
‘score’, but if multiple scoring methods were added, choose one or more of them. E.g. ‘accuracy’, ‘r2’ or a list
[‘accuracy’, ‘f1’]. If scoring is a list, multiple subplots will be added.</p>
</dd>
<dt><strong>figsize: tuple (default: (15,10))</strong></dt><dd><p>Size of the figure</p>
</dd>
<dt><strong>ylim: tuple or list or None(default: None)</strong></dt><dd><p>Limits for the y axis in all plots. If a tuple, this will be repeated for every subplot. If a list of tuples, it
should have the length of ‘scoring’. Different ylims can be used for different subplots, e.g. [(0,1), (-1, 1)]</p>
</dd>
<dt><strong>hspace: float (default: 0.2)</strong></dt><dd><p>Space between subplots</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>fig: matplotlib.figure.Figure</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">Pipeline</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsClassifier</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">GridSearchCV</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_breast_cancer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.machine_learning_utils</span> <span class="kn">import</span> <span class="n">plot_splits_grid_search</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">KFold</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get training data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span> <span class="o">=</span> <span class="n">load_breast_cancer</span><span class="p">(</span><span class="n">return_X_y</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Simple pipeline</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([</span>
<span class="gp">... </span>   <span class="p">(</span><span class="s1">&#39;knn&#39;</span><span class="p">,</span> <span class="n">KNeighborsClassifier</span><span class="p">())])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">param_grid</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span><span class="s1">&#39;knn__n_neighbors&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
<span class="gp">... </span><span class="s1">&#39;knn__leaf_size&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">]</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Grid search for pipeline with 5 splits</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gridCV</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">pipeline</span><span class="p">,</span>
<span class="gp">... </span><span class="n">param_grid</span> <span class="o">=</span> <span class="n">param_grid</span><span class="p">,</span>
<span class="gp">... </span><span class="n">n_jobs</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span>
<span class="gp">... </span><span class="n">cv</span> <span class="o">=</span> <span class="n">KFold</span><span class="p">(</span><span class="n">n_splits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">50</span><span class="p">),</span>
<span class="gp">... </span><span class="n">refit</span> <span class="o">=</span> <span class="s1">&#39;f1&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">scoring</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;f1&#39;</span><span class="p">,</span> <span class="s1">&#39;roc_auc&#39;</span><span class="p">],</span>
<span class="gp">... </span><span class="n">return_train_score</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">gridCV</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span> <span class="o">=</span> <span class="n">plot_splits_grid_search</span><span class="p">(</span><span class="n">gridCV</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;f1&#39;</span><span class="p">,</span> <span class="s1">&#39;roc_auc&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># _ = plt.show()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.machine_learning_utils.summary_grid_search">
<span class="sig-prename descclassname"><span class="pre">neuropy.machine_learning_utils.</span></span><span class="sig-name descname"><span class="pre">summary_grid_search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_param</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scoring</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'score'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">10)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_std</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hspace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/machine_learning_utils.html#summary_grid_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.machine_learning_utils.summary_grid_search" title="Permalink to this definition"></a></dt>
<dd><p>Plot train and test performance of models for values of hyperparameter in GridSearchCV / RandomizedSearchCV</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>grid: fitted sklearn.model_selection.GridSearchCV or sklearn.model_selection.RandomizedSearchCV object</strong></dt><dd></dd>
<dt><strong>x_param: str</strong></dt><dd><p>Hyperparameter to be used on x axis of the plot(s), e.g. ‘n_neighbors’ or ‘C’</p>
</dd>
<dt><strong>step: str (default: ‘’)</strong></dt><dd><p>The named step in the sklearn pipeline with the hyperparameter of interest. E.g. ‘regression’ or, when a voting
regressor is used ‘regression__svr’ to indicate the svr wihthin the voting regressor.</p>
</dd>
<dt><strong>selection: None or list (default: None)</strong></dt><dd><p>Select only those models from the GridSearchCV object for which the hyperparameter (first element of the list)
is equal to value (second element of the list), hyperparameter should be available at ‘step’ in the sklearn
pipeline. E.g. [‘weights’, ‘uniform’]</p>
</dd>
<dt><strong>scoring: str or list (default: ‘score’)</strong></dt><dd><p>Scoring method to be plotted. If one scoring method was used in the grid search, this should be
‘score’, but if multiple scoring methods were added, choose one or more of them. E.g. ‘accuracy’, ‘r2’ or a list
[‘accuracy’, ‘f1’]. If scoring is a list, multiple subplots will be added.</p>
</dd>
<dt><strong>figsize: tuple (default: (15,10))</strong></dt><dd><p>Size of the figure</p>
</dd>
<dt><strong>ylim: tuple or list or None(default: None)</strong></dt><dd><p>Limits for the y axis in all plots. If a tuple, this will be repeated for every subplot. If a list of tuples, it
should have the length of ‘scoring’. Different ylims can be used for different subplots, e.g. [(0,1), (-1, 1)]</p>
</dd>
<dt><strong>add_std: bool (default: True)</strong></dt><dd><p>Whether to areas should be added that show the standard deviation for the different cross validations.</p>
</dd>
<dt><strong>hspace: float (default: 0.2)</strong></dt><dd><p>Space between subplots</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>fig: matplotlib.figure.Figure</dt><dd><p>plot with performance in train and test splits for grid search. Note that the ‘best hyperparameters’ can be
defined in two ways. First, the value for the hyperparamter from the best model from the grid search (labelled
with ‘best test within CV sklearn’) is shown in the plot and summary. Second, the results were grouped by all
available values of the hyperparameters and avaraged. The hyperparamter value with avarage best performance is
shown in the plot and summary too.</p>
</dd>
<dt>summary: pd.Dataframe</dt><dd><p>dataframe with results best models: optimal parameters and corrsponding performance</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">Pipeline</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">VotingRegressor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.svm</span> <span class="kn">import</span> <span class="n">SVR</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsRegressor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">RandomizedSearchCV</span><span class="p">,</span> <span class="n">KFold</span><span class="p">,</span> <span class="n">GridSearchCV</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_boston</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.machine_learning_utils</span> <span class="kn">import</span> <span class="n">summary_grid_search</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
<p># Get training data regression
&gt;&gt;&gt; X_train_reg, y_train_reg = load_boston(return_X_y=True)</p>
<p># Example1: Pipeline with voting regressor
&gt;&gt;&gt; pipeline = Pipeline([(‘regression’, VotingRegressor([
…                     (‘svr’, SVR(gamma=’scale’)),
…                     (‘knn’, KNeighborsRegressor())]))])</p>
<p># set hyperparameter range
&gt;&gt;&gt; param_grid = {
… ‘regression__svr__C’: np.linspace(0.1, 2, 19),
… ‘regression__knn__n_neighbors’: [2, 3, 4, 5, 6],
… ‘regression__knn__weights’: [‘uniform’, ‘distance’],
… }</p>
<p># Example with Full grid search with multiple scoring methods
&gt;&gt;&gt; gridCV = GridSearchCV(estimator=pipeline,
… param_grid = param_grid,
… n_jobs = -4,
… cv = KFold(n_splits=3, shuffle=True, random_state=42),
… refit = ‘r2’,
… scoring = [‘neg_mean_absolute_error’, ‘r2’, ‘neg_mean_squared_error’],
… return_train_score = True,
…               )
&gt;&gt;&gt; _ = gridCV.fit(X_train_reg, y_train_reg)</p>
<p># Below will throw a warning becaause ‘scoring’ differs from ‘refit’ in the GridSearchCV
&gt;&gt;&gt; fig, summary = summary_grid_search(gridCV, step=’regression__knn’, x_param=’n_neighbors’, scoring=’r2’)
&gt;&gt;&gt; _ = plt.ylim((0,1))
&gt;&gt;&gt; _ = plt.grid()
&gt;&gt;&gt; # _ = plt.show()</p>
<p># Example1: simple Pipeline ========================
&gt;&gt;&gt; pipeline = Pipeline([
…                         (‘knn’, KNeighborsRegressor())])
&gt;&gt;&gt; param_grid = {
… ‘knn__n_neighbors’: [2, 3, 4, 5, 6],
… ‘knn__weights’: [‘uniform’, ‘distance’],
… }</p>
<p># Random grid search with single scoring method
&gt;&gt;&gt; randomCV = RandomizedSearchCV(estimator=pipeline,
… param_distributions = param_grid,
… n_iter = 10,
… n_jobs = -4,
… cv = KFold(n_splits=5, shuffle=True, random_state=50),
… refit = True,
… scoring = ‘r2’,
… return_train_score = True,
… random_state = 15
… )
&gt;&gt;&gt; _ = randomCV.fit(X_train_reg, y_train_reg)
&gt;&gt;&gt; _, _ = summary_grid_search(randomCV, x_param=’n_neighbors’, step=’knn’, scoring=’score’)
&gt;&gt;&gt; # _ = plt.show()</p>
</dd></dl>

</section>
<section id="module-neuropy.utils">
<span id="neuropy-utils"></span><h1><code class="docutils literal notranslate"><span class="pre">neuropy.utils</span></code><a class="headerlink" href="#module-neuropy.utils" title="Permalink to this headline"></a></h1>
<p>Submodule utils.py includes the following functions. &lt;br&gt;
- <strong>tiny_summary():</strong> Concise summary on data shape and missingness &lt;br&gt;
- <strong>convert_timestamp():</strong> Convert date columns from unix format to human readable datetime format &lt;br&gt;
- <strong>add_missings_or_negatives():</strong> Add missing values or negatives at random indices of a series &lt;br&gt;
- <strong>log_step():</strong> Wrapper (decorator) function that includes logging to a specified function &lt;br&gt;
- <strong>log_step_aws():</strong> Wrap (decorator) function with logger which time range info &lt;br&gt;
- <strong>save_figure():</strong> Save a matplotlib figure object &lt;br&gt;
- <strong>chain_snap():</strong> Print info about dataframe in pipe method &lt;br&gt;
- <strong>drop_with_regex():</strong> Drop rows or columns from dataframe with regex &lt;br&gt;
- <strong>chain_plotting():</strong> Plot info about dataframe in pipe method &lt;br&gt;
- <strong>NeurocastColors(class):</strong> color codes of Neurocast &lt;br&gt;</p>
<dl class="py class">
<dt class="sig sig-object py" id="neuropy.utils.NeurocastColors">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">neuropy.utils.</span></span><span class="sig-name descname"><span class="pre">NeurocastColors</span></span><a class="reference internal" href="_modules/neuropy/utils.html#NeurocastColors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.utils.NeurocastColors" title="Permalink to this definition"></a></dt>
<dd><p>Utility class for Neurocast’s color codes.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="n">NeurocastColors</span><span class="o">.</span><span class="n">ORANGE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="n">NeurocastColors</span><span class="o">.</span><span class="n">LIGHTBLUE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># plt.show()</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="neuropy.utils.NeurocastColors.AZUREBLUE">
<span class="sig-name descname"><span class="pre">AZUREBLUE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'#3c9fd8'</span></em><a class="headerlink" href="#neuropy.utils.NeurocastColors.AZUREBLUE" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="neuropy.utils.NeurocastColors.DARKBLUE">
<span class="sig-name descname"><span class="pre">DARKBLUE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'#306fbe'</span></em><a class="headerlink" href="#neuropy.utils.NeurocastColors.DARKBLUE" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="neuropy.utils.NeurocastColors.DARKGREY">
<span class="sig-name descname"><span class="pre">DARKGREY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'#282d32'</span></em><a class="headerlink" href="#neuropy.utils.NeurocastColors.DARKGREY" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="neuropy.utils.NeurocastColors.LIGHTBLUE">
<span class="sig-name descname"><span class="pre">LIGHTBLUE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'#7da8d7'</span></em><a class="headerlink" href="#neuropy.utils.NeurocastColors.LIGHTBLUE" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="neuropy.utils.NeurocastColors.LIGHTGREY">
<span class="sig-name descname"><span class="pre">LIGHTGREY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'#b1b1b1'</span></em><a class="headerlink" href="#neuropy.utils.NeurocastColors.LIGHTGREY" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="neuropy.utils.NeurocastColors.MEDIUMGREY">
<span class="sig-name descname"><span class="pre">MEDIUMGREY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'#808080'</span></em><a class="headerlink" href="#neuropy.utils.NeurocastColors.MEDIUMGREY" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="neuropy.utils.NeurocastColors.OFFWHITE">
<span class="sig-name descname"><span class="pre">OFFWHITE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'#d5d5d5'</span></em><a class="headerlink" href="#neuropy.utils.NeurocastColors.OFFWHITE" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="neuropy.utils.NeurocastColors.ORANGE">
<span class="sig-name descname"><span class="pre">ORANGE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'#e58038'</span></em><a class="headerlink" href="#neuropy.utils.NeurocastColors.ORANGE" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neuropy.utils.NeurocastColors.get_names">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_names</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/utils.html#NeurocastColors.get_names"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.utils.NeurocastColors.get_names" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neuropy.utils.NeurocastColors.plot_colors">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">plot_colors</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/utils.html#NeurocastColors.plot_colors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.utils.NeurocastColors.plot_colors" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neuropy.utils.NeurocastColors.to_dict">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/utils.html#NeurocastColors.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.utils.NeurocastColors.to_dict" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neuropy.utils.NeurocastColors.to_list">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">to_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/utils.html#NeurocastColors.to_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.utils.NeurocastColors.to_list" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.utils.add_missings_or_negatives">
<span class="sig-prename descclassname"><span class="pre">neuropy.utils.</span></span><span class="sig-name descname"><span class="pre">add_missings_or_negatives</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentage</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/utils.html#add_missings_or_negatives"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.utils.add_missings_or_negatives" title="Permalink to this definition"></a></dt>
<dd><p>Add missing values or negatives at random indices of a series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>variable: pandas.Series</strong></dt><dd><p>series with the data</p>
</dd>
<dt><strong>percentage: float</strong></dt><dd><p>percentage of indices that should be transformed to a negative or missing</p>
</dd>
<dt><strong>method: str</strong></dt><dd><p>type of transformation, options: {‘missings’,’negatives’}</p>
</dd>
<dt><strong>random_seed: int</strong></dt><dd><p>optional, to set a seed for the random selection of indices</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>pandas.Series</dt><dd><p>transformed series</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;mpg&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;cylinders_with_missings&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_missings_or_negatives</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;cylinders&#39;</span><span class="p">],</span> <span class="n">percentage</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;missings&#39;</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.utils.chain_plotting">
<span class="sig-prename descclassname"><span class="pre">neuropy.utils.</span></span><span class="sig-name descname"><span class="pre">chain_plotting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn=&lt;function</span> <span class="pre">&lt;lambda&gt;&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title:</span> <span class="pre">typing.Optional[str]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlabel:</span> <span class="pre">typing.Optional[str]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylabel:</span> <span class="pre">typing.Optional[str]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suptitle:</span> <span class="pre">typing.Optional[str]</span> <span class="pre">=</span> <span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/utils.html#chain_plotting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.utils.chain_plotting" title="Permalink to this definition"></a></dt>
<dd><p>Function to plot things in method chaining, leaving the dataframe untouched</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">pandas.DataFrame</span></dt><dd></dd>
<dt><strong>fn: lambda function for plotting</strong></dt><dd></dd>
<dt><strong>title: str, optional</strong></dt><dd></dd>
<dt><strong>xlabel: str, optional</strong></dt><dd></dd>
<dt><strong>ylabel: str, optional</strong></dt><dd></dd>
<dt><strong>suptitle: str, optional</strong></dt><dd><p>Can be used for a  ‘main’ title when subplots are made</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>df: pd.DataFrame</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.utils</span> <span class="kn">import</span> <span class="n">chain_plotting</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mydata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mydata</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">chain_plotting</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chain_plotting</span><span class="p">(</span><span class="n">mydata</span><span class="p">,</span> <span class="n">fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.utils.chain_snap">
<span class="sig-prename descclassname"><span class="pre">neuropy.utils.</span></span><span class="sig-name descname"><span class="pre">chain_snap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn=&lt;function</span> <span class="pre">&lt;lambda&gt;&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msg=None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/utils.html#chain_snap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.utils.chain_snap" title="Permalink to this definition"></a></dt>
<dd><p>Function to print things in method chaining, leaving the dataframe untouched</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">pandas.DataFrame</span></dt><dd></dd>
<dt><strong>fn: lambda</strong></dt><dd><p>function that takes a pandas.DataFrame and that creates output to be printed</p>
</dd>
<dt><strong>msg: str or None</strong></dt><dd><p>optional message to be printed above output of the function</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neuropy.utils</span> <span class="kn">import</span> <span class="n">chain_snap</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;letter&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="s1">&#39;number&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">chain_snap</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s1">&#39;Shape of the dataframe:&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">chain_snap</span><span class="p">,</span> <span class="n">fn</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;letter&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(),</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Frequency of letters:&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">chain_snap</span><span class="p">,</span> <span class="n">fn</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;letter&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Dataframe where letter is c:&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.utils.convert_timestamp">
<span class="sig-prename descclassname"><span class="pre">neuropy.utils.</span></span><span class="sig-name descname"><span class="pre">convert_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ms'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/utils.html#convert_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.utils.convert_timestamp" title="Permalink to this definition"></a></dt>
<dd><p>Convert date columns from unix format to human readable datetime format.
This function is tuned to process dataframes coming from the Neurocast DataAPI</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>col</strong><span class="classifier">pd.Series</span></dt><dd><p>pandas column which contains the timestamp in unix format</p>
</dd>
<dt><strong>unit</strong><span class="classifier">str (default: ‘ms’)</span></dt><dd><p>unit of the arg (D,s,ms,us,ns) denote the unit, which is an integer or float number.
This will be based off the origin. Example, with unit=’ms’ and origin=’unix’ (the default),
this would calculate the number of milliseconds to the unix epoch start.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>col</strong><span class="classifier">pd.Series</span></dt><dd><p>pandas series with dtype=datetime</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.utils.drop_with_regex">
<span class="sig-prename descclassname"><span class="pre">neuropy.utils.</span></span><span class="sig-name descname"><span class="pre">drop_with_regex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regex</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/utils.html#drop_with_regex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.utils.drop_with_regex" title="Permalink to this definition"></a></dt>
<dd><p>Drop columns or rows from dataframe that match regex (as implemented in pd.DataFrame.filter )</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data: pandas.DataFrame</strong></dt><dd></dd>
<dt><strong>regex: str (regular expression)</strong></dt><dd><p>Drop labels from axis for which re.search(regex, label) == True.</p>
</dd>
<dt><strong>axis: {0 or ‘index’, 1 or ‘columns’}, default: 1</strong></dt><dd><p>Whether to drop labels from the index (0 or ‘index’) or columns (1 or ‘columns’).</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.utils.log_step">
<span class="sig-prename descclassname"><span class="pre">neuropy.utils.</span></span><span class="sig-name descname"><span class="pre">log_step</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/utils.html#log_step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.utils.log_step" title="Permalink to this definition"></a></dt>
<dd><p>Wrap (decorator) function with logger which adds shape of pd.DataFrame and execution time of function.</p>
<p>Add &#64;log_step before function in the following way:</p>
<p>&#64;log_step
def any_function():</p>
<blockquote>
<div><p>…</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>func: python function</strong></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>output of function and additional logging info</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.utils.log_step_aws">
<span class="sig-prename descclassname"><span class="pre">neuropy.utils.</span></span><span class="sig-name descname"><span class="pre">log_step_aws</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/utils.html#log_step_aws"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.utils.log_step_aws" title="Permalink to this definition"></a></dt>
<dd><p>Wrap (decorator) function with logger which adds end- and start date, time range and number of selected users
of the extracted aws data.
Add &#64;log_step_aws before aws function in the following way:
&#64;log_step_aws
def aws_data_extraction():</p>
<blockquote>
<div><p>…</p>
</div></blockquote>
<p>func: python function
Returns
——-
output of function and additional logging info</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.utils.save_figure">
<span class="sig-prename descclassname"><span class="pre">neuropy.utils.</span></span><span class="sig-name descname"><span class="pre">save_figure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quality</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">95</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">600</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/utils.html#save_figure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.utils.save_figure" title="Permalink to this definition"></a></dt>
<dd><p>Save figure with a certain name to a directory. Basically a wrapper for <cite>matplotlib.pyplt.savefig</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>fig: matplotlib.figure.Figure</strong></dt><dd></dd>
<dt><strong>name: str or None</strong></dt><dd></dd>
<dt><strong>dir: str or None</strong></dt><dd><p>Directory where to save the figure. If None, saved to current working directory
Can be a relative path or an absolute path</p>
</dd>
<dt><strong>quality: int</strong></dt><dd><p>Image quality, ranging from 1 till 95</p>
</dd>
<dt><strong>dpi: int or None or ‘figure’ (default: 600)</strong></dt><dd><p>The resolution in dots per inch. If None, defaults to rcParams[“savefig.dpi”] = ‘figure’.
If ‘figure’, uses the figure’s dpi value.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">save_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;t-SNE.jpg&#39;</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="s1">&#39;/home/user/Downloads&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.utils.tiny_summary">
<span class="sig-prename descclassname"><span class="pre">neuropy.utils.</span></span><span class="sig-name descname"><span class="pre">tiny_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/utils.html#tiny_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.utils.tiny_summary" title="Permalink to this definition"></a></dt>
<dd><p>Concise summary on data shape and missingness</p>
<dl class="simple">
<dt>data<span class="classifier">pandas.DataFrame</span></dt><dd><p>Dataframe of interest</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"></dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tiny_summary</span><span class="p">(</span><span class="n">tips</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-neuropy.vumc_utils">
<span id="neuropy-vumc-utils"></span><h1><code class="docutils literal notranslate"><span class="pre">neuropy.vumc_utils</span></code><a class="headerlink" href="#module-neuropy.vumc_utils" title="Permalink to this headline"></a></h1>
<p>Submodule vumc_utils.py. Includes project specific functions for the VUmc &lt;br&gt;
- <strong>fetch_poms_dataset():</strong> Internal function to load data quickly &lt;br&gt;
- <strong>melt_multiple_test_dates():</strong> Creates user-friendly dataframe when handling multiple test dates &lt;br&gt;
- <strong>replace_default_values_with_nan():</strong> Pipe function to remove default values &lt;br&gt;</p>
<dl class="py function">
<dt class="sig sig-object py" id="neuropy.vumc_utils.fetch_poms_dataset">
<span class="sig-prename descclassname"><span class="pre">neuropy.vumc_utils.</span></span><span class="sig-name descname"><span class="pre">fetch_poms_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">poms_filepath</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'20200303_APPSMS_export_DS_Friendly.csv'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pandas.core.frame.DataFrame</span></span></span><a class="reference internal" href="_modules/neuropy/vumc_utils.html#fetch_poms_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.vumc_utils.fetch_poms_dataset" title="Permalink to this definition"></a></dt>
<dd><p>Fetch POMS and VUmc code tables from S3 bucket, and merge them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>poms_filepath: str (default: “20200303_APPSMS_export_DS_Friendly.csv”)</strong></dt><dd><p>filepath to POMS table</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>pd.DataFrame</dt><dd><p>POMS table with user ids</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df_poms</span> <span class="o">=</span> <span class="n">fetch_poms_dataset</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="neuropy.vumc_utils.melt_multiple_test_dates">
<span class="sig-prename descclassname"><span class="pre">neuropy.vumc_utils.</span></span><span class="sig-name descname"><span class="pre">melt_multiple_test_dates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_quest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_points</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoints</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{'m00':</span> <span class="pre">0.0,</span> <span class="pre">'m002':</span> <span class="pre">0.5,</span> <span class="pre">'m03':</span> <span class="pre">3.0,</span> <span class="pre">'m06':</span> <span class="pre">6.0,</span> <span class="pre">'m09':</span> <span class="pre">9.0,</span> <span class="pre">'m12':</span> <span class="pre">12.0}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/neuropy/vumc_utils.html#melt_multiple_test_dates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neuropy.vumc_utils.melt_multiple_test_dates" title="Permalink to this definition"></a></dt>
<dd><p>Melt dataframe columns w.r.t checkpoints (m00, m0002, m03, m06, m09, m12).
So instead of:</p>
<blockquote>
<div><blockquote>
<div><dl class="simple">
<dt>m00_CIS_total | m0002_CIS_total | m03_CIS_total | m06_CIS_total | m09_CIS_total | m012_CIS_total</dt><dd><p>7                8                 6               10              7               7</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>Now we’ll have:</dt><dd><dl class="simple">
<dt>checkpoint | CIS_total</dt><dd><p>0.0          7
0.2          8
3.0          6
6.0          10
9.0          7
12.0         7</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>Special logic for endpoints that have a m002 measurement. These endpoints consider “Questionnaires_completiondate”
as test date. Endpoints without a m002 measurement consider ‘visitdate’ as test date.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>df_quest: pd.DataFrame</strong></dt><dd><p>Dataframe that contains the end point results.</p>
</dd>
<dt><strong>end_point: str</strong></dt><dd><p>Column that specifies the scores of the end point of interest.</p>
</dd>
<dt><strong>checkpoints: Dict[str, float] (default: {‘m00’: 0., ‘m002’: 0.5, ‘m03’: 3., ‘m06’: 6., ‘m09’: 9., ‘m12’: 12.})</strong></dt><dd><p>mapping of checkpoint prefixes to floats.</p>
</dd>
<dt><strong>Examples</strong></dt><dd></dd>
<dt><strong>________</strong></dt><dd></dd>
<dt><strong>&gt;&gt;&gt; df_quest = (</strong></dt><dd></dd>
<dt><strong>…     fetch_poms_dataset()</strong></dt><dd></dd>
<dt><strong>…     .pipe(melt_multiple_test_dates, end_points=[‘HADS_anxiety’, ‘HADS_total’])</strong></dt><dd></dd>
<dt><strong>…     )</strong></dt><dd></dd>
<dt><strong>Returns</strong></dt><dd></dd>
<dt><strong>_______</strong></dt><dd></dd>
<dt><strong>pd.DataFrame</strong></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to neuropy’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Neurocast Data Science Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

</body>
</html>
